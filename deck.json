{
    "__type__": "Deck",
    "children": [
        {
            "__type__": "Deck",
            "children": [],
            "crowdanki_uuid": "936f9f05-caa9-11ec-a1e6-0c96e6db14fa",
            "deck_config_uuid": "936f9f06-caa9-11ec-94b3-0c96e6db14fa",
            "desc": "",
            "dyn": 0,
            "extendNew": 0,
            "extendRev": 0,
            "media_files": [],
            "name": "Basics of System Design",
            "notes": [
                {
                    "__type__": "Note",
                    "fields": [
                        "Start",
                        "<a href=\"https://www.freecodecamp.org/news/systems-design-for-interviews/\">https://www.freecodecamp.org/news/systems-design-for-interviews/</a>"
                    ],
                    "guid": "NYK7&TcjEJ",
                    "note_model_uuid": "936fc61e-caa9-11ec-a00e-0c96e6db14fa",
                    "tags": []
                }
            ]
        },
        {
            "__type__": "Deck",
            "children": [],
            "crowdanki_uuid": "93703b56-caa9-11ec-ae6a-0c96e6db14fa",
            "deck_config_uuid": "93703b57-caa9-11ec-ba48-0c96e6db14fa",
            "desc": "",
            "dyn": 0,
            "extendNew": 0,
            "extendRev": 0,
            "media_files": [
                "paste-3cdc73bbbd22c9eb3ecf598ce8fd87ecb13b922e.jpg",
                "paste-b31371227350fa7917b984dcb66358880ce0cf7b.jpg",
                "paste-b7f1b508a13ad22f64448b4c7fb9f46ff4aba750.jpg"
            ],
            "name": "CS Basics",
            "notes": [
                {
                    "__type__": "Note",
                    "fields": [
                        "what is polymorphism? example",
                        "<div style=\"text-align: left;\">polymorphism is the <u>ability</u>&nbsp;to present a single interface to entities with different type<br></div><font color=\"#2e2e2e\"><div style=\"text-align: left;\"><br>class Shape<br>class Square extends Shape<br>class Circle extends Shape<br><br>shapes = [square1, circle1]</div></font><font color=\"#2e2e2e\"><div style=\"text-align: left;\"><br>for each <b>shape</b> in s<b>hapes</b>:</div></font><font color=\"#2e2e2e\"><div style=\"text-align: left;\">&nbsp; &nbsp; shape.draw()<br><br>Instead of drawSquare(), drawCircle()</div></font><div style=\"text-align: left;\"><br></div>"
                    ],
                    "guid": "k3X/^+v_Jr",
                    "note_model_uuid": "93706262-caa9-11ec-a73d-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "what is SOLID?&nbsp;",
                        "single responsibility<br>open closed&nbsp;<br>liskov substitution<br>interface segregation<br>dependency inversion"
                    ],
                    "guid": "Ad;.)6GHJu",
                    "note_model_uuid": "93706262-caa9-11ec-a73d-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "what is open close principle from SOLID? <br>Explain with design of a program that prints questions from questions database.<br>what code smell suggests violation of this principle",
                        "<div style=\"text-align: left;\"><b>Entities should be open for extension but closed for modification</b></div><div style=\"text-align: left;\"><br></div><div style=\"text-align: left;\">lets say we have a questions object with a pair of questions</div><div style=\"text-align: left;\"><br></div><div style=\"text-align: left;\">const <b>questions</b> = {</div><div style=\"text-align: left;\">&nbsp; q: this is a question</div><div style=\"text-align: left;\">&nbsp; type: multiple-choice, boolean, range</div><div style=\"text-align: left;\">&nbsp; ..</div><div style=\"text-align: left;\">&nbsp; ..</div><div style=\"text-align: left;\">}</div><div style=\"text-align: left;\"><div style=\"text-align: left;\"><br></div><div style=\"text-align: left;\">we create a function <b>printQuiz</b>() that prints the questions to view.</div><div style=\"text-align: left;\"><br></div><div style=\"text-align: left;\">we can write it this way =&gt;</div><div style=\"text-align: left;\"><br></div><b><div style=\"text-align: left;\"><b>printQuiz</b>(questions) {</div></b><div style=\"text-align: left;\">&nbsp; questions.map((question, index) =&gt; {</div><div style=\"text-align: left;\">&nbsp; &nbsp; (question.type ===\"multiple-choice\") &amp;&amp; printMultiChoiceQ()&nbsp;</div><div style=\"text-align: left;\">&nbsp; &nbsp; (question.type ===\"boolean\") &amp;&amp; printBoolQ()</div><div style=\"text-align: left;\">&nbsp; })</div><div style=\"text-align: left;\">}</div><div style=\"text-align: left;\"><br></div><div style=\"text-align: left;\">Let say if in future, we include subjective questions then printQuiz() will break as it does not know how to deal with subjective questions. We will have to make change to <b>printQuiz(), </b>add a printSubjectiveQ() for it to work.</div><div style=\"text-align: left;\"><br></div><div style=\"text-align: left;\">this is not ideal as printQuiz's job should be just printing the question and not deal with what question is made up of. It should accept questions array and just print them no matter what.</div><div style=\"text-align: left;\"><br></div><div style=\"text-align: left;\">To achieve we can use polymorphism.</div><div style=\"text-align: left;\"><br></div><b><div style=\"text-align: left;\"><b>printQuiz</b>(questions){</div></b><div style=\"text-align: left;\">&nbsp; questions.map((item, index) =&gt; {</div><div style=\"text-align: left;\">&nbsp; &nbsp; question.print()</div><div style=\"text-align: left;\">&nbsp; })</div><div style=\"text-align: left;\">}</div><div style=\"text-align: left;\"><br></div><div style=\"text-align: left;\">Push the logic of printing to questions:</div><div style=\"text-align: left;\"><br></div></div><div style=\"text-align: left;\"><div style=\"text-align: left;\">const&nbsp;<b>questions</b>&nbsp;= {</div><div style=\"text-align: left;\">&nbsp; {</div><div style=\"text-align: left;\">&nbsp; &nbsp; q: this is a question</div><div style=\"text-align: left;\">&nbsp; &nbsp; type: multiple-choice, boolean, range</div><div style=\"text-align: left;\">&nbsp; &nbsp; print: function(){}</div><div style=\"text-align: left;\">&nbsp; }&nbsp;&nbsp;</div><div style=\"text-align: left;\">&nbsp; ..</div><div style=\"text-align: left;\">}<br><br><u>does this make sense?</u></div></div><div style=\"text-align: left;\"><br></div><div style=\"text-align: left;\">Long if..else or switch statments are most likely violating this principle and should be refactored.</div>"
                    ],
                    "guid": "P,gf[BMnyN",
                    "note_model_uuid": "93706262-caa9-11ec-a73d-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "what is single responsibility principle from SOLID? what is quote from Robert C Martin relevant to this? what is cohesion? what is coupling? how a system should be designed with respect to coupling and cohesion.",
                        "A component/module should have single resposibilty. It should do one thing.<br><br>A class should have <u>only one reason to change</u> - Robert C. Martin<br><br><u>Cohesion</u> referes to the degree to which the <u>elements inside a component</u> belong together. (inside a class)<br><br><u>Coupling</u> is degree of interdependence between software modules (between classes)<br><br>A good system should be high on cohension and low on coupling.<br><img src=\"paste-b31371227350fa7917b984dcb66358880ce0cf7b.jpg\">"
                    ],
                    "guid": "PDkIE|+MM6",
                    "note_model_uuid": "93706262-caa9-11ec-a73d-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "what is Liskov substitution principle?",
                        "<div style=\"text-align: left;\"><u style=\"color: rgb(35, 38, 41);\">object of a derived class(square)</u><span style=\"color: rgb(35, 38, 41);\">&nbsp;should be able to replace an object of the </span><u style=\"color: rgb(35, 38, 41);\">base class(rectangle)</u><span style=\"color: rgb(35, 38, 41);\"> without any errors in the system or modifying the behavior of the base class.</span><span style=\"color: rgb(35, 38, 41);\"><br></span></div>"
                    ],
                    "guid": "c9WHGK&HlF",
                    "note_model_uuid": "93706262-caa9-11ec-a73d-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "what is dependency inversion principle? explain with wire soldering metaphor.",
                        "<div style=\"text-align: left;\"><div>1. high level module should not depend on low level modules; both should depend on abstractions (Interface or abstract class)</div><div>2. Abastractions should not depend on details(concrete classes). details should depend upon abstractions.<br><br></div>For ex. <br>Instead of Controller(high level logic) -&gt; UserRepo (database)<br>Controller(high level logic) -&gt; Interface &lt;- UserRepo (database)<br><br><img src=\"paste-b7f1b508a13ad22f64448b4c7fb9f46ff4aba750.jpg\"><br><br></div>Here, UserRepo no longer is a dependency, its inverted.&nbsp;"
                    ],
                    "guid": "dEK~YhGF)q",
                    "note_model_uuid": "93706262-caa9-11ec-a73d-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "what is interface segregation principle, explain with example in the contex of OO as well as JS.",
                        "<pre><div style=\"text-align: left;\"><span style=\"font-family: Arial;\">@Override</span></div><code><div style=\"text-align: left;\"><span style=\"font-family: Arial;\">public void move() {</span></div><div style=\"text-align: left;\"><span style=\"font-family: Arial;\">    //Not used: just needed to implement interface</span></div><div style=\"text-align: left;\"><span style=\"font-family: Arial;\">}</span></div></code></pre><div style=\"text-align: left;\">In the context of <b>interfaces </b>in OO languages, no inherited class should be forced to depend on methods it does not use, here turret is forced to depend on interfaces such as move() inherited from Enemy class which does not make sense for turret<br></div><div style=\"text-align: left;\"><br>In JS context, If you define a class <b>Entity</b> with <b>name, takeDamage, health, move</b> etc.<br>creating a <b>Turret</b> extending the Entity is not optimal as move etc do not apply. To solve this, ideally composition should be used.<br><br><br><br></div><br>"
                    ],
                    "guid": "Kyk=fqzovL",
                    "note_model_uuid": "93706262-caa9-11ec-a73d-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "what is the diff between abstraction vs encapsulation?",
                        "A tree jpeg is a abstraction of actual tree<br>A class variable with getters and setters is encapsulated"
                    ],
                    "guid": "O~cKj]kOBC",
                    "note_model_uuid": "93706262-caa9-11ec-a73d-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "what does this mean? \"program to an interface and not implmentation\" with example",
                        "<div style=\"text-align: left;\">In the following scenario, you can write a live UserRepo object and a mock UserRepo for testing:</div><div style=\"text-align: left;\"><img src=\"paste-3cdc73bbbd22c9eb3ecf598ce8fd87ecb13b922e.jpg\"></div><div style=\"text-align: left;\"><br></div><div style=\"text-align: left;\">class <b>UserRepo</b> implments IUserRepo {</div><div style=\"text-align: left;\">&nbsp; &nbsp; constructor(){}</div><div style=\"text-align: left;\">&nbsp; &nbsp; getUsers(): {}</div><div style=\"text-align: left;\">}</div><div style=\"text-align: left;\"><br></div><div style=\"text-align: left;\">class <b>MockUserRepo</b> implments IUserRepo {</div><div style=\"text-align: left;\">&nbsp; &nbsp; users // are array</div><div style=\"text-align: left;\">}</div>"
                    ],
                    "guid": "Kz<)-%--Uj",
                    "note_model_uuid": "93706262-caa9-11ec-a73d-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "diff between compiler and interpreter",
                        "<span style=\"color: rgb(35, 38, 41);\"><div style=\"text-align: left;\">Compiler translates high level code to low level code, e.g.&nbsp;<em style=\"color: black;\">Java -&gt; JVM</em></div></span><em><div style=\"text-align: left;\"><em>It does not execute code.</em></div><div style=\"text-align: left;\"><br></div></em><div style=\"text-align: left;\">Interpreter executes code one line at a time.</div><div style=\"text-align: left;\"><br></div>"
                    ],
                    "guid": "yY;`!E#K7l",
                    "note_model_uuid": "93706262-caa9-11ec-a73d-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "Explain composition over inheritance with a simple example.",
                        "<div style=\"text-align: left;\">bird &gt; flying bird &gt; Eagle</div><div style=\"text-align: left;\">bird &gt; swiming bird &gt; Penguin</div><div style=\"text-align: left;\"><br></div><div style=\"text-align: left;\">what about Duck? a swimming &amp; flying bird</div><div style=\"text-align: left;\">// does not work.</div><div style=\"text-align: left;\"><br></div><div style=\"text-align: left;\">Instead:</div><div style=\"text-align: left;\">you can have a bird and compose its properties with composition of flying, swimming functions.</div><div style=\"text-align: left;\">you can create many types of birds, with many properties.</div>"
                    ],
                    "guid": "xxB/opF=.,",
                    "note_model_uuid": "93706262-caa9-11ec-a73d-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "what is camel case, kebab case, snake case, pascal case, sentencecase.",
                        "camelCase<br>kebab-case<br>snake_case<br>PascalCase<br>Sentencecase"
                    ],
                    "guid": "kS3/Cb$N3i",
                    "note_model_uuid": "93706262-caa9-11ec-a73d-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "how memory works?",
                        "brilliant"
                    ],
                    "guid": "u{[lUAUu[7",
                    "note_model_uuid": "936fc61e-caa9-11ec-a00e-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "what is round robin? in the context of game with many players and signatures.",
                        "each player plays against other player<br>written petition with signatures in round order so as to avoid who signed first."
                    ],
                    "guid": "Fx.f!?m<At",
                    "note_model_uuid": "936fc61e-caa9-11ec-a00e-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "what is browser architecture?",
                        "<a href=\"https://medium.com/web-god-mode/how-web-browsers-work-behind-the-scene-architecture-technologies-and-internal-working-fec601488bfa\">https://medium.com/web-god-mode/how-web-browsers-work-behind-the-scene-architecture-technologies-and-internal-working-fec601488bfa</a>"
                    ],
                    "guid": "ooU_EmG@QC",
                    "note_model_uuid": "936fc61e-caa9-11ec-a00e-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<div style=\"text-align: left;\">Does this follow separation of concerns principle?</div><div style=\"text-align: left;\">&lt;p class = \"text-center\"&gt;</div><div style=\"text-align: left;\">&nbsp; &nbsp; Hello there!</div><div style=\"text-align: left;\">&lt;/p&gt;</div>",
                        "No, centering text is a design decision, we are letting styling information bleed into our HTML<br>Separating content from design can allow for somethig as complex as:&nbsp;<a href=\"http://www.csszengarden.com/\">http://www.csszengarden.com/</a>"
                    ],
                    "guid": "C~vl-hXQsP",
                    "note_model_uuid": "936fc61e-caa9-11ec-a00e-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "What is memoization?",
                        "storing output values for inputs and using them as cache, speeds up certain computations such as finding fibonacci, this technique is memoization."
                    ],
                    "guid": "AW;{pI{_iX",
                    "note_model_uuid": "936fc61e-caa9-11ec-a00e-0c96e6db14fa",
                    "tags": []
                }
            ]
        },
        {
            "__type__": "Deck",
            "children": [],
            "crowdanki_uuid": "937173ed-caa9-11ec-a2df-0c96e6db14fa",
            "deck_config_uuid": "937173ee-caa9-11ec-accc-0c96e6db14fa",
            "desc": "",
            "dyn": 0,
            "extendNew": 0,
            "extendRev": 0,
            "media_files": [],
            "name": "OO Design",
            "notes": [
                {
                    "__type__": "Note",
                    "fields": [
                        "<h1 style=\"margin-top: 0.538em; margin-bottom: 0px; padding: 0px; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-weight: bold; line-height: 1; color: rgb(0, 0, 0); text-rendering: optimizeLegibility; font-size: 25.998px;\">Design a deck of cards</h1>",
                        "<div class=\"cell border-box-sizing text_cell rendered\" style=\"margin: 0px; padding: 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;\"><div class=\"inner_cell\" style=\"margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;\"><div class=\"text_cell_render border-box-sizing rendered_html\" style=\"margin: 0px; padding: 0.5em 0.5em 0.5em 0.4em; box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none;\"><h2 style=\"margin: 0.636em 0px 0px; padding: 0px; font-weight: bold; line-height: 1; text-rendering: optimizeLegibility; font-size: 21.994px;\">Constraints and assumptions<a class=\"anchor-link\" href=\"https://render.githubusercontent.com/view/ipynb?commit=dc2b8f7e0ce65a68a7181324576a8b16bf71f66c&amp;enc_url=68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f646f6e6e656d617274696e2f73797374656d2d64657369676e2d7072696d65722f646332623866376530636536356136386137313831333234353736613862313662663731663636632f736f6c7574696f6e732f6f626a6563745f6f7269656e7465645f64657369676e2f6465636b5f6f665f63617264732f6465636b5f6f665f63617264732e6970796e623f746f6b656e3d41464e4d4e546a3266637a72397534306855687555506b74377351696936696c6b7335597634704c7741253344253344&amp;nwo=donnemartin%2Fsystem-design-primer&amp;path=solutions%2Fobject_oriented_design%2Fdeck_of_cards%2Fdeck_of_cards.ipynb&amp;repository_id=83222441#Constraints-and-assumptions\" style=\"margin: 0px; padding: 0px 20px; color: rgb(0, 136, 204); visibility: hidden;\"></a></h2><ul style=\"margin: 1em 2em 0px; padding: 0px; list-style-position: initial; list-style-image: initial;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Is this a generic deck of cards for games like poker and black jack?<ul style=\"margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Yes, design a generic deck then extend it to black jack</li></ul></li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Can we assume the deck has 52 cards (2-10, Jack, Queen, King, Ace) and 4 suits?<ul style=\"margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Yes</li></ul></li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Can we assume inputs are valid or do we have to validate them?<ul style=\"margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Assume they're valid</li></ul></li></ul></div></div></div><div class=\"cell border-box-sizing text_cell rendered\" style=\"margin: 0px; padding: 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;\"><div class=\"inner_cell\" style=\"margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;\"><div class=\"text_cell_render border-box-sizing rendered_html\" style=\"margin: 0px; padding: 0.5em 0.5em 0.5em 0.4em; box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none;\"><h2 style=\"margin: 0.636em 0px 0px; padding: 0px; font-weight: bold; line-height: 1; text-rendering: optimizeLegibility; font-size: 21.994px;\">Solution</h2></div></div></div><div class=\"cell border-box-sizing code_cell rendered\" style=\"margin: 0px; padding: 5px 5px 5px 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;\"><div class=\"input\" style=\"margin: 0px; padding: 0px; break-inside: avoid; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch;\"><div class=\"inner_cell\" style=\"margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;\"><div class=\"input_area\" style=\"margin: 0px; padding: 0px; border: 1px solid rgb(207, 207, 207); border-radius: 4px; background: rgb(247, 247, 247); line-height: 1.21429em;\"><div class=\" highlight hl-ipython3\" style=\"margin: 0.4em; padding: 0px; background: transparent; border: none;\"><pre style=\"margin-bottom: 0px; padding: 0px; font-family: monospace; font-size: inherit; color: rgb(51, 51, 51); border-radius: 4px; line-height: inherit; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; background-color: transparent; border: none;\"><span style=\"margin: 0px; padding: 0px;\"></span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">%%</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">writefile</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">deck_of_cards</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">py</span>\n<span class=\"kn\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">from</span> <span class=\"nn\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">abc</span> <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">import</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">ABCMeta</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">abstractmethod</span>\n<span class=\"kn\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">from</span> <span class=\"nn\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">enum</span> <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">import</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">Enum</span>\n<span class=\"kn\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">import</span> <span class=\"nn\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">sys</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">Suit</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">Enum</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"n\" style=\"margin: 0px; padding: 0px;\">HEART</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">0</span>\n    <span class=\"n\" style=\"margin: 0px; padding: 0px;\">DIAMOND</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">1</span>\n    <span class=\"n\" style=\"margin: 0px; padding: 0px;\">CLUBS</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">2</span>\n    <span class=\"n\" style=\"margin: 0px; padding: 0px;\">SPADE</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">3</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">Card</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">metaclass</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">ABCMeta</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">value</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">suit</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">value</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">value</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">suit</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">suit</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">is_available</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">True</span>\n\n    <span class=\"nd\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255);\">@property</span>\n    <span class=\"nd\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255);\">@abstractmethod</span>\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">value</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">pass</span>\n\n    <span class=\"nd\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255);\">@value</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">setter</span>\n    <span class=\"nd\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255);\">@abstractmethod</span>\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">value</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">other</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">pass</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">BlackJackCard</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">Card</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">value</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">suit</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"nb\" style=\"margin: 0px; padding: 0px; color: green;\">super</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">BlackJackCard</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">value</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">suit</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">is_ace</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">return</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">True</span> <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">if</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">_value</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">==</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">1</span> <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">else</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">False</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">is_face_card</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"sd\" style=\"margin: 0px; padding: 0px; color: rgb(186, 33, 33); font-style: italic;\">\"\"\"Jack = 11, Queen = 12, King = 13\"\"\"</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">return</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">True</span> <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">if</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">10</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">&lt;</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">_value</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">&lt;=</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">13</span> <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">else</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">False</span>\n\n    <span class=\"nd\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255);\">@property</span>\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">value</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">if</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">is_ace</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">()</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">==</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">1</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">:</span>\n            <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">return</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">1</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">elif</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">is_face_card</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">():</span>\n            <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">return</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">10</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">else</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">:</span>\n            <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">return</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">_value</span>\n\n    <span class=\"nd\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255);\">@value</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">setter</span>\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">value</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">new_value</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">if</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">1</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">&lt;=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">new_value</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">&lt;=</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">13</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">:</span>\n            <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">_value</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">new_value</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">else</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">:</span>\n            <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">raise</span> <span class=\"ne\" style=\"margin: 0px; padding: 0px; color: rgb(210, 65, 58); font-weight: bold;\">ValueError</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"s1\" style=\"margin: 0px; padding: 0px; color: rgb(186, 33, 33);\">'Invalid card value: </span><span class=\"si\" style=\"margin: 0px; padding: 0px; color: rgb(187, 102, 136); font-weight: bold;\">{}</span><span class=\"s1\" style=\"margin: 0px; padding: 0px; color: rgb(186, 33, 33);\">'</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">format</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">new_value</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">))</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">Hand</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"nb\" style=\"margin: 0px; padding: 0px; color: green;\">object</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">cards</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">cards</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">cards</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">add_card</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">card</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">cards</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">append</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">card</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">score</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"n\" style=\"margin: 0px; padding: 0px;\">total_value</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">0</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">for</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">card</span> <span class=\"ow\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;\">in</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">card</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">:</span>\n            <span class=\"n\" style=\"margin: 0px; padding: 0px;\">total_value</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">+=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">card</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">value</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">return</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">total_value</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">BlackJackHand</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">Hand</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"n\" style=\"margin: 0px; padding: 0px;\">BLACKJACK</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">21</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">cards</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"nb\" style=\"margin: 0px; padding: 0px; color: green;\">super</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">BlackJackHand</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">cards</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">score</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"n\" style=\"margin: 0px; padding: 0px;\">min_over</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">sys</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">MAXSIZE</span>\n        <span class=\"n\" style=\"margin: 0px; padding: 0px;\">max_under</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">-</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">sys</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">MAXSIZE</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">for</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">score</span> <span class=\"ow\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;\">in</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">possible_scores</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">():</span>\n            <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">if</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">BLACKJACK</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">&lt;</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">score</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">&lt;</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">min_over</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">:</span>\n                <span class=\"n\" style=\"margin: 0px; padding: 0px;\">min_over</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">score</span>\n            <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">elif</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">max_under</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">&lt;</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">score</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">&lt;=</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">BLACKJACK</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">:</span>\n                <span class=\"n\" style=\"margin: 0px; padding: 0px;\">max_under</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">score</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">return</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">max_under</span> <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">if</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">max_under</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">!=</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">-</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">sys</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">MAXSIZE</span> <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">else</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">min_over</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">possible_scores</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"sd\" style=\"margin: 0px; padding: 0px; color: rgb(186, 33, 33); font-style: italic;\">\"\"\"Return a list of possible scores, taking Aces into account.\"\"\"</span>\n        <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># ...</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">Deck</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"nb\" style=\"margin: 0px; padding: 0px; color: green;\">object</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">cards</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">cards</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">cards</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">deal_index</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">0</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">remaining_cards</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">return</span> <span class=\"nb\" style=\"margin: 0px; padding: 0px; color: green;\">len</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">cards</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">-</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">deal_index</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">deal_card</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">():</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">try</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">:</span>\n            <span class=\"n\" style=\"margin: 0px; padding: 0px;\">card</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">cards</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">[</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">deal_index</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">]</span>\n            <span class=\"n\" style=\"margin: 0px; padding: 0px;\">card</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">is_available</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">False</span>\n            <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">deal_index</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">+=</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">1</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">except</span> <span class=\"ne\" style=\"margin: 0px; padding: 0px; color: rgb(210, 65, 58); font-weight: bold;\">IndexError</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">:</span>\n            <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">return</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">None</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">return</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">card</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">shuffle</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>  <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># ...</span></pre></div></div></div></div></div>"
                    ],
                    "guid": "iSogP(&O5P",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h1 style=\"margin-top: 0.538em; margin-bottom: 0px; padding: 0px; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-weight: bold; line-height: 1; color: rgb(0, 0, 0); text-rendering: optimizeLegibility; font-size: 25.998px;\">Design a call center</h1>",
                        "<div class=\"cell border-box-sizing text_cell rendered\" style=\"margin: 0px; padding: 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;\"><div class=\"inner_cell\" style=\"margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;\"><div class=\"text_cell_render border-box-sizing rendered_html\" style=\"margin: 0px; padding: 0.5em 0.5em 0.5em 0.4em; box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none;\"><h2 style=\"margin: 0.636em 0px 0px; padding: 0px; font-weight: bold; line-height: 1; text-rendering: optimizeLegibility; font-size: 21.994px;\">Constraints and assumptions<a class=\"anchor-link\" href=\"https://render.githubusercontent.com/view/ipynb?commit=dc2b8f7e0ce65a68a7181324576a8b16bf71f66c&amp;enc_url=68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f646f6e6e656d617274696e2f73797374656d2d64657369676e2d7072696d65722f646332623866376530636536356136386137313831333234353736613862313662663731663636632f736f6c7574696f6e732f6f626a6563745f6f7269656e7465645f64657369676e2f63616c6c5f63656e7465722f63616c6c5f63656e7465722e6970796e623f746f6b656e3d41464e4d4e5561474554335752633972736e3541796b4e626344786b474342626b73355976346e4b7741253344253344&amp;nwo=donnemartin%2Fsystem-design-primer&amp;path=solutions%2Fobject_oriented_design%2Fcall_center%2Fcall_center.ipynb&amp;repository_id=83222441#Constraints-and-assumptions\" style=\"margin: 0px; padding: 0px 20px; color: rgb(0, 136, 204); visibility: hidden;\"></a></h2><ul style=\"margin: 1em 2em 0px; padding: 0px; list-style-position: initial; list-style-image: initial;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">What levels of employees are in the call center?<ul style=\"margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Operator, supervisor, director</li></ul></li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Can we assume operators always get the initial calls?<ul style=\"margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Yes</li></ul></li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">If there is no free operators or the operator can't handle the call, does the call go to the supervisors?<ul style=\"margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Yes</li></ul></li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">If there is no free supervisors or the supervisor can't handle the call, does the call go to the directors?<ul style=\"margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Yes</li></ul></li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Can we assume the directors can handle all calls?<ul style=\"margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Yes</li></ul></li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">What happens if nobody can answer the call?<ul style=\"margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">It gets queued</li></ul></li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Do we need to handle 'VIP' calls where we put someone to the front of the line?<ul style=\"margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">No</li></ul></li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Can we assume inputs are valid or do we have to validate them?<ul style=\"margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Assume they're valid</li></ul></li></ul></div></div></div><div class=\"cell border-box-sizing text_cell rendered\" style=\"margin: 0px; padding: 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;\"><div class=\"inner_cell\" style=\"margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;\"><div class=\"text_cell_render border-box-sizing rendered_html\" style=\"margin: 0px; padding: 0.5em 0.5em 0.5em 0.4em; box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none;\"><h2 style=\"margin: 0.636em 0px 0px; padding: 0px; font-weight: bold; line-height: 1; text-rendering: optimizeLegibility; font-size: 21.994px;\">Solution</h2></div></div></div><div class=\"cell border-box-sizing code_cell rendered\" style=\"margin: 0px; padding: 5px 5px 5px 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;\"><div class=\"input\" style=\"margin: 0px; padding: 0px; break-inside: avoid; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch;\"><div class=\"inner_cell\" style=\"margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;\"><div class=\"input_area\" style=\"margin: 0px; padding: 0px; border: 1px solid rgb(207, 207, 207); border-radius: 4px; background: rgb(247, 247, 247); line-height: 1.21429em;\"><div class=\" highlight hl-ipython3\" style=\"margin: 0.4em; padding: 0px; background: transparent; border: none;\"><pre style=\"margin-bottom: 0px; padding: 0px; font-family: monospace; font-size: inherit; color: rgb(51, 51, 51); border-radius: 4px; line-height: inherit; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; background-color: transparent; border: none;\"><span style=\"margin: 0px; padding: 0px;\"></span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">%%</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">writefile</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">call_center</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">py</span>\n<span class=\"kn\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">from</span> <span class=\"nn\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">abc</span> <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">import</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">ABCMeta</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">abstractmethod</span>\n<span class=\"kn\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">from</span> <span class=\"nn\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">collections</span> <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">import</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">deque</span>\n<span class=\"kn\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">from</span> <span class=\"nn\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">enum</span> <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">import</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">Enum</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">Rank</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">Enum</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"n\" style=\"margin: 0px; padding: 0px;\">OPERATOR</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">0</span>\n    <span class=\"n\" style=\"margin: 0px; padding: 0px;\">SUPERVISOR</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">1</span>\n    <span class=\"n\" style=\"margin: 0px; padding: 0px;\">DIRECTOR</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">2</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">Employee</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">metaclass</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">ABCMeta</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">employee_id</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">name</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">rank</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">call_center</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">employee_id</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">employee_id</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">name</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">name</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">rank</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">rank</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">None</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">call_center</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">call_center</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">take_call</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"sd\" style=\"margin: 0px; padding: 0px; color: rgb(186, 33, 33); font-style: italic;\">\"\"\"Assume the employee will always successfully take the call.\"\"\"</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">employee</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">state</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">CallState</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">IN_PROGRESS</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">complete_call</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">state</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">CallState</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">COMPLETE</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">call_center</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">notify_call_completed</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n\n    <span class=\"nd\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255);\">@abstractmethod</span>\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">escalate_call</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">pass</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">_escalate_call</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">state</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">CallState</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">READY</span>\n        <span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">None</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">call_center</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">notify_call_escalated</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">Operator</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">Employee</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">employee_id</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">name</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"nb\" style=\"margin: 0px; padding: 0px; color: green;\">super</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">Operator</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">employee_id</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">name</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">Rank</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">OPERATOR</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">escalate_call</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">level</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">Rank</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">SUPERVISOR</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">_escalate_call</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">()</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">Supervisor</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">Employee</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">employee_id</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">name</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"nb\" style=\"margin: 0px; padding: 0px; color: green;\">super</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">Operator</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">employee_id</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">name</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">Rank</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">SUPERVISOR</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">escalate_call</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">level</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">Rank</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">DIRECTOR</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">_escalate_call</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">()</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">Director</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">Employee</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">employee_id</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">name</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"nb\" style=\"margin: 0px; padding: 0px; color: green;\">super</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">Operator</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">employee_id</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">name</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">Rank</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">DIRECTOR</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">escalate_call</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">raise</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">NotImplemented</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"s1\" style=\"margin: 0px; padding: 0px; color: rgb(186, 33, 33);\">'Directors must be able to handle any call'</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">CallState</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">Enum</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"n\" style=\"margin: 0px; padding: 0px;\">READY</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">0</span>\n    <span class=\"n\" style=\"margin: 0px; padding: 0px;\">IN_PROGRESS</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">1</span>\n    <span class=\"n\" style=\"margin: 0px; padding: 0px;\">COMPLETE</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">2</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">Call</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"nb\" style=\"margin: 0px; padding: 0px; color: green;\">object</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">rank</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">state</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">CallState</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">READY</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">rank</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">rank</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">employee</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">None</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">CallCenter</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"nb\" style=\"margin: 0px; padding: 0px; color: green;\">object</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">operators</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">supervisors</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">directors</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">operators</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">operators</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">supervisors</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">supervisors</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">directors</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">directors</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">queued_calls</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">deque</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">()</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">dispatch_call</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">if</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">rank</span> <span class=\"ow\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;\">not</span> <span class=\"ow\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;\">in</span> <span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">Rank</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">OPERATOR</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">Rank</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">SUPERVISOR</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">Rank</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">DIRECTOR</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n            <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">raise</span> <span class=\"ne\" style=\"margin: 0px; padding: 0px; color: rgb(210, 65, 58); font-weight: bold;\">ValueError</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"s1\" style=\"margin: 0px; padding: 0px; color: rgb(186, 33, 33);\">'Invalid call rank: </span><span class=\"si\" style=\"margin: 0px; padding: 0px; color: rgb(187, 102, 136); font-weight: bold;\">{}</span><span class=\"s1\" style=\"margin: 0px; padding: 0px; color: rgb(186, 33, 33);\">'</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">format</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">rank</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">))</span>\n        <span class=\"n\" style=\"margin: 0px; padding: 0px;\">employee</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">None</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">if</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">rank</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">==</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">Rank</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">OPERATOR</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">:</span>\n            <span class=\"n\" style=\"margin: 0px; padding: 0px;\">employee</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">_dispatch_call</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">operators</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">if</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">rank</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">==</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">Rank</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">SUPERVISOR</span> <span class=\"ow\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;\">or</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">employee</span> <span class=\"ow\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;\">is</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">None</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">:</span>\n            <span class=\"n\" style=\"margin: 0px; padding: 0px;\">employee</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">_dispatch_call</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">supervisors</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">if</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">rank</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">==</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">Rank</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">DIRECTOR</span> <span class=\"ow\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;\">or</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">employee</span> <span class=\"ow\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;\">is</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">None</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">:</span>\n            <span class=\"n\" style=\"margin: 0px; padding: 0px;\">employee</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">_dispatch_call</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">directors</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">if</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">employee</span> <span class=\"ow\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;\">is</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">None</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">:</span>\n            <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">queued_calls</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">append</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">_dispatch_call</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">employees</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">for</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">employee</span> <span class=\"ow\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;\">in</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">employees</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">:</span>\n            <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">if</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">employee</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span> <span class=\"ow\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;\">is</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">None</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">:</span>\n                <span class=\"n\" style=\"margin: 0px; padding: 0px;\">employee</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">take_call</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n                <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">return</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">employee</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">return</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">None</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">notify_call_escalated</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>  <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># ...</span>\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">notify_call_completed</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>  <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># ...</span>\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">dispatch_queued_call_to_newly_freed_employee</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">call</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">employee</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>  <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># ...</span></pre></div></div></div></div></div>"
                    ],
                    "guid": "PlrWhI1hda",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h1 style=\"margin-top: 0.538em; margin-bottom: 0px; padding: 0px; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-weight: bold; line-height: 1; color: rgb(0, 0, 0); text-rendering: optimizeLegibility; font-size: 25.998px;\">Design a hash map</h1>",
                        "<div class=\"cell border-box-sizing text_cell rendered\" style=\"margin: 0px; padding: 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;\"><div class=\"inner_cell\" style=\"margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;\"><div class=\"text_cell_render border-box-sizing rendered_html\" style=\"margin: 0px; padding: 0.5em 0.5em 0.5em 0.4em; box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none;\"><h2 style=\"margin: 0.636em 0px 0px; padding: 0px; font-weight: bold; line-height: 1; text-rendering: optimizeLegibility; font-size: 21.994px;\">Constraints and assumptions<a class=\"anchor-link\" href=\"https://render.githubusercontent.com/view/ipynb?commit=dc2b8f7e0ce65a68a7181324576a8b16bf71f66c&amp;enc_url=68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f646f6e6e656d617274696e2f73797374656d2d64657369676e2d7072696d65722f646332623866376530636536356136386137313831333234353736613862313662663731663636632f736f6c7574696f6e732f6f626a6563745f6f7269656e7465645f64657369676e2f686173685f7461626c652f686173685f6d61702e6970796e623f746f6b656e3d41464e4d4e6154574a664268747464727250714459466848363633536c54664d6b733559763470307741253344253344&amp;nwo=donnemartin%2Fsystem-design-primer&amp;path=solutions%2Fobject_oriented_design%2Fhash_table%2Fhash_map.ipynb&amp;repository_id=83222441#Constraints-and-assumptions\" style=\"margin: 0px; padding: 0px 20px; color: rgb(0, 136, 204); visibility: hidden;\"></a></h2><ul style=\"margin: 1em 2em 0px; padding: 0px; list-style-position: initial; list-style-image: initial;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">For simplicity, are the keys integers only?<ul style=\"margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Yes</li></ul></li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">For collision resolution, can we use chaining?<ul style=\"margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Yes</li></ul></li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Do we have to worry about load factors?<ul style=\"margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">No</li></ul></li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Can we assume inputs are valid or do we have to validate them?<ul style=\"margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Assume they're valid</li></ul></li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Can we assume this fits memory?<ul style=\"margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Yes</li></ul></li></ul></div></div></div><div class=\"cell border-box-sizing text_cell rendered\" style=\"margin: 0px; padding: 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;\"><div class=\"inner_cell\" style=\"margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;\"><div class=\"text_cell_render border-box-sizing rendered_html\" style=\"margin: 0px; padding: 0.5em 0.5em 0.5em 0.4em; box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none;\"><h2 style=\"margin: 0.636em 0px 0px; padding: 0px; font-weight: bold; line-height: 1; text-rendering: optimizeLegibility; font-size: 21.994px;\">Solution</h2></div></div></div><div class=\"cell border-box-sizing code_cell rendered\" style=\"margin: 0px; padding: 5px 5px 5px 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;\"><div class=\"input\" style=\"margin: 0px; padding: 0px; break-inside: avoid; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch;\"><div class=\"inner_cell\" style=\"margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;\"><div class=\"input_area\" style=\"margin: 0px; padding: 0px; border: 1px solid rgb(207, 207, 207); border-radius: 4px; background: rgb(247, 247, 247); line-height: 1.21429em;\"><div class=\" highlight hl-ipython3\" style=\"margin: 0.4em; padding: 0px; background: transparent; border: none;\"><pre style=\"margin-bottom: 0px; padding: 0px; font-family: monospace; font-size: inherit; color: rgb(51, 51, 51); border-radius: 4px; line-height: inherit; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; background-color: transparent; border: none;\"><span style=\"margin: 0px; padding: 0px;\"></span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">%%</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">writefile</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">hash_map</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">py</span>\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">Item</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"nb\" style=\"margin: 0px; padding: 0px; color: green;\">object</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">key</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">value</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">key</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">key</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">value</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">value</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">HashTable</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"nb\" style=\"margin: 0px; padding: 0px; color: green;\">object</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">size</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">size</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">size</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">table</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"p\" style=\"margin: 0px; padding: 0px;\">[[]</span> <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">for</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">_</span> <span class=\"ow\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;\">in</span> <span class=\"nb\" style=\"margin: 0px; padding: 0px; color: green;\">range</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">size</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)]</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">_hash_function</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">key</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">return</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">key</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">%</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">size</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">set</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">key</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">value</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"n\" style=\"margin: 0px; padding: 0px;\">hash_index</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">_hash_function</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">key</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">for</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">item</span> <span class=\"ow\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;\">in</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">table</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">[</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">hash_index</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">]:</span>\n            <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">if</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">item</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">key</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">==</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">key</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">:</span>\n                <span class=\"n\" style=\"margin: 0px; padding: 0px;\">item</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">value</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">value</span>\n                <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">return</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">table</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">[</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">hash_index</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">]</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">append</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">Item</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">key</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">value</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">))</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">get</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">key</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"n\" style=\"margin: 0px; padding: 0px;\">hash_index</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">_hash_function</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">key</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">for</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">item</span> <span class=\"ow\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;\">in</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">table</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">[</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">hash_index</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">]:</span>\n            <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">if</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">item</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">key</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">==</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">key</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">:</span>\n                <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">return</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">item</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">value</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">raise</span> <span class=\"ne\" style=\"margin: 0px; padding: 0px; color: rgb(210, 65, 58); font-weight: bold;\">KeyError</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"s1\" style=\"margin: 0px; padding: 0px; color: rgb(186, 33, 33);\">'Key not found'</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">remove</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">key</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"n\" style=\"margin: 0px; padding: 0px;\">hash_index</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">_hash_function</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">key</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">for</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">index</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">item</span> <span class=\"ow\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;\">in</span> <span class=\"nb\" style=\"margin: 0px; padding: 0px; color: green;\">enumerate</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">table</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">[</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">hash_index</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">]):</span>\n            <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">if</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">item</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">key</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">==</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">key</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">:</span>\n                <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">del</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">table</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">[</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">hash_index</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">][</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">index</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">]</span>\n                <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">return</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">raise</span> <span class=\"ne\" style=\"margin: 0px; padding: 0px; color: rgb(210, 65, 58); font-weight: bold;\">KeyError</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"s1\" style=\"margin: 0px; padding: 0px; color: rgb(186, 33, 33);\">'Key not found'</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span></pre></div></div></div></div></div>"
                    ],
                    "guid": "vePp9g<MW;",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h1 style=\"margin-top: 0.538em; margin-bottom: 0px; padding: 0px; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-weight: bold; line-height: 1; color: rgb(0, 0, 0); text-rendering: optimizeLegibility; font-size: 25.998px;\">Design an LRU cache</h1>",
                        "<div class=\"cell border-box-sizing text_cell rendered\" style=\"margin: 0px; padding: 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;\"><div class=\"inner_cell\" style=\"margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;\"><div class=\"text_cell_render border-box-sizing rendered_html\" style=\"margin: 0px; padding: 0.5em 0.5em 0.5em 0.4em; box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none;\"><h2 style=\"margin: 0.636em 0px 0px; padding: 0px; font-weight: bold; line-height: 1; text-rendering: optimizeLegibility; font-size: 21.994px;\">Constraints and assumptions<a class=\"anchor-link\" href=\"https://render.githubusercontent.com/view/ipynb?commit=dc2b8f7e0ce65a68a7181324576a8b16bf71f66c&amp;enc_url=68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f646f6e6e656d617274696e2f73797374656d2d64657369676e2d7072696d65722f646332623866376530636536356136386137313831333234353736613862313662663731663636632f736f6c7574696f6e732f6f626a6563745f6f7269656e7465645f64657369676e2f6c72755f63616368652f6c72755f63616368652e6970796e623f746f6b656e3d41464e4d4e54596b6d63306e516a66337435575772465a702d6d685874366e4f6b733559763471797741253344253344&amp;nwo=donnemartin%2Fsystem-design-primer&amp;path=solutions%2Fobject_oriented_design%2Flru_cache%2Flru_cache.ipynb&amp;repository_id=83222441#Constraints-and-assumptions\" style=\"margin: 0px; padding: 0px 20px; color: rgb(0, 136, 204); visibility: hidden;\"></a></h2><ul style=\"margin: 1em 2em 0px; padding: 0px; list-style-position: initial; list-style-image: initial;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">What are we caching?<ul style=\"margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">We are cahing the results of web queries</li></ul></li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Can we assume inputs are valid or do we have to validate them?<ul style=\"margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Assume they're valid</li></ul></li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Can we assume this fits memory?<ul style=\"margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Yes</li></ul></li></ul></div></div></div><div class=\"cell border-box-sizing text_cell rendered\" style=\"margin: 0px; padding: 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;\"><div class=\"inner_cell\" style=\"margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;\"><div class=\"text_cell_render border-box-sizing rendered_html\" style=\"margin: 0px; padding: 0.5em 0.5em 0.5em 0.4em; box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none;\"><h2 style=\"margin: 0.636em 0px 0px; padding: 0px; font-weight: bold; line-height: 1; text-rendering: optimizeLegibility; font-size: 21.994px;\">Solution</h2></div></div></div><div class=\"cell border-box-sizing code_cell rendered\" style=\"margin: 0px; padding: 5px 5px 5px 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;\"><div class=\"input\" style=\"margin: 0px; padding: 0px; break-inside: avoid; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch;\"><div class=\"inner_cell\" style=\"margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;\"><div class=\"input_area\" style=\"margin: 0px; padding: 0px; border: 1px solid rgb(207, 207, 207); border-radius: 4px; background: rgb(247, 247, 247); line-height: 1.21429em;\"><div class=\" highlight hl-ipython3\" style=\"margin: 0.4em; padding: 0px; background: transparent; border: none;\"><pre style=\"margin-bottom: 0px; padding: 0px; font-family: monospace; font-size: inherit; color: rgb(51, 51, 51); border-radius: 4px; line-height: inherit; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; background-color: transparent; border: none;\"><span style=\"margin: 0px; padding: 0px;\"></span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">%%</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">writefile</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">lru_cache</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">py</span>\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">Node</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"nb\" style=\"margin: 0px; padding: 0px; color: green;\">object</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">results</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">results</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">results</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">next</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"nb\" style=\"margin: 0px; padding: 0px; color: green;\">next</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">LinkedList</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"nb\" style=\"margin: 0px; padding: 0px; color: green;\">object</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">head</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">None</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">tail</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">None</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">move_to_front</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">node</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>  <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># ...</span>\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">append_to_front</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">node</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>  <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># ...</span>\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">remove_from_tail</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>  <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># ...</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">Cache</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"nb\" style=\"margin: 0px; padding: 0px; color: green;\">object</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">MAX_SIZE</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">MAX_SIZE</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">MAX_SIZE</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">size</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">0</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">lookup</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"p\" style=\"margin: 0px; padding: 0px;\">{}</span>  <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># key: query, value: node</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">linked_list</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">LinkedList</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">()</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">get</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">query</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n        <span class=\"sd\" style=\"margin: 0px; padding: 0px; color: rgb(186, 33, 33); font-style: italic;\">\"\"\"Get the stored query result from the cache.</span>\n<span class=\"sd\" style=\"margin: 0px; padding: 0px; color: rgb(186, 33, 33); font-style: italic;\">        </span>\n<span class=\"sd\" style=\"margin: 0px; padding: 0px; color: rgb(186, 33, 33); font-style: italic;\">        Accessing a node updates its position to the front of the LRU list.</span>\n<span class=\"sd\" style=\"margin: 0px; padding: 0px; color: rgb(186, 33, 33); font-style: italic;\">        \"\"\"</span>\n        <span class=\"n\" style=\"margin: 0px; padding: 0px;\">node</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">lookup</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">[</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">query</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">]</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">if</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">node</span> <span class=\"ow\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;\">is</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">None</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">:</span>\n            <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">return</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">None</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">linked_list</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">move_to_front</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">node</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">return</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">node</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">results</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">set</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">results</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">query</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"sd\" style=\"margin: 0px; padding: 0px; color: rgb(186, 33, 33); font-style: italic;\">\"\"\"Set the result for the given query key in the cache.</span>\n<span class=\"sd\" style=\"margin: 0px; padding: 0px; color: rgb(186, 33, 33); font-style: italic;\">        </span>\n<span class=\"sd\" style=\"margin: 0px; padding: 0px; color: rgb(186, 33, 33); font-style: italic;\">        When updating an entry, updates its position to the front of the LRU list.</span>\n<span class=\"sd\" style=\"margin: 0px; padding: 0px; color: rgb(186, 33, 33); font-style: italic;\">        If the entry is new and the cache is at capacity, removes the oldest entry</span>\n<span class=\"sd\" style=\"margin: 0px; padding: 0px; color: rgb(186, 33, 33); font-style: italic;\">        before the new entry is added.</span>\n<span class=\"sd\" style=\"margin: 0px; padding: 0px; color: rgb(186, 33, 33); font-style: italic;\">        \"\"\"</span>\n        <span class=\"n\" style=\"margin: 0px; padding: 0px;\">node</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">lookup</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">[</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">query</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">]</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">if</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">node</span> <span class=\"ow\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;\">is</span> <span class=\"ow\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;\">not</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">None</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">:</span>\n            <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># Key exists in cache, update the value</span>\n            <span class=\"n\" style=\"margin: 0px; padding: 0px;\">node</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">results</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">results</span>\n            <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">linked_list</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">move_to_front</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">node</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">else</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">:</span>\n            <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># Key does not exist in cache</span>\n            <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">if</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">size</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">==</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">MAX_SIZE</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">:</span>\n                <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># Remove the oldest entry from the linked list and lookup</span>\n                <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">lookup</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">pop</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">linked_list</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">tail</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">query</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">None</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n                <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">linked_list</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">remove_from_tail</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">()</span>\n            <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">else</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">:</span>\n                <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">size</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">+=</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">1</span>\n            <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># Add the new key and value</span>\n            <span class=\"n\" style=\"margin: 0px; padding: 0px;\">new_node</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">Node</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">results</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n            <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">linked_list</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">append_to_front</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">new_node</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n            <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">lookup</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">[</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">query</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">]</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">new_node</span></pre></div></div></div></div></div>"
                    ],
                    "guid": "D?=4Ym_f(]",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h1 style=\"margin-top: 0.538em; margin-bottom: 0px; padding: 0px; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-weight: bold; line-height: 1; color: rgb(0, 0, 0); text-rendering: optimizeLegibility; font-size: 25.998px;\">Design an online chat</h1>",
                        "<div class=\"cell border-box-sizing text_cell rendered\" style=\"margin: 0px; padding: 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;\"><div class=\"inner_cell\" style=\"margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;\"><div class=\"text_cell_render border-box-sizing rendered_html\" style=\"margin: 0px; padding: 0.5em 0.5em 0.5em 0.4em; box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none;\"><h2 style=\"margin: 0.636em 0px 0px; padding: 0px; font-weight: bold; line-height: 1; text-rendering: optimizeLegibility; font-size: 21.994px;\">Constraints and assumptions<a class=\"anchor-link\" href=\"https://render.githubusercontent.com/view/ipynb?commit=dc2b8f7e0ce65a68a7181324576a8b16bf71f66c&amp;enc_url=68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f646f6e6e656d617274696e2f73797374656d2d64657369676e2d7072696d65722f646332623866376530636536356136386137313831333234353736613862313662663731663636632f736f6c7574696f6e732f6f626a6563745f6f7269656e7465645f64657369676e2f6f6e6c696e655f636861742f6f6e6c696e655f636861742e6970796e623f746f6b656e3d41464e4d4e5970664a4f49413830576f68654e6c7252344171616546743971786b733559763472627741253344253344&amp;nwo=donnemartin%2Fsystem-design-primer&amp;path=solutions%2Fobject_oriented_design%2Fonline_chat%2Fonline_chat.ipynb&amp;repository_id=83222441#Constraints-and-assumptions\" style=\"margin: 0px; padding: 0px 20px; color: rgb(0, 136, 204); visibility: hidden;\"></a></h2><ul style=\"margin: 1em 2em 0px; padding: 0px; list-style-position: initial; list-style-image: initial;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Assume we'll focus on the following workflows:<ul style=\"margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Text conversations only</li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Users<ul style=\"margin-right: 2em; margin-left: 2em; padding: 0px; list-style: circle;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Add a user</li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Remove a user</li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Update a user</li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Add to a user's friends list<ul style=\"margin-right: 2em; margin-left: 2em; padding: 0px; list-style: circle;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Add friend request<ul style=\"margin-right: 2em; margin-left: 2em; padding: 0px; list-style: circle;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Approve friend request</li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Reject friend request</li></ul></li></ul></li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Remove from a user's friends list</li></ul></li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Create a group chat<ul style=\"margin-right: 2em; margin-left: 2em; padding: 0px; list-style: circle;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Invite friends to a group chat</li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Post a message to a group chat</li></ul></li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Private 1-1 chat<ul style=\"margin-right: 2em; margin-left: 2em; padding: 0px; list-style: circle;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Invite a friend to a private chat</li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Post a meesage to a private chat</li></ul></li></ul></li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">No need to worry about scaling initially</li></ul></div></div></div><div class=\"cell border-box-sizing text_cell rendered\" style=\"margin: 0px; padding: 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;\"><div class=\"prompt input_prompt\" style=\"margin: 0px; padding: 0.4em; min-width: 11ex; font-family: monospace; text-align: right; line-height: 1.21429em; color: rgb(0, 0, 128); border-top: 1px solid transparent;\"></div><div class=\"inner_cell\" style=\"margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;\"><div class=\"text_cell_render border-box-sizing rendered_html\" style=\"margin: 0px; padding: 0.5em 0.5em 0.5em 0.4em; box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none;\"><h2 style=\"margin: 0.636em 0px 0px; padding: 0px; font-weight: bold; line-height: 1; text-rendering: optimizeLegibility; font-size: 21.994px;\">Solution<a class=\"anchor-link\" href=\"https://render.githubusercontent.com/view/ipynb?commit=dc2b8f7e0ce65a68a7181324576a8b16bf71f66c&amp;enc_url=68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f646f6e6e656d617274696e2f73797374656d2d64657369676e2d7072696d65722f646332623866376530636536356136386137313831333234353736613862313662663731663636632f736f6c7574696f6e732f6f626a6563745f6f7269656e7465645f64657369676e2f6f6e6c696e655f636861742f6f6e6c696e655f636861742e6970796e623f746f6b656e3d41464e4d4e5970664a4f49413830576f68654e6c7252344171616546743971786b733559763472627741253344253344&amp;nwo=donnemartin%2Fsystem-design-primer&amp;path=solutions%2Fobject_oriented_design%2Fonline_chat%2Fonline_chat.ipynb&amp;repository_id=83222441#Solution\" style=\"margin: 0px; padding: 0px 20px; color: rgb(0, 136, 204); visibility: hidden;\"></a></h2></div></div></div><div class=\"cell border-box-sizing code_cell rendered\" style=\"margin: 0px; padding: 5px 5px 5px 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;\"><div class=\"input\" style=\"margin: 0px; padding: 0px; break-inside: avoid; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch;\"><div class=\"prompt input_prompt\" style=\"margin: 0px; padding: 0.4em; min-width: 11ex; font-family: monospace; text-align: right; line-height: 1.21429em; color: rgb(0, 0, 128); border-top: 1px solid transparent;\">In&nbsp;[1]:</div><div class=\"inner_cell\" style=\"margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;\"><div class=\"input_area\" style=\"margin: 0px; padding: 0px; border: 1px solid rgb(207, 207, 207); border-radius: 4px; background: rgb(247, 247, 247); line-height: 1.21429em;\"><div class=\" highlight hl-ipython3\" style=\"margin: 0.4em; padding: 0px; background: transparent; border: none;\"><pre style=\"margin-bottom: 0px; padding: 0px; font-family: monospace; font-size: inherit; color: rgb(51, 51, 51); border-radius: 4px; line-height: inherit; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; background-color: transparent; border: none;\"><span style=\"margin: 0px; padding: 0px;\"></span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">%%</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">writefile</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">online_chat</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">py</span>\n<span class=\"kn\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">from</span> <span class=\"nn\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">abc</span> <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">import</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">ABCMeta</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">UserService</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"nb\" style=\"margin: 0px; padding: 0px; color: green;\">object</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">users_by_id</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"p\" style=\"margin: 0px; padding: 0px;\">{}</span>  <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># key: user id, value: User</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">add_user</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">user_id</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">name</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">pass_hash</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>  <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># ...</span>\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">remove_user</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">user_id</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>  <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># ...</span>\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">add_friend_request</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">from_user_id</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">to_user_id</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>  <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># ...</span>\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">approve_friend_request</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">from_user_id</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">to_user_id</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>  <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># ...</span>\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">reject_friend_request</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">from_user_id</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">to_user_id</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>  <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># ...</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">User</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"nb\" style=\"margin: 0px; padding: 0px; color: green;\">object</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">user_id</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">name</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">pass_hash</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">user_id</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">user_id</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">name</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">name</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">pass_hash</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">pass_hash</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">friends_by_id</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"p\" style=\"margin: 0px; padding: 0px;\">{}</span>  <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># key: friend id, value: User</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">friend_ids_to_private_chats</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"p\" style=\"margin: 0px; padding: 0px;\">{}</span>  <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># key: friend id, value: private chats</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">group_chats_by_id</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"p\" style=\"margin: 0px; padding: 0px;\">{}</span>  <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># key: chat id, value: GroupChat</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">received_friend_requests_by_friend_id</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"p\" style=\"margin: 0px; padding: 0px;\">{}</span>  <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># key: friend id, value: AddRequest</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">sent_friend_requests_by_friend_id</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"p\" style=\"margin: 0px; padding: 0px;\">{}</span>  <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># key: friend id, value: AddRequest</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">message_user</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">friend_id</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">message</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>  <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># ...</span>\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">message_group</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">group_id</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">message</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>  <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># ...</span>\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">send_friend_request</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">friend_id</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>  <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># ...</span>\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">receive_friend_request</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">friend_id</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>  <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># ...</span>\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">approve_friend_request</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">friend_id</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>  <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># ...</span>\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">reject_friend_request</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">friend_id</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>  <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># ...</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">Chat</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">metaclass</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">ABCMeta</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">chat_id</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">chat_id</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">chat_id</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">users</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"p\" style=\"margin: 0px; padding: 0px;\">[]</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">messages</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"p\" style=\"margin: 0px; padding: 0px;\">[]</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">PrivateChat</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">Chat</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">first_user</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">second_user</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"nb\" style=\"margin: 0px; padding: 0px; color: green;\">super</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">PrivateChat</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">()</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">users</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">append</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">first_user</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">users</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">append</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">second_user</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">GroupChat</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">Chat</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">add_user</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">user</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>  <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># ...</span>\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">remove_user</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">user</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>  <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># ... </span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">Message</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"nb\" style=\"margin: 0px; padding: 0px; color: green;\">object</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">message_id</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">message</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">timestamp</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">message_id</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">message_id</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">message</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">message</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">timestamp</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">timestamp</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">AddRequest</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"nb\" style=\"margin: 0px; padding: 0px; color: green;\">object</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">from_user_id</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">to_user_id</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">request_status</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">timestamp</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">from_user_id</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">from_user_id</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">to_user_id</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">to_user_id</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">request_status</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">request_status</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">timestamp</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">timestamp</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">RequestStatus</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">Enum</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"n\" style=\"margin: 0px; padding: 0px;\">UNREAD</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">0</span>\n    <span class=\"n\" style=\"margin: 0px; padding: 0px;\">READ</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">1</span>\n    <span class=\"n\" style=\"margin: 0px; padding: 0px;\">ACCEPTED</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">2</span>\n    <span class=\"n\" style=\"margin: 0px; padding: 0px;\">REJECTED</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">3</span><br></pre></div></div></div></div></div>"
                    ],
                    "guid": "u^Gre~qQM>",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<div class=\"cell border-box-sizing text_cell rendered\" style=\"margin: 0px; padding: 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;\"><div class=\"inner_cell\" style=\"margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;\"><div class=\"text_cell_render border-box-sizing rendered_html\" style=\"margin: 0px; padding: 0.5em 0.5em 0.5em 0.4em; box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none;\"><h1 style=\"margin-top: 0.538em; margin-bottom: 0px; padding: 0px; font-weight: bold; line-height: 1; text-rendering: optimizeLegibility; font-size: 25.998px;\">Design a parking lot<a class=\"anchor-link\" href=\"https://render.githubusercontent.com/view/ipynb?commit=dc2b8f7e0ce65a68a7181324576a8b16bf71f66c&amp;enc_url=68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f646f6e6e656d617274696e2f73797374656d2d64657369676e2d7072696d65722f646332623866376530636536356136386137313831333234353736613862313662663731663636632f736f6c7574696f6e732f6f626a6563745f6f7269656e7465645f64657369676e2f7061726b696e675f6c6f742f7061726b696e675f6c6f742e6970796e623f746f6b656e3d41464e4d4e586a6c4f79316a4757335078536f43477441366f56505a566674636b733559763473777741253344253344&amp;nwo=donnemartin%2Fsystem-design-primer&amp;path=solutions%2Fobject_oriented_design%2Fparking_lot%2Fparking_lot.ipynb&amp;repository_id=83222441#Design-a-parking-lot\" style=\"margin: 0px; padding: 0px 20px; color: rgb(0, 136, 204); visibility: hidden;\"></a></h1></div></div></div><div class=\"cell border-box-sizing text_cell rendered\" style=\"margin: 0px; padding: 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;\"></div>",
                        "<div class=\"cell border-box-sizing text_cell rendered\" style=\"margin: 0px; padding: 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;\"><div class=\"inner_cell\" style=\"margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;\"><div class=\"text_cell_render border-box-sizing rendered_html\" style=\"margin: 0px; padding: 0.5em 0.5em 0.5em 0.4em; box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none;\"><h2 style=\"margin: 0.636em 0px 0px; padding: 0px; font-weight: bold; line-height: 1; text-rendering: optimizeLegibility; font-size: 21.994px;\">Constraints and assumptions<a class=\"anchor-link\" href=\"https://render.githubusercontent.com/view/ipynb?commit=dc2b8f7e0ce65a68a7181324576a8b16bf71f66c&amp;enc_url=68747470733a2f2f7261772e67697468756275736572636f6e74656e742e636f6d2f646f6e6e656d617274696e2f73797374656d2d64657369676e2d7072696d65722f646332623866376530636536356136386137313831333234353736613862313662663731663636632f736f6c7574696f6e732f6f626a6563745f6f7269656e7465645f64657369676e2f7061726b696e675f6c6f742f7061726b696e675f6c6f742e6970796e623f746f6b656e3d41464e4d4e586a6c4f79316a4757335078536f43477441366f56505a566674636b733559763473777741253344253344&amp;nwo=donnemartin%2Fsystem-design-primer&amp;path=solutions%2Fobject_oriented_design%2Fparking_lot%2Fparking_lot.ipynb&amp;repository_id=83222441#Constraints-and-assumptions\" style=\"margin: 0px; padding: 0px 20px; color: rgb(0, 136, 204); visibility: hidden;\"></a></h2><ul style=\"margin: 1em 2em 0px; padding: 0px; list-style-position: initial; list-style-image: initial;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">What types of vehicles should we support?<ul style=\"margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Motorcycle, Car, Bus</li></ul></li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Does each vehicle type take up a different amount of parking spots?<ul style=\"margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Yes</li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Motorcycle spot -&gt; Motorcycle</li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Compact spot -&gt; Motorcycle, Car</li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Large spot -&gt; Motorcycle, Car</li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Bus can park if we have 5 consecutive \"large\" spots</li></ul></li><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Does the parking lot have multiple levels?<ul style=\"margin-right: 2em; margin-left: 2em; padding: 0px; list-style: square;\"><li style=\"margin: 0px; padding: 0px; line-height: 20px;\">Yes</li></ul></li></ul></div></div></div><div class=\"cell border-box-sizing text_cell rendered\" style=\"margin: 0px; padding: 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;\"><div class=\"inner_cell\" style=\"margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;\"><div class=\"text_cell_render border-box-sizing rendered_html\" style=\"margin: 0px; padding: 0.5em 0.5em 0.5em 0.4em; box-sizing: border-box; outline: none; resize: none; width: inherit; border-style: none;\"><h2 style=\"margin: 0.636em 0px 0px; padding: 0px; font-weight: bold; line-height: 1; text-rendering: optimizeLegibility; font-size: 21.994px;\">Solution</h2></div></div></div><div class=\"cell border-box-sizing code_cell rendered\" style=\"margin: 0px; padding: 5px 5px 5px 0px; box-sizing: border-box; border: 1px solid transparent; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; width: 928px; outline: none; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px;\"><div class=\"input\" style=\"margin: 0px; padding: 0px; break-inside: avoid; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: flex; flex-direction: row; align-items: stretch;\"><div class=\"inner_cell\" style=\"margin: 0px; padding: 0px; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: flex; flex-direction: column; align-items: stretch; -webkit-box-flex: 1; flex: 1 1 0%;\"><div class=\"input_area\" style=\"margin: 0px; padding: 0px; border: 1px solid rgb(207, 207, 207); border-radius: 4px; background: rgb(247, 247, 247); line-height: 1.21429em;\"><div class=\" highlight hl-ipython3\" style=\"margin: 0.4em; padding: 0px; background: transparent; border: none;\"><pre style=\"margin-bottom: 0px; padding: 0px; font-family: monospace; font-size: inherit; color: rgb(51, 51, 51); border-radius: 4px; line-height: inherit; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; background-color: transparent; border: none;\"><span style=\"margin: 0px; padding: 0px;\"></span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">%%</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">writefile</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">parking_lot</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">py</span>\n<span class=\"kn\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">from</span> <span class=\"nn\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">abc</span> <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">import</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">ABCMeta</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">abstractmethod</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">VehicleSize</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">Enum</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"n\" style=\"margin: 0px; padding: 0px;\">MOTORCYCLE</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">0</span>\n    <span class=\"n\" style=\"margin: 0px; padding: 0px;\">COMPACT</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">1</span>\n    <span class=\"n\" style=\"margin: 0px; padding: 0px;\">LARGE</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">2</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">Vehicle</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">metaclass</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">ABCMeta</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">vehicle_size</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">license_plate</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">spot_size</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">vehicle_size</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">vehicle_size</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">license_plate</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">license_plate</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">spot_size</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">spots_taken</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"p\" style=\"margin: 0px; padding: 0px;\">[]</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">clear_spots</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">for</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">spot</span> <span class=\"ow\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;\">in</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">spots_taken</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">:</span>\n            <span class=\"n\" style=\"margin: 0px; padding: 0px;\">spot</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">remove_vehicle</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">spots_taken</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"p\" style=\"margin: 0px; padding: 0px;\">[]</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">take_spot</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">spot</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">spots_taken</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">append</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">spot</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n\n    <span class=\"nd\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255);\">@abstractmethod</span>\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">can_fit_in_spot</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">spot</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">pass</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">Motorcycle</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">Vehicle</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">license_plate</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"nb\" style=\"margin: 0px; padding: 0px; color: green;\">super</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">Motorcycle</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">VehicleSize</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">MOTORCYCLE</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">license_plate</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">spot_size</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span><span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">1</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">can_fit_in_spot</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">spot</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">return</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">True</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">Car</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">Vehicle</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">license_plate</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"nb\" style=\"margin: 0px; padding: 0px; color: green;\">super</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">Car</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">VehicleSize</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">COMPACT</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">license_plate</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">spot_size</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span><span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">1</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">can_fit_in_spot</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">spot</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">return</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">True</span> <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">if</span> <span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">spot</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">size</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">==</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">LARGE</span> <span class=\"ow\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;\">or</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">spot</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">size</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">==</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">COMPACT</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span> <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">else</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">False</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">Bus</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">Vehicle</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">license_plate</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"nb\" style=\"margin: 0px; padding: 0px; color: green;\">super</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">Bus</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">VehicleSize</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">LARGE</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">license_plate</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">spot_size</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span><span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">5</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">can_fit_in_spot</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">spot</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">return</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">True</span> <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">if</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">spot</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">size</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">==</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">LARGE</span> <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">else</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">False</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">ParkingLot</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"nb\" style=\"margin: 0px; padding: 0px; color: green;\">object</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">num_levels</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">num_levels</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">num_levels</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">levels</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"p\" style=\"margin: 0px; padding: 0px;\">[]</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">park_vehicle</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">vehicle</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">for</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">level</span> <span class=\"ow\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;\">in</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">levels</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">:</span>\n            <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">if</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">level</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">park_vehicle</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">vehicle</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n                <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">return</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">True</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">return</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">False</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">Level</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"nb\" style=\"margin: 0px; padding: 0px; color: green;\">object</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"n\" style=\"margin: 0px; padding: 0px;\">SPOTS_PER_ROW</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">10</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">floor</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">total_spots</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">floor</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">floor</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">num_spots</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">total_spots</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">available_spots</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">0</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">parking_spots</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"p\" style=\"margin: 0px; padding: 0px;\">[]</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">spot_freed</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">available_spots</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">+=</span> <span class=\"mi\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">1</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">park_vehicle</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">vehicle</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"n\" style=\"margin: 0px; padding: 0px;\">spot</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">_find_available_spot</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">vehicle</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">if</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">spot</span> <span class=\"ow\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;\">is</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">None</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">:</span>\n            <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">return</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">None</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">else</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">:</span>\n            <span class=\"n\" style=\"margin: 0px; padding: 0px;\">spot</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">park_vehicle</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">vehicle</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n            <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">return</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">spot</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">_find_available_spot</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">vehicle</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"sd\" style=\"margin: 0px; padding: 0px; color: rgb(186, 33, 33); font-style: italic;\">\"\"\"Find an available spot where vehicle can fit, or return None\"\"\"</span>\n        <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># ...</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">_park_starting_at_spot</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">spot</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">vehicle</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"sd\" style=\"margin: 0px; padding: 0px; color: rgb(186, 33, 33); font-style: italic;\">\"\"\"Occupy starting at spot.spot_number to vehicle.spot_size.\"\"\"</span>\n        <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># ...</span>\n\n\n<span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">class</span> <span class=\"nc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 255); font-weight: bold;\">ParkingSpot</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"nb\" style=\"margin: 0px; padding: 0px; color: green;\">object</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">__init__</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">level</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">row</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">spot_number</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">spot_size</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">vehicle_size</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">level</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">level</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">row</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">row</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">spot_number</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">spot_number</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">spot_size</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">spot_size</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">vehicle_size</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">vehicle_size</span>\n        <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">vehicle</span> <span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">=</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">None</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">is_available</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">return</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">True</span> <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">if</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">vehicle</span> <span class=\"ow\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;\">is</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">None</span> <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">else</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">False</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">can_fit_vehicle</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">vehicle</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">if</span> <span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">vehicle</span> <span class=\"ow\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;\">is</span> <span class=\"ow\" style=\"margin: 0px; padding: 0px; color: rgb(170, 34, 255); font-weight: bold;\">not</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">None</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">:</span>\n            <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">return</span> <span class=\"kc\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">False</span>\n        <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">return</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">vehicle</span><span class=\"o\" style=\"margin: 0px; padding: 0px; color: rgb(102, 102, 102);\">.</span><span class=\"n\" style=\"margin: 0px; padding: 0px;\">can_fit_in_spot</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">)</span>\n\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">park_vehicle</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">,</span> <span class=\"n\" style=\"margin: 0px; padding: 0px;\">vehicle</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>  <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># ...</span>\n    <span class=\"k\" style=\"margin: 0px; padding: 0px; color: rgb(0, 128, 0); font-weight: bold;\">def</span> <span class=\"nf\" style=\"margin: 0px; padding: 0px; color: blue;\">remove_vehicle</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">(</span><span class=\"bp\" style=\"margin: 0px; padding: 0px; color: green;\">self</span><span class=\"p\" style=\"margin: 0px; padding: 0px;\">):</span>  <span class=\"c1\" style=\"margin: 0px; padding: 0px; color: rgb(64, 128, 128); font-style: italic;\"># ...</span></pre></div></div></div></div></div>"
                    ],
                    "guid": "J?kGyIhwrB",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                }
            ]
        },
        {
            "__type__": "Deck",
            "children": [],
            "crowdanki_uuid": "93723725-caa9-11ec-b620-0c96e6db14fa",
            "deck_config_uuid": "93723726-caa9-11ec-97f8-0c96e6db14fa",
            "desc": "",
            "dyn": 0,
            "extendNew": 0,
            "extendRev": 0,
            "media_files": [],
            "name": "System Design",
            "notes": [
                {
                    "__type__": "Note",
                    "fields": [
                        "<h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Performance vs scalability</h2>",
                        "<p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">A service is&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">scalable</span>&nbsp;if it results in increased&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">performance</span>&nbsp;in a manner proportional to resources added. Generally, increasing performance means serving more units of work, but it can also be to handle larger units of work, such as when datasets grow.<span style=\"box-sizing: border-box; font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em;\"><a href=\"http://www.allthingsdistributed.com/2006/03/a_word_on_scalability.html\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">1</a></span></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Another way to look at performance vs scalability:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">If you have a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">performance</span>&nbsp;problem, your system is slow for a single user.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">If you have a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">scalability</span>&nbsp;problem, your system is fast for a single user but slow under heavy load.</li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-sources-and-further-reading-1\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#sources-and-further-reading-1\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source(s) and further reading</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"http://www.allthingsdistributed.com/2006/03/a_word_on_scalability.html\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">A word on scalability</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://www.slideshare.net/jboner/scalability-availability-stability-patterns/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Scalability, availability, stability, patterns</a></li></ul>"
                    ],
                    "guid": "J>5[0zxcsg",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Latency vs throughput</h2>",
                        "<p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Latency</span>&nbsp;is the time to perform some action or to produce some result.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Throughput</span>&nbsp;is the number of such actions or results per unit of time.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Generally, you should aim for&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">maximal throughput</span>&nbsp;with&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">acceptable latency</span>.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-sources-and-further-reading-2\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#sources-and-further-reading-2\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source(s) and further reading</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://community.cadence.com/cadence_blogs_8/b/sd/archive/2010/09/13/understanding-latency-vs-throughput\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Understanding latency vs throughput</a></li></ul>"
                    ],
                    "guid": "sS%`D;t{&m",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Consistency patterns</h2>",
                        "<p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">With multiple copies of the same data, we are faced with options on how to synchronize them so clients have a consistent view of the data. Recall the definition of consistency from the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer#cap-theorem\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">CAP theorem</a>&nbsp;- Every read receives the most recent write or an error.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-weak-consistency\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#weak-consistency\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Weak consistency</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">After a write, reads may or may not see it. A best effort approach is taken.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">This approach is seen in systems such as memcached. Weak consistency works well in real time use cases such as VoIP, video chat, and realtime multiplayer games. For example, if you are on a phone call and lose reception for a few seconds, when you regain connection you do not hear what was spoken during connection loss.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-eventual-consistency\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#eventual-consistency\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Eventual consistency</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">After a write, reads will eventually see it (typically within milliseconds). Data is replicated asynchronously.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">This approach is seen in systems such as DNS and email. Eventual consistency works well in highly available systems.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-strong-consistency\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#strong-consistency\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Strong consistency</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">After a write, reads will see it. Data is replicated synchronously.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">This approach is seen in file systems and RDBMSes. Strong consistency works well in systems that need transactions.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-sources-and-further-reading-4\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#sources-and-further-reading-4\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source(s) and further reading</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"http://snarfed.org/transactions_across_datacenters_io.html\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Transactions across data centers</a></li></ul>"
                    ],
                    "guid": "oAUiB0d-GB",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Availability patterns</h2>",
                        "<p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">There are two main patterns to support high availability:&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">fail-over</span>&nbsp;and&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">replication</span>.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-fail-over\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#fail-over\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Fail-over</h3><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-active-passive\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#active-passive\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Active-passive</h4><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">With active-passive fail-over, heartbeats are sent between the active and the passive server on standby. If the heartbeat is interrupted, the passive server takes over the active's IP address and resumes service.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">The length of downtime is determined by whether the passive server is already running in 'hot' standy or whether it needs to start up from 'cold' standby. Only the active server handles traffic.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Active-passive failover can also be referred to as master-slave failover.</p><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-active-active\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#active-active\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Active-active</h4><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">In active-active, both servers are managing traffic, spreading the load between them.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">If the servers are public-facing, the DNS would need to know about the public IPs of both servers. If the servers are internal-facing, application logic would need to know about both servers.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Active-active failover can also be referred to as master-master failover.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-disadvantages-failover\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#disadvantages-failover\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disadvantage(s): failover</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Fail-over adds more hardware and additional complexity.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">There is a potential for loss of data if the active system fails before any newly written data can be replicated to the passive.</li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-replication\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#replication\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Replication</h3><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Master-slave replication</h4><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-master-slave-and-master-master\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#master-slave-and-master-master\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><p style=\"box-sizing: border-box; margin-bottom: 16px; font-weight: normal;\">The master serves reads and writes, replicating writes to one or more slaves, which serve only reads. Slaves can also replicate to additional slaves in a tree-like fashion. If the master goes offline, the system can continue to operate in read-only mode until a slave is promoted to a master or a new master is provisioned.</p><p align=\"center\" style=\"box-sizing: border-box; margin-bottom: 16px; font-weight: normal;\"><a href=\"https://camo.githubusercontent.com/6a097809b9690236258747d969b1d3e0d93bb8ca/687474703a2f2f692e696d6775722e636f6d2f4339696f47746e2e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/6a097809b9690236258747d969b1d3e0d93bb8ca/687474703a2f2f692e696d6775722e636f6d2f4339696f47746e2e706e67\" data-canonical-src=\"http://i.imgur.com/C9ioGtn.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a><br style=\"box-sizing: border-box;\"><i style=\"box-sizing: border-box;\"><a href=\"http://www.slideshare.net/jboner/scalability-availability-stability-patterns/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Source: Scalability, availability, stability, patterns</a></i></p></h4><h5 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-disadvantages-master-slave-replication\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#disadvantages-master-slave-replication\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disadvantage(s): master-slave replication</h5><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; font-weight: normal;\"><li style=\"box-sizing: border-box;\">Additional logic is needed to promote a slave to a master.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">See&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer#disadvantages-replication\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Disadvantage(s): replication</a>&nbsp;for points related to&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">both</span>&nbsp;master-slave and master-master.</li></ul></h4><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-master-master-replication\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#master-master-replication\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Master-master replication</h4><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><p style=\"box-sizing: border-box; margin-bottom: 16px; font-weight: normal;\">Both masters serve reads and writes and coordinate with each other on writes. If either master goes down, the system can continue to operate with both reads and writes.</p><p align=\"center\" style=\"box-sizing: border-box; margin-bottom: 16px; font-weight: normal;\"><a href=\"https://camo.githubusercontent.com/5862604b102ee97d85f86f89edda44bde85a5b7f/687474703a2f2f692e696d6775722e636f6d2f6b7241484c47672e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/5862604b102ee97d85f86f89edda44bde85a5b7f/687474703a2f2f692e696d6775722e636f6d2f6b7241484c47672e706e67\" data-canonical-src=\"http://i.imgur.com/krAHLGg.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a><br style=\"box-sizing: border-box;\"><i style=\"box-sizing: border-box;\"><a href=\"http://www.slideshare.net/jboner/scalability-availability-stability-patterns/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Source: Scalability, availability, stability, patterns</a></i></p></h4><h5 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-disadvantages-master-master-replication\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#disadvantages-master-master-replication\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disadvantage(s): master-master replication</h5><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; font-weight: normal;\"><li style=\"box-sizing: border-box;\">You'll need a load balancer or you'll need to make changes to your application logic to determine where to write.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Most master-master systems are either loosely consistent (violating ACID) or have increased write latency due to synchronization.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Conflict resolution comes more into play as more write nodes are added and as latency increases.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">See&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer#disadvantages-replication\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Disadvantage(s): replication</a>&nbsp;for points related to&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">both</span>&nbsp;master-slave and master-master.</li></ul></h4><h5 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-disadvantages-replication\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#disadvantages-replication\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disadvantage(s): replication</h5><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; font-weight: normal;\"><li style=\"box-sizing: border-box;\">There is a potential for loss of data if the master fails before any newly written data can be replicated to other nodes.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Writes are replayed to the read replicas. If there are a lot of writes, the read replicas can get bogged down with replaying writes and can't do as many reads.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The more read slaves, the more you have to replicate, which leads to greater replication lag.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">On some systems, writing to the master can spawn multiple threads to write in parallel, whereas read replicas only support writing sequentially with a single thread.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Replication adds more hardware and additional complexity.</li></ul></h4><h5 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-sources-and-further-reading-replication\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#sources-and-further-reading-replication\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source(s) and further reading: replication</h5><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; font-weight: normal;\"><li style=\"box-sizing: border-box;\"><a href=\"http://www.slideshare.net/jboner/scalability-availability-stability-patterns/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Scalability, availability, stability, patterns</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://en.wikipedia.org/wiki/Multi-master_replication\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Multi-master replication</a></li></ul></h4>"
                    ],
                    "guid": "u$1(&V?$FE",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Availability vs consistency</h2>",
                        "<h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">CAP theorem</h3><p align=\"center\" style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/13719354da7dcd34cd79ff5f8b6306a67bc18261/687474703a2f2f692e696d6775722e636f6d2f62674c4d4932752e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/13719354da7dcd34cd79ff5f8b6306a67bc18261/687474703a2f2f692e696d6775722e636f6d2f62674c4d4932752e706e67\" data-canonical-src=\"http://i.imgur.com/bgLMI2u.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a>&nbsp;<br style=\"box-sizing: border-box;\"><i style=\"box-sizing: border-box;\"><a href=\"http://robertgreiner.com/2014/08/cap-theorem-revisited\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Source: CAP theorem revisited</a></i></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">In a distributed computer system, you can only support two of the following guarantees:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Consistency</span>&nbsp;- Every read receives the most recent write or an error</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Availability</span>&nbsp;- Every request receives a response, without guarantee that it contains the most recent version of the information</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Partition Tolerance</span>&nbsp;- The system continues to operate despite arbitrary partitioning due to network failures</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><em style=\"box-sizing: border-box;\">Networks aren't reliable, so you'll need to support partition tolerance. You'll need to make a software tradeoff between consistency and availability.</em></p><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-cp---consistency-and-partition-tolerance\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#cp---consistency-and-partition-tolerance\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CP - consistency and partition tolerance</h4><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Waiting for a response from the partitioned node might result in a timeout error. CP is a good choice if your business needs require atomic reads and writes.</p><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-ap---availability-and-partition-tolerance\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#ap---availability-and-partition-tolerance\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AP - availability and partition tolerance</h4><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Responses return the most recent version of the data, which might not be the latest. Writes might take some time to propagate when the partition is resolved.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">AP is a good choice if the business needs allow for&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer#eventual-consistency\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">eventual consistency</a>&nbsp;or when the system needs to continue working despite external errors.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-sources-and-further-reading-3\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#sources-and-further-reading-3\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source(s) and further reading</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"http://robertgreiner.com/2014/08/cap-theorem-revisited/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">CAP theorem revisited</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://ksat.me/a-plain-english-introduction-to-cap-theorem/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">A plain english introduction to CAP theorem</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/henryr/cap-faq\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">CAP FAQ</a></li></ul>"
                    ],
                    "guid": "tRdWGVxAGV",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Domain name system</h2>",
                        "<p align=\"center\" style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/fae27d1291ed38dd120595d692eacd2505cd3a9c/687474703a2f2f692e696d6775722e636f6d2f494f794c6a34692e6a7067\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/fae27d1291ed38dd120595d692eacd2505cd3a9c/687474703a2f2f692e696d6775722e636f6d2f494f794c6a34692e6a7067\" data-canonical-src=\"http://i.imgur.com/IOyLj4i.jpg\" style=\"box-sizing: content-box; max-width: 100%;\"></a>&nbsp;<br style=\"box-sizing: border-box;\"><i style=\"box-sizing: border-box;\"><a href=\"http://www.slideshare.net/srikrupa5/dns-security-presentation-issa\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Source: DNS security presentation</a></i></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">A Domain Name System (DNS) translates a domain name such as&nbsp;<a href=\"http://www.example.com/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">www.example.com</a>&nbsp;to an IP address.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">DNS is hierarchical, with a few authoritative servers at the top level. Your router or ISP provides information about which DNS server(s) to contact when doing a lookup. Lower level DNS servers cache mappings, which could become stale due to DNS propagation delays. DNS results can also be cached by your browser or OS for a certain period of time, determined by the&nbsp;<a href=\"https://en.wikipedia.org/wiki/Time_to_live\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">time to live (TTL)</a>.</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><span style=\"box-sizing: border-box; font-weight: 600;\">NS record (name server)</span>&nbsp;- Specifies the DNS servers for your domain/subdomain.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">MX record (mail exchange)</span>&nbsp;- Specifies the mail servers for accepting messages.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">A record (address)</span>&nbsp;- Points a name to an IP address.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">CNAME (canonical)</span>&nbsp;- Points a name to another name or&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">CNAME</code>&nbsp;(example.com to&nbsp;<a href=\"http://www.example.com/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">www.example.com</a>) or to an&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">A</code>record.</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Services such as&nbsp;<a href=\"https://www.cloudflare.com/dns/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">CloudFlare</a>&nbsp;and&nbsp;<a href=\"https://aws.amazon.com/route53/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Route 53</a>&nbsp;provide managed DNS services. Some DNS services can route traffic through various methods:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"http://g33kinfo.com/info/archives/2657\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Weighted round robin</a><ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Prevent traffic from going to servers under maintenance</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Balance between varying cluster sizes</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">A/B testing</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Latency-based</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Geolocation-based</li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-disadvantages-dns\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#disadvantages-dns\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disadvantage(s): DNS</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Accessing a DNS server introduces a slight delay, although mitigated by caching described above.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">DNS server management could be complex, although they are generally managed by&nbsp;<a href=\"http://superuser.com/questions/472695/who-controls-the-dns-servers/472729\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">governments, ISPs, and large companies</a>.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">DNS services have recently come under DDoS attack, preventing users from accessing websites such as Twitter without knowing Twitter's IP address(es).</li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-sources-and-further-reading-5\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#sources-and-further-reading-5\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source(s) and further reading</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://technet.microsoft.com/en-us/library/dd197427(v=ws.10).aspx\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">DNS architecture</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://en.wikipedia.org/wiki/Domain_Name_System\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Wikipedia</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://support.dnsimple.com/categories/dns/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">DNS articles</a></li></ul>"
                    ],
                    "guid": "wIHm|i.`Q2",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Content delivery network</h2>",
                        "<p align=\"center\" style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/853a8603651149c686bf3c504769fc594ff08849/687474703a2f2f692e696d6775722e636f6d2f683954417547492e6a7067\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/853a8603651149c686bf3c504769fc594ff08849/687474703a2f2f692e696d6775722e636f6d2f683954417547492e6a7067\" data-canonical-src=\"http://i.imgur.com/h9TAuGI.jpg\" style=\"box-sizing: content-box; max-width: 100%;\"></a><br style=\"box-sizing: border-box;\"><i style=\"box-sizing: border-box;\"><a href=\"https://www.creative-artworks.eu/why-use-a-content-delivery-network-cdn/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Source: Why use a CDN</a></i></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">A content delivery network (CDN) is a globally distributed network of proxy servers, serving content from locations closer to the user. Generally, static files such as HTML/CSS/JSS, photos, and videos are served from CDN, although some CDNs such as Amazon's CloudFront support dynamic content. The site's DNS resolution will tell clients which server to contact.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Serving content from CDNs can significantly improve performance in two ways:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Users receive content at data centers close to them</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Your servers do not have to serve requests that the CDN fulfills</li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-push-cdns\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#push-cdns\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Push CDNs</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Push CDNs receive new content whenever changes occur on your server. You take full responsibility for providing content, uploading directly to the CDN and rewriting URLs to point to the CDN. You can configure when content expires and when it is updated. Content is uploaded only when it is new or changed, minimizing traffic, but maximizing storage.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Sites with a small amount of traffic or sites with content that isn't often updated work well with push CDNs. Content is placed on the CDNs once, instead of being re-pulled at regular intervals.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-pull-cdns\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#pull-cdns\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Pull CDNs</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Pull CDNs grab new content from your server when the first user requests the content. You leave the content on your server and rewrite URLs to point to the CDN. This results in a slower request until the content is cached on the server.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">A&nbsp;<a href=\"https://en.wikipedia.org/wiki/Time_to_live\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">time-to-live (TTL)</a>&nbsp;determines how long content is cached. Pull CDNs minimize storage space on the CDN, but can create redundant traffic if files expire and are pulled before they have actually changed.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Sites with heavy traffic work well with pull CDNs, as traffic is spread out more evenly with only recently-requested content remaining on the CDN.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-disadvantages-cdn\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#disadvantages-cdn\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disadvantage(s): CDN</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">CDN costs could be significant depending on traffic, although this should be weighed with additional costs you would incur not using a CDN.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Content might be stale if it is updated before the TTL expires it.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">CDNs require changing URLs for static content to point to the CDN.</li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-sources-and-further-reading-6\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#sources-and-further-reading-6\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source(s) and further reading</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"http://repository.cmu.edu/cgi/viewcontent.cgi?article=2112&amp;context=compsci\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Globally distributed content delivery</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://www.travelblogadvice.com/technical/the-differences-between-push-and-pull-cdns/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">The differences between push and pull CDNs</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://en.wikipedia.org/wiki/Content_delivery_network\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Wikipedia</a></li></ul>"
                    ],
                    "guid": "l:u[[-FZeq",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Load balancer</h2>",
                        "<p align=\"center\" style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/21caea3d7f67f451630012f657ae59a56709365c/687474703a2f2f692e696d6775722e636f6d2f6838316e39694b2e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/21caea3d7f67f451630012f657ae59a56709365c/687474703a2f2f692e696d6775722e636f6d2f6838316e39694b2e706e67\" data-canonical-src=\"http://i.imgur.com/h81n9iK.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a><br style=\"box-sizing: border-box;\"><i style=\"box-sizing: border-box;\"><a href=\"http://horicky.blogspot.com/2010/10/scalable-system-design-patterns.html\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Source: Scalable system design patterns</a></i></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Load balancers distribute incoming client requests to computing resources such as application servers and databases. In each case, the load balancer returns the response from the computing resource to the appropriate client. Load balancers are effective at:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Preventing requests from going to unhealthy servers</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Preventing overloading resources</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Helping eliminate single points of failure</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Load balancers can be implemented with hardware (expensive) or with software such as HAProxy.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Additional benefits include:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><span style=\"box-sizing: border-box; font-weight: 600;\">SSL termination</span>&nbsp;- Decrypt incoming requests and encrypt server responses so backend servers do not have to perform these potentially expensive operations<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Removes the need to install&nbsp;<a href=\"https://en.wikipedia.org/wiki/X.509\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">X.509 certificates</a>&nbsp;on each server</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Session persistence</span>&nbsp;- Issue cookies and route a specific client's requests to same instance if the web apps do not keep track of sessions</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">To protect against failures, it's common to set up multiple load balancers, either in&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer#active-passive\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">active-passive</a>&nbsp;or&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer#active-active\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">active-active</a>&nbsp;mode.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Load balancers can route traffic based on various metrics, including:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Random</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Least loaded</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Seesion/cookies</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://g33kinfo.com/info/archives/2657\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Round robin or weighted round robin</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer#layer-4-load-balancing\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Layer 4</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer#layer-7-load-balancing\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Layer 7</a></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-layer-4-load-balancing\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#layer-4-load-balancing\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Layer 4 load balancing</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Layer 4 load balancers look at info at the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer#communication\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">transport layer</a>&nbsp;to decide how to distribute requests. Generally, this involves the source, destination IP addresses, and ports in the header, but not the contents of the packet. Layer 4 load balancers forward network packets to and from the upstream server, performing&nbsp;<a href=\"https://www.nginx.com/resources/glossary/layer-4-load-balancing/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Network Address Translation (NAT)</a>.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-layer-7-load-balancing\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#layer-7-load-balancing\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>layer 7 load balancing</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Layer 7 load balancers look at the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer#communication\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">application layer</a>&nbsp;to decide how to distribute requests. This can involve contents of the header, message, and cookies. Layer 7 load balancers terminates network traffic, reads the message, makes a load-balancing decision, then opens a connection to the selected server. For example, a layer 7 load balancer can direct video traffic to servers that host videos while directing more sensitive user billing traffic to security-hardened servers.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">At the cost of flexibility, layer 4 load balancing requires less time and computing resources than Layer 7, although the performance impact can be minimal on modern commodity hardware.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-horizontal-scaling\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#horizontal-scaling\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Horizontal scaling</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Load balancers can also help with horizontal scaling, improving performance and availability. Scaling out using commodity machines is more cost efficient and results in higher availability than scaling up a single server on more expensive hardware, called&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Vertical Scaling</span>. It is also easier to hire for talent working on commodity hardware than it is for specialized enterprise systems.</p><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-disadvantages-horizontal-scaling\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#disadvantages-horizontal-scaling\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disadvantage(s): horizontal scaling</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Scaling horizontally introduces complexity and involves cloning servers<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Servers should be stateless: they should not contain any user-related data like sessions or profile pictures</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Sessions can be stored in a centralized data store such as a&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer#database\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">database</a>&nbsp;(SQL, NoSQL) or a persistent&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer#cache\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">cache</a>&nbsp;(Redis, Memcached)</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Downstream servers such as caches and databases need to handle more simultaneous connections as upstream servers scale out</li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-disadvantages-load-balancer\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#disadvantages-load-balancer\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disadvantage(s): load balancer</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">The load balancer can become a performance bottleneck if it does not have enough resources or if it is not configured properly.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Introducing a load balancer to help eliminate single points of failure results in increased complexity.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">A single load balancer is a single point of failure, configuring multiple load balancers further increases complexity.</li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-sources-and-further-reading-7\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#sources-and-further-reading-7\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source(s) and further reading</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://www.nginx.com/blog/inside-nginx-how-we-designed-for-performance-scale/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">NGINX architecture</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://www.haproxy.org/download/1.2/doc/architecture.txt\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">HAProxy architecture guide</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://www.lecloud.net/post/7295452622/scalability-for-dummies-part-1-clones\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Scalability</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://en.wikipedia.org/wiki/Load_balancing_(computing)\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Wikipedia</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://www.nginx.com/resources/glossary/layer-4-load-balancing/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Layer 4 load balancing</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://www.nginx.com/resources/glossary/layer-7-load-balancing/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Layer 7 load balancing</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://docs.aws.amazon.com/elasticloadbalancing/latest/classic/elb-listener-config.html\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">ELB listener config</a></li></ul>"
                    ],
                    "guid": "wBYTsp^efr",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Reverse proxy (web server)</h2>",
                        "<p align=\"center\" style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/a66e9f885b04db69638825c6a98f42e5570a83f3/687474703a2f2f692e696d6775722e636f6d2f7037784853345a2e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/a66e9f885b04db69638825c6a98f42e5570a83f3/687474703a2f2f692e696d6775722e636f6d2f7037784853345a2e706e67\" data-canonical-src=\"http://i.imgur.com/p7xHS4Z.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a><br style=\"box-sizing: border-box;\"><i style=\"box-sizing: border-box;\"><a href=\"https://commons.wikimedia.org/wiki/File:Proxy_concept_en.svg\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Source: Wikipedia</a></i>&nbsp;<br style=\"box-sizing: border-box;\"></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">A reverse proxy is a web server that centralizes internal services and provides unified interfaces to the public. Requests from clients are forwarded to a server that can fulfill it before the reverse proxy returns the server's response to the client.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Additional benefits include:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Increased security</span>&nbsp;- Hide information about backend servers, blacklist IPs, limit number of connections per client</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Increased scalability and flexibility</span>&nbsp;- Clients only see the reverse proxy's IP, allowing you to scale servers or change their configuration</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">SSL termination</span>&nbsp;- Decrypt incoming requests and encrypt server responses so backend servers do not have to perform these potentially expensive operations<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Removes the need to install&nbsp;<a href=\"https://en.wikipedia.org/wiki/X.509\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">X.509 certificates</a>&nbsp;on each server</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Compression</span>&nbsp;- Compress server responses</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Caching</span>&nbsp;- Return the response for cached requests</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Static content</span>&nbsp;- Serve static content directly<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">HTML/CSS/JS</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Photos</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Videos</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Etc</li></ul></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-load-balancer-vs-reverse-proxy\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#load-balancer-vs-reverse-proxy\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Load balancer vs reverse proxy</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Deploying a load balancer is useful when you have multiple servers. Often, load balancers route traffic to a set of servers serving the same function.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Reverse proxies can be useful even with just one web server or application server, opening up the benefits described in the previous section.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Solutions such as NGINX and HAProxy can support both layer 7 reverse proxying and load balancing.</li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-disadvantages-reverse-proxy\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#disadvantages-reverse-proxy\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disadvantage(s): reverse proxy</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Introducing a reverse proxy results in increased complexity.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">A single reverse proxy is a single point of failure, configuring multiple reverse proxies (ie a&nbsp;<a href=\"https://en.wikipedia.org/wiki/Failover\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">failover</a>) further increases complexity.</li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-sources-and-further-reading-8\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#sources-and-further-reading-8\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source(s) and further reading</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://www.nginx.com/resources/glossary/reverse-proxy-vs-load-balancer/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Reverse proxy vs load balancer</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://www.nginx.com/blog/inside-nginx-how-we-designed-for-performance-scale/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">NGINX architecture</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://www.haproxy.org/download/1.2/doc/architecture.txt\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">HAProxy architecture guide</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://en.wikipedia.org/wiki/Reverse_proxy\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Wikipedia</a></li></ul>"
                    ],
                    "guid": "J$Dh[fWI?~",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Application layer</h2>",
                        "<p align=\"center\" style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/feeb549c5b6e94f65c613635f7166dc26e0c7de7/687474703a2f2f692e696d6775722e636f6d2f7942355359776d2e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/feeb549c5b6e94f65c613635f7166dc26e0c7de7/687474703a2f2f692e696d6775722e636f6d2f7942355359776d2e706e67\" data-canonical-src=\"http://i.imgur.com/yB5SYwm.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a><br style=\"box-sizing: border-box;\"><i style=\"box-sizing: border-box;\"><a href=\"http://lethain.com/introduction-to-architecting-systems-for-scale/#platform_layer\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Source: Intro to architecting systems for scale</a></i></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Separating out the web layer from the application layer (also known as platform layer) allows you to scale and configure both layers independently. Adding a new API results in adding application servers without necessarily adding additional web servers.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">single responsibility principle</span>&nbsp;advocates for small and autonomous services that work together. Small teams with small services can plan more aggressively for rapid growth.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Workers in the application layer also help enable&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer#asynchronism\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">asynchronism</a>.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-microservices\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#microservices\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Microservices</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Related to this discussion are&nbsp;<a href=\"https://en.wikipedia.org/wiki/Microservices\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">microservices</a>, which can be described as a suite of independently deployable, small, modular services. Each service runs a unique process and communicates through a well-definied, lightweight mechanism to serve a business goal.&nbsp;<span style=\"box-sizing: border-box; font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em;\"><a href=\"https://smartbear.com/learn/api-design/what-are-microservices\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">1</a></span></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Pinterest, for example, could have the following microservices: user profile, follower, feed, search, photo upload, etc.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-service-discovery\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#service-discovery\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Service Discovery</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Systems such as&nbsp;<a href=\"http://www.slideshare.net/sauravhaloi/introduction-to-apache-zookeeper\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Zookeeper</a>&nbsp;can help services find each other by keeping track of registered names, addresses, ports, etc.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-disadvantages-application-layer\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#disadvantages-application-layer\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disadvantage(s): application layer</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Adding an application layer with loosely coupled services requires a different approach from an architectural, operations, and process viewpoint (vs a monolithic system).</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Microservices can add complexity in terms of deployments and operations.</li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-sources-and-further-reading-9\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#sources-and-further-reading-9\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source(s) and further reading</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"http://lethain.com/introduction-to-architecting-systems-for-scale\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Intro to architecting systems for scale</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://www.puncsky.com/blog/2016/02/14/crack-the-system-design-interview/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Crack the system design interview</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://en.wikipedia.org/wiki/Service-oriented_architecture\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Service oriented architecture</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://www.slideshare.net/sauravhaloi/introduction-to-apache-zookeeper\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Introduction to Zookeeper</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://cloudncode.wordpress.com/2016/07/22/msa-getting-started/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Here's what you need to know about building microservices</a></li></ul>"
                    ],
                    "guid": "n*=M)3M#es",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Database</h2>",
                        "<h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Database</h2><p align=\"center\" style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/15a7553727e6da98d0de5e9ca3792f6d2b5e92d4/687474703a2f2f692e696d6775722e636f6d2f586b6d3543587a2e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/15a7553727e6da98d0de5e9ca3792f6d2b5e92d4/687474703a2f2f692e696d6775722e636f6d2f586b6d3543587a2e706e67\" data-canonical-src=\"http://i.imgur.com/Xkm5CXz.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a><br style=\"box-sizing: border-box;\"><i style=\"box-sizing: border-box;\"><a href=\"https://www.youtube.com/watch?v=vg5onp8TU6Q\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Source: Scaling up to your first 10 million users</a></i></p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-relational-database-management-system-rdbms\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#relational-database-management-system-rdbms\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Relational database management system (RDBMS)</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">A relational database like SQL is a collection of data items organized in tables.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">ACID</span>&nbsp;is a set of properties of relational database&nbsp;<a href=\"https://en.wikipedia.org/wiki/Database_transaction\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">transactions</a>.</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Atomicity</span>&nbsp;- Each transaction is all or nothing</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Consistency</span>&nbsp;- Any tranaction will bring the database from one valid state to another</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Isolation</span>&nbsp;- Excuting transactions concurrently has the same results as if the transactions were executed serially</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Durability</span>&nbsp;- Once a transaction has been committed, it will remain so</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">There are many techniques to scale a relational database:&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">master-slave replication</span>,&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">master-master replication</span>,&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">federation</span>,&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">sharding</span>,&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">denormalization</span>, and&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">SQL tuning</span>.</p>"
                    ],
                    "guid": "b#G#w?V1C0",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Federation</h4>",
                        "<p align=\"center\" style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/6eb6570a8b6b4e1d52e3d7cc07e7959ea5dac75f/687474703a2f2f692e696d6775722e636f6d2f553371563333652e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/6eb6570a8b6b4e1d52e3d7cc07e7959ea5dac75f/687474703a2f2f692e696d6775722e636f6d2f553371563333652e706e67\" data-canonical-src=\"http://i.imgur.com/U3qV33e.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a>&nbsp;<br style=\"box-sizing: border-box;\"><i style=\"box-sizing: border-box;\"><a href=\"https://www.youtube.com/watch?v=vg5onp8TU6Q\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Source: Scaling up to your first 10 million users</a></i></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Federation (or functional partitioning) splits up databases by function. For example, instead of a single, monolithic database, you could have three databases:&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">forums</span>,&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">users</span>, and&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">products</span>, resulting in less read and write traffic to each database and therefore less replication lag. Smaller databases result in more data that can fit in memory, which in turn results in more cache hits due to improved cache locality. With no single central master serializing writes you can write in parallel, increasing throughput.</p><h5 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-disadvantages-federation\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#disadvantages-federation\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disadvantage(s): federation</h5><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Federation is not effective if your schema requires huge functions or tables.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">You'll need to update your application logic to determine which database to read and write.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Joining data from two databases is more complex with a&nbsp;<a href=\"http://stackoverflow.com/questions/5145637/querying-data-by-joining-two-tables-in-two-database-on-different-servers\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">server link</a>.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Federation adds more hardware and additional complexity.</li></ul><h5 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-sources-and-further-reading-federation\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#sources-and-further-reading-federation\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source(s) and further reading: federation</h5><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://www.youtube.com/watch?v=vg5onp8TU6Q\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Scaling up to your first 10 million users</a></li></ul>"
                    ],
                    "guid": "Rax*|ie-ZJ",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Sharding</h4>",
                        "<p align=\"center\" style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/1df78be67b749171569a0e11a51aa76b3b678d4f/687474703a2f2f692e696d6775722e636f6d2f775538783549642e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/1df78be67b749171569a0e11a51aa76b3b678d4f/687474703a2f2f692e696d6775722e636f6d2f775538783549642e706e67\" data-canonical-src=\"http://i.imgur.com/wU8x5Id.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a>&nbsp;<br style=\"box-sizing: border-box;\"><i style=\"box-sizing: border-box;\"><a href=\"http://www.slideshare.net/jboner/scalability-availability-stability-patterns/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Source: Scalability, availability, stability, patterns</a></i></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Sharding distributes data across different databases such that each database can only manage a subset of the data. Taking a users database as an example, as the number of users increases, more shards are added to the cluster.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Similar to the advantages of&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer#federation\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">federation</a>, sharding results in less read and write traffic, less replication, and more cache hits. Index size is also reduced, which generally improves performance with faster queries. If one shard goes down, the other shards are still operational, although you'll want to add some form of replication to avoid data loss. Like federation, there is no single central master serializing writes, allowing you to write in parallel with increased throughput.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Common ways to shard a table of users is either through the user's last name initial or the user's geographic location.</p><h5 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-disadvantages-sharding\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#disadvantages-sharding\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disadvantage(s): sharding</h5><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">You'll need to update your application logic to work with shards, which could result in complex SQL queries.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Data distribution can become lobsided in a shard. For example, a set of power users on a shard could result in increased load to that shard compared to others.<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Rebalancing adds additional complexity. A sharding function based on&nbsp;<a href=\"http://www.paperplanes.de/2011/12/9/the-magic-of-consistent-hashing.html\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">consistent hashing</a>&nbsp;can reduce the amount of transferred data.</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Joining data from multiple shards is more complex.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Sharding adds more hardware and additional complexity.</li></ul><h5 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-sources-and-further-reading-sharding\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#sources-and-further-reading-sharding\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source(s) and further reading: sharding</h5><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"http://highscalability.com/blog/2009/8/6/an-unorthodox-approach-to-database-design-the-coming-of-the.html\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">The coming of the shard</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://en.wikipedia.org/wiki/Shard_(database_architecture)\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Shard database architecture</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://www.paperplanes.de/2011/12/9/the-magic-of-consistent-hashing.html\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Consistent hashing</a></li></ul>"
                    ],
                    "guid": "ssKV{C=vS/",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Denormalization</h4>",
                        "<p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Denormalization attemps to improve read performance at the expense of some write performance. Redundant copies of the data are written in multiple tables to avoid expensive joins. Some RDBMS such as&nbsp;<a href=\"https://en.wikipedia.org/wiki/PostgreSQL\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">PostgreSQL</a>&nbsp;and Oracle support&nbsp;<a href=\"https://en.wikipedia.org/wiki/Materialized_view\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">materialized views</a>&nbsp;which handle the work of storing redudant information and keeping redundant copies consistent.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Once data becomes distributed with techniques such as&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer#federation\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">federation</a>&nbsp;and&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer#sharding\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">sharding</a>, managing joins across data centers further increases complexity. Denormalization might circumvent the need for such complex joins.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">In most systems, reads can heavily number writes 100:1 or even 1000:1. A read resulting in a complex database join can be very expensive, spending a significant amount of time on disk operations.</p><h5 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-disadvantages-denormalization\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#disadvantages-denormalization\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disadvantage(s): denormalization</h5><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Data is duplicated.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Constraints can help redundant copies of information stay in sync, which increases complexity of the database design.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">A denormalized database under heavy write load might perform worse than its normalized counterpart.</li></ul><h6 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.85em; font-weight: 600; line-height: 1.25; color: rgb(106, 115, 125); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-sources-and-further-reading-denormalization\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#sources-and-further-reading-denormalization\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source(s) and further reading: denormalization</h6><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://en.wikipedia.org/wiki/Denormalization\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Denormalization</a></li></ul>"
                    ],
                    "guid": "J/6SYGNj^&",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">SQL tuning</h4>",
                        "<p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">SQL tuning is a broad topic and many&nbsp;<a href=\"https://www.amazon.com/s/ref=nb_sb_noss_2?url=search-alias%3Daps&amp;field-keywords=sql+tuning\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">books</a>&nbsp;have been written as reference.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">It's important to&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">benchmark</span>&nbsp;and&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">profile</span>&nbsp;to simulate and uncover bottlenecks.</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Benchmark</span>&nbsp;- Simulate high-load situations with tools such as&nbsp;<a href=\"http://httpd.apache.org/docs/2.2/programs/ab.html\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">ab</a>.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Profile</span>&nbsp;- Enable tools such as the&nbsp;<a href=\"http://dev.mysql.com/doc/refman/5.7/en/slow-query-log.html\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">slow query log</a>&nbsp;to help track performance issues.</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Benchmarking and profiling might point you to the following optimizations.</p><h5 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-tighten-up-the-schema\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#tighten-up-the-schema\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tighten up the schema</h5><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">MySQL dumps to disk in contiguous blocks for fast access.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Use&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">CHAR</code>&nbsp;instead of&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">VARCHAR</code>&nbsp;for fixed-length fields.<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">CHAR</code>&nbsp;effectively allows for fast, random access, whereas with&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">VARCHAR</code>, you must find the end of a string before moving onto the next one.</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Use&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">TEXT</code>&nbsp;for large blocks of text such as blog posts.&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">TEXT</code>&nbsp;also allows for boolean searches. Using a&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">TEXT</code>&nbsp;field results in storing a pointer on disk that is used to locate the text block.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Use&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">INT</code>&nbsp;for larger numbers up to 2^32 or 4 billion.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Use&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">DECIMAL</code>&nbsp;for currency to avoid floating point representation errors.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Avoid storing large&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">BLOBS</code>, store the location of where to get the object instead.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">VARCHAR(255)</code>&nbsp;is the largest number of characters that can be counted in an 8 bit number, often maximizing the use of a byte in some RDBMS.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Set the&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">NOT NULL</code>&nbsp;constraint where applicable to&nbsp;<a href=\"http://stackoverflow.com/questions/1017239/how-do-null-values-affect-performance-in-a-database-search\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">improve search performance</a>.</li></ul><h5 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-use-good-indices\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#use-good-indices\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use good indices</h5><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Columns that you are querying (<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">SELECT</code>,&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">GROUP BY</code>,&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">ORDER BY</code>,&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">JOIN</code>) could be faster with indices.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Indices are usually represented as self-balancing&nbsp;<a href=\"https://en.wikipedia.org/wiki/B-tree\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">B-tree</a>&nbsp;that keeps data sorted and allows searches, sequential access, insertions, and deletions in logarithmic time.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Placing an index can keep the data in memory, requiring more space.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Writes could also be slower since the index also needs to be updated.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">When loading large amounts of data, it might be faster to disable indices, load the data, then rebuild the indices.</li></ul><h5 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-avoid-expensive-joins\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#avoid-expensive-joins\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Avoid expensive joins</h5><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer#denormalization\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Denormalize</a>&nbsp;where performance demands it.</li></ul><h5 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-partition-tables\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#partition-tables\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Partition tables</h5><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Break up a table by putting hot spots in a separate table to help keep it in memory.</li></ul><h5 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-tune-the-query-cache\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#tune-the-query-cache\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tune the query cache</h5><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">In some cases, the&nbsp;<a href=\"http://dev.mysql.com/doc/refman/5.7/en/query-cache\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">query cache</a>&nbsp;could lead to&nbsp;<a href=\"https://www.percona.com/blog/2014/01/28/10-mysql-performance-tuning-settings-after-installation/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">performance issues</a>.</li></ul><h5 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-sources-and-further-reading-sql-tuning\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#sources-and-further-reading-sql-tuning\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source(s) and further reading: SQL tuning</h5><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"http://20bits.com/article/10-tips-for-optimizing-mysql-queries-that-dont-suck\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Tips for optimizing MySQL queries</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://stackoverflow.com/questions/1217466/is-there-a-good-reason-i-see-varchar255-used-so-often-as-opposed-to-another-l\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Is there a good reason i see VARCHAR(255) used so often?</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://stackoverflow.com/questions/1017239/how-do-null-values-affect-performance-in-a-database-search\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">How do null values affect performance?</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://dev.mysql.com/doc/refman/5.7/en/slow-query-log.html\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Slow query log</a></li></ul>"
                    ],
                    "guid": "EfhC2P*F^d",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">NoSQL</h3>",
                        "<p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">NoSQL is a collection of data items represented in a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">key-value store</span>,&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">document-store</span>,&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">wide column store</span>, or a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">graph database</span>. Data is denormalized, and joins are generally done in the application code. Most NoSQL stores lack true ACID transactions and favor&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer#eventual-consistency\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">eventual consistency</a>.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">BASE</span>&nbsp;is often used to describe the properties of NoSQL databases. In comparison with the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer#cap-theorem\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">CAP Theorem</a>, BASE chooses availability over consistency.</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Basically available</span>&nbsp;- the system guarantees availability.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Soft state</span>&nbsp;- the state of the system may change over time, even without input.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Eventual consistency</span>&nbsp;- the system will become consistent over a period of time, given that the system doesn't receive input during that period.</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">In addition to choosing between&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer#sql-or-nosql\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">SQL or NoSQL</a>, it is helpful to understand which type of NoSQL database best fits your use case(s). We'll review&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">key-value stores</span>,&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">document-stores</span>,&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">wide column stores</span>, and&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">graph databases</span>&nbsp;in the next section.</p><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Source(s) and further reading: NoSQL</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"http://stackoverflow.com/questions/3342497/explanation-of-base-terminology\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Explanation of base terminology</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://medium.com/baqend-blog/nosql-databases-a-survey-and-decision-guidance-ea7823a822d#.wskogqenq\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">NoSQL databases a survey and decision guidance</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://www.lecloud.net/post/7994751381/scalability-for-dummies-part-2-database\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Scalability</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://www.youtube.com/watch?v=qI_g07C_Q5I\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Introduction to NoSQL</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://horicky.blogspot.com/2009/11/nosql-patterns.html\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">NoSQL patterns</a></li></ul>"
                    ],
                    "guid": "Q96&N5sx,Y",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Key-value store</h4>",
                        "<blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Abstraction: hash table</p></blockquote><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">A key-value store generally allows for O(1) reads and writes and is often backed by memory or SSD. Data stores can maintain keys in&nbsp;<a href=\"https://en.wikipedia.org/wiki/Lexicographical_order\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">lexicographic order</a>, allowing efficient retrieval of key ranges. Key-value stores can allow for storing of metadata with a value.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Key-value stores provide high performance and are often used for simple data models or for rapidly-changing data, such as an in-memory cache layer. Since they offer only a limited set of operations, complexity is shifted to the application layer if additional operations are needed.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">A key-value store is the basis for more complex system systems such as a document store, and in some cases, a graph database.</p><h5 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-sources-and-further-reading-key-value-store\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#sources-and-further-reading-key-value-store\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source(s) and further reading: key-value store</h5><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://en.wikipedia.org/wiki/Key-value_database\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Key-value database</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://stackoverflow.com/questions/4056093/what-are-the-disadvantages-of-using-a-key-value-table-over-nullable-columns-or\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Disadvantages of key-value stores</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://qnimate.com/overview-of-redis-architecture/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Redis architecture</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://www.adayinthelifeof.nl/2011/02/06/memcache-internals/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Memcached architecture</a></li></ul>"
                    ],
                    "guid": "z(0qP5)yMI",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; line-height: 1.25; color: rgb(51, 51, 51); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Document store</h4>",
                        "<blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Abstraction: key-value store with documents stored as values</p></blockquote><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">A document store is centered around documents (XML, JSON, binary, etc), where a document stores all information for a given object. Document stores provide APIs or a query language to query based on the internal structure of the document itself.&nbsp;<em style=\"box-sizing: border-box;\">Note, many key-value stores include features for working with a value's metadata, blurring the lines between these two storage types.</em></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Based on the underlying implementation, documents are organized in either collections, tags, metadata, or directories. Although documents can be organized or grouped together, documents may have fields that are completely different from each other.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Some document stores like&nbsp;<a href=\"https://www.mongodb.com/mongodb-architecture\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">MongoDB</a>&nbsp;and&nbsp;<a href=\"https://blog.couchdb.org/2016/08/01/couchdb-2-0-architecture/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">CouchDB</a>&nbsp;also provide a SQL-like language to perform complex queries.<a href=\"http://www.read.seas.harvard.edu/~kohler/class/cs239-w08/decandia07dynamo.pdf\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">DynamoDB</a>&nbsp;supports both key-values and documents.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Document stores provide high flexibility and are often used for working with occasionally changing data.</p><h5 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-sources-and-further-reading-document-store\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#sources-and-further-reading-document-store\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source(s) and further reading: document store</h5><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://en.wikipedia.org/wiki/Document-oriented_database\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Document-oriented database</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://www.mongodb.com/mongodb-architecture\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">MongoDB architecture</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://blog.couchdb.org/2016/08/01/couchdb-2-0-architecture/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">CouchDB architecture</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://www.elastic.co/blog/found-elasticsearch-from-the-bottom-up\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Elasticsearch architecture</a></li></ul>"
                    ],
                    "guid": "1dQo?L%Hv",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Wide column store</h4>",
                        "<p align=\"center\" style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/823668b07b4bff50574e934273c9244e4e5017d6/687474703a2f2f692e696d6775722e636f6d2f6e3136694f476b2e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/823668b07b4bff50574e934273c9244e4e5017d6/687474703a2f2f692e696d6775722e636f6d2f6e3136694f476b2e706e67\" data-canonical-src=\"http://i.imgur.com/n16iOGk.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a>&nbsp;<br style=\"box-sizing: border-box;\"><i style=\"box-sizing: border-box;\"><a href=\"http://blog.grio.com/2015/11/sql-nosql-a-brief-history.html\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Source: SQL &amp; NoSQL, a brief history</a></i></p><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Abstraction: nested map&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">ColumnFamily&lt;RowKey, Columns&lt;ColKey, Value, Timestamp&gt;&gt;</code></p></blockquote><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">A wide column store's basic unit of data is a column (name/value pair). A column can be grouped in column families (analogous to a SQL table). Super column families further group column families. You can access each column independently with a row key, and columns with the same row key form a row. Each value contains a timestamp for versioning and for conflict resolution.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Google introduced&nbsp;<a href=\"http://www.read.seas.harvard.edu/~kohler/class/cs239-w08/chang06bigtable.pdf\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Bigtable</a>&nbsp;as the first wide column store, which influenced the open-source&nbsp;<a href=\"https://www.mapr.com/blog/in-depth-look-hbase-architecture\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">HBase</a>&nbsp;often-used in the Hadoop ecosystem, and&nbsp;<a href=\"http://docs.datastax.com/en/archived/cassandra/2.0/cassandra/architecture/architectureIntro_c.html\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Cassandra</a>&nbsp;from Facebook. Stores such as BigTable, HBase, and Cassandra maintain keys in lexicographic order, allowing efficient retrieval of selective key ranges.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Wide column stores offer high availability and high scalability. They are often used for very large data sets.</p><h5 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-sources-and-further-reading-wide-column-store\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#sources-and-further-reading-wide-column-store\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source(s) and further reading: wide column store</h5><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"http://blog.grio.com/2015/11/sql-nosql-a-brief-history.html\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">SQL &amp; NoSQL, a brief history</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://www.read.seas.harvard.edu/~kohler/class/cs239-w08/chang06bigtable.pdf\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Bigtable architecture</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://www.mapr.com/blog/in-depth-look-hbase-architecture\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">HBase architecture</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://docs.datastax.com/en/archived/cassandra/2.0/cassandra/architecture/architectureIntro_c.html\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Cassandra architecture</a></li></ul>"
                    ],
                    "guid": "r8:^9/nqR0",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; line-height: 1.25; color: rgb(51, 51, 51); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Graph database</h4>",
                        "<h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Graph database</h4><p align=\"center\" style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/bf6508b65e98a7210d9861515833afa0d9434436/687474703a2f2f692e696d6775722e636f6d2f664e636c3635672e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/bf6508b65e98a7210d9861515833afa0d9434436/687474703a2f2f692e696d6775722e636f6d2f664e636c3635672e706e67\" data-canonical-src=\"http://i.imgur.com/fNcl65g.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a>&nbsp;<br style=\"box-sizing: border-box;\"><i style=\"box-sizing: border-box;\"><a href=\"https://en.wikipedia.org/wiki/File:GraphDatabase_PropertyGraph.png\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Source: Graph database</a></i></p><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Abstraction: graph</p></blockquote><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">In a graph database, each node is a record and each arc is a relationship between two nodes. Graph databases are optimized to represent complex relationships with many foreign keys or many-to-many relationships.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Graphs databases offer high performance for data models with complex relationships, such as a social network. They are relatively new and are not yet widely-used; it might be more difficult to find development tools and resources. Many graphs can only be accessed with&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer#representational-state-transfer-rest\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">REST APIs</a>.</p><h5 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-sources-and-further-reading-graph\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#sources-and-further-reading-graph\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source(s) and further reading: graph</h5><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://en.wikipedia.org/wiki/Graph_database\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Graph database</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://neo4j.com/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Neo4j</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://blog.twitter.com/2010/introducing-flockdb\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">FlockDB</a></li></ul>"
                    ],
                    "guid": "uq]jPZohFT",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">SQL or NoSQL</h3>",
                        "<p align=\"center\" style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/a6e2e844765c9d5382d9c9b64ef7693977981646/687474703a2f2f692e696d6775722e636f6d2f775847714735662e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/a6e2e844765c9d5382d9c9b64ef7693977981646/687474703a2f2f692e696d6775722e636f6d2f775847714735662e706e67\" data-canonical-src=\"http://i.imgur.com/wXGqG5f.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a>&nbsp;<br style=\"box-sizing: border-box;\"><i style=\"box-sizing: border-box;\"><a href=\"https://www.infoq.com/articles/Transition-RDBMS-NoSQL/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Source: Transitioning from RDBMS to NoSQL</a></i></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Reasons for&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">SQL</span>:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Structured data</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Strict schema</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Relational data</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Need for complex joins</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Transactions</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Clear patterns for scaling</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">More established: developers, community, code, tools, etc</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Lookups by index are very fast</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Reasons for&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">NoSQL</span>:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Semi-structured data</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Dynamic or flexible schema</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Non relational data</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">No need for complex joins</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Store many TB (or PB) of data</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Very data intensive workload</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Very high throughput for IOPS</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Sample data well-suited for NoSQL:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Rapid ingest of clickstream and log data</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Leaderboard or scoring data</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Temporary data, such as a shopping cart</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Frequently accessed ('hot') tables</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Metadata/lookup tables</li></ul><h5 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-sources-and-further-reading-sql-or-nosql\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#sources-and-further-reading-sql-or-nosql\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source(s) and further reading: SQL or NoSQL</h5><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://www.youtube.com/watch?v=vg5onp8TU6Q\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Scaling up to your first 10 million users</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://www.sitepoint.com/sql-vs-nosql-differences/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">SQL vs NoSQL differences</a></li></ul>"
                    ],
                    "guid": "Hb6uz}5IYX",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Cache</h2>",
                        "<p align=\"center\" style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/7acedde6aa7853baf2eb4a53f88e2595ebe43756/687474703a2f2f692e696d6775722e636f6d2f51367a32344c612e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/7acedde6aa7853baf2eb4a53f88e2595ebe43756/687474703a2f2f692e696d6775722e636f6d2f51367a32344c612e706e67\" data-canonical-src=\"http://i.imgur.com/Q6z24La.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a><br style=\"box-sizing: border-box;\"><i style=\"box-sizing: border-box;\"><a href=\"http://horicky.blogspot.com/2010/10/scalable-system-design-patterns.html\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Source: Scalable system design patterns</a></i></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Caching improves page load times and can reduce the load on your servers and databases. In this model, the dispatcher will first lookup if the request has been made before and try to find the previous result to return, in order to save the actual execution.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Databases often benefit from a uniform distribution of reads and writes across its partitions. Popular items can skew the distribution, causing bottlenecks. Putting a cache in front of a database can help absorb uneven loads and spikes in traffic.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Disadvantage(s): cache</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Need to maintain consistency between caches and the source of truth such as the database through&nbsp;<a href=\"https://en.wikipedia.org/wiki/Cache_algorithms\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">cache invalidation</a>.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Need to make application changes such as adding Redis or memcached.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Cache invalidation is a difficult problem, there is additional complexity associated with when to update the cache.</li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-sources-and-further-reading-10\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#sources-and-further-reading-10\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source(s) and further reading</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"http://www.slideshare.net/tmatyashovsky/from-cache-to-in-memory-data-grid-introduction-to-hazelcast\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">From cache to in-memory data grid</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://horicky.blogspot.com/2010/10/scalable-system-design-patterns.html\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Scalable system design patterns</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://lethain.com/introduction-to-architecting-systems-for-scale/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Introduction to architecting systems for scale</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://www.slideshare.net/jboner/scalability-availability-stability-patterns/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Scalability, availability, stability, patterns</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://www.lecloud.net/post/9246290032/scalability-for-dummies-part-3-cache\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Scalability</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://docs.aws.amazon.com/AmazonElastiCache/latest/UserGuide/Strategies.html\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">AWS ElastiCache strategies</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://en.wikipedia.org/wiki/Cache_(computing)\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Wikipedia</a></li></ul>"
                    ],
                    "guid": "G)auR,g!;o",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "Cache locations",
                        "<h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Client caching</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Caches can be located on the client side (OS or browser),&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer#reverse-proxy\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">server side</a>, or in a distinct cache layer.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-cdn-caching\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#cdn-caching\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CDN caching</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://github.com/donnemartin/system-design-primer#content-delivery-network\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">CDNs</a>&nbsp;are considered a type of cache.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-web-server-caching\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#web-server-caching\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Web server caching</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://github.com/donnemartin/system-design-primer#reverse-proxy-web-server\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Reverse proxies</a>&nbsp;and caches such as&nbsp;<a href=\"https://www.varnish-cache.org/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Varnish</a>&nbsp;can serve static and dynamic content directly. Web servers can also cache requests, returning responses without having to contact application servers.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-database-caching\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#database-caching\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Database caching</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Your database usually includes some level of caching in a default configuration, optimized for a generic use case. Tweaking these settings for specific usage patterns can further boost performance.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-application-caching\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#application-caching\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Application caching</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">In-memory caches such as Memcached and Redis are key-value stores between your application and your data storage. Since the data is held in RAM, it is much faster than typical databases where data is stored on disk. RAM is more limited than disk, so&nbsp;<a href=\"https://en.wikipedia.org/wiki/Cache_algorithms\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">cache invalidation</a>&nbsp;algorithms such as&nbsp;<a href=\"https://en.wikipedia.org/wiki/Cache_algorithms#Least_Recently_Used\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">least recently used (LRU)</a>&nbsp;can help invalidate 'cold' entries and keep 'hot' data in RAM.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Redis has the following additional features:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Persistence option</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Built-in data structures such as sorted sets and lists</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">There are multiple levels you can cache that fall into two general categories:&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">database queries</span>&nbsp;and&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">objects</span>:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Row level</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Query-level</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Fully-formed serializable objects</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Fully-rendered HTML</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Generaly, you should try to avoid file-based caching, as it makes cloning and auto-scaling more difficult.</p>"
                    ],
                    "guid": "hrDTZ^RRXM",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "Database caching, what to cache",
                        "<p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">There are multiple levels you can cache that fall into two general categories:&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">database queries</span>&nbsp;and&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">objects</span>:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Row level</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Query-level</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Fully-formed serializable objects</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Fully-rendered HTML</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Generaly, you should try to avoid file-based caching, as it makes cloning and auto-scaling more difficult.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-caching-at-the-database-query-level\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#caching-at-the-database-query-level\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Caching at the database query level</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Whenever you query the database, hash the query as a key and store the result to the cache. This approach suffers from expiration issues:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Hard to delete a cached result with complex queries</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">If one piece of data changes such as a table cell, you need to delete all cached queries that might include the changed cell</li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-caching-at-the-object-level\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#caching-at-the-object-level\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Caching at the object level</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">See your data as an object, similar to what you do with your application code. Have your application assemble the dataset from the database into a class instance or a data structure(s):</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Remove the object from cache if its underlying data has changed</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Allows for asynchronous processing: workers assemble objects by consuming the latest cached object</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Suggestions of what to cache:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">User sessions</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Fully rendered web pages</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Activity streams</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">User graph data</li></ul>"
                    ],
                    "guid": "jy+DSU,x0K",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Cache-aside</h4>",
                        "<p align=\"center\" style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/7f5934e49a678b67f65e5ed53134bc258b007ebb/687474703a2f2f692e696d6775722e636f6d2f4f4e6a4f52716b2e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/7f5934e49a678b67f65e5ed53134bc258b007ebb/687474703a2f2f692e696d6775722e636f6d2f4f4e6a4f52716b2e706e67\" data-canonical-src=\"http://i.imgur.com/ONjORqk.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a><br style=\"box-sizing: border-box;\"><i style=\"box-sizing: border-box;\"><a href=\"http://www.slideshare.net/tmatyashovsky/from-cache-to-in-memory-data-grid-introduction-to-hazelcast\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Source: From cache to in-memory data grid</a></i></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">The application is responsible for reading and writing from storage. The cache does not interact with storage directly. The application does the following:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Look for entry in cache, resulting in a cache miss</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Load entry from the database</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Add entry to cache</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Return entry</li></ul><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">def get_user(self, user_id):\n    user = cache.get(\"user.{0}\", user_id)\n    if user is None:\n        user = db.query(\"SELECT * FROM users WHERE user_id = {0}\", user_id)\n        if user is not None:\n            cache.set(key, json.dumps(user))\n    return user\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://memcached.org/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Memcached</a>&nbsp;is generally used in this manner.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Subsequent reads of data added to cache are fast. Cache-aside is also referred to as lazy loading. Only requested data is cached, which avoids filling up the cache with data that isn't requested.</p><h5 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-disadvantages-cache-aside\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#disadvantages-cache-aside\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disadvantage(s): cache-aside</h5><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Each cache miss results in three trips, which can cause a noticeable delay.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Data can become stale if it is updated in the database. This issue is mitigated by setting a time-to-live (TTL) which forces an update of the cache entry, or by using write-through.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">When a node fails, it is replaced by a new, empty node, increasing latency.</li></ul>"
                    ],
                    "guid": "zm9zEc*gFw",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Write-through</h4>",
                        "<p align=\"center\" style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/56b870f4d199335ccdbc98b989ef6511ed14f0e2/687474703a2f2f692e696d6775722e636f6d2f3076426330684e2e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/56b870f4d199335ccdbc98b989ef6511ed14f0e2/687474703a2f2f692e696d6775722e636f6d2f3076426330684e2e706e67\" data-canonical-src=\"http://i.imgur.com/0vBc0hN.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a>&nbsp;<br style=\"box-sizing: border-box;\"><i style=\"box-sizing: border-box;\"><a href=\"http://www.slideshare.net/jboner/scalability-availability-stability-patterns/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Source: Scalability, availability, stability, patterns</a></i></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">The application uses the cache as the main data store, reading and writing data to it, while the cache is responsible for reading and writing to the database:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Application adds/updates entry in cache</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Cache synchronously writes entry to data store</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Return</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Application code:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">set_user(12345, {\"foo\":\"bar\"})\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Cache code:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">def set_user(user_id, values):\n    user = db.query(\"UPDATE Users WHERE id = {0}\", user_id, values)\n    cache.set(user_id, user)\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Write-through is a slow overall operation due to the write operation, but subsequent reads of just written data are fast. Users are generally more tolerant of latency when updating data than reading data. Data in the cache is not stale.</p><h5 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-disadvantages-write-through\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#disadvantages-write-through\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disadvantage(s): write through</h5><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">When a new node is created due to failure or scaling, the new node will not cache entries until the entry is updated in the database. Cache-aside in conjunction with write through can mitigate this issue.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Most data written might never read, which can be minimized with a TTL.</li></ul>"
                    ],
                    "guid": "s3G2acV2c<",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Write-behind (write-back)</h4>",
                        "<p align=\"center\" style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/8aa9f1a2f050c1422898bb5e82f1f01773334e22/687474703a2f2f692e696d6775722e636f6d2f72675372766a472e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/8aa9f1a2f050c1422898bb5e82f1f01773334e22/687474703a2f2f692e696d6775722e636f6d2f72675372766a472e706e67\" data-canonical-src=\"http://i.imgur.com/rgSrvjG.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a>&nbsp;<br style=\"box-sizing: border-box;\"><i style=\"box-sizing: border-box;\"><a href=\"http://www.slideshare.net/jboner/scalability-availability-stability-patterns/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Source: Scalability, availability, stability, patterns</a></i></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">In write-behind, tha application does the following:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Add/update entry in cache</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Asynchronously write entry to the data store, improving write performance</li></ul><h5 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-disadvantages-write-behind\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#disadvantages-write-behind\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disadvantage(s): write-behind</h5><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">There could be data loss if the cache goes down prior to its contents hitting the data store.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">It is more complex to implement write-behind than it is to implement cache-aside or write-through.</li></ul>"
                    ],
                    "guid": "kc4~Uw!;^!",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; line-height: 1.25; color: rgb(51, 51, 51); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Refresh-ahead</h4>",
                        "<p align=\"center\" style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/49dcb54307763b4f56d61a4a1369826e2e7d52e4/687474703a2f2f692e696d6775722e636f6d2f6b78746a7167452e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/49dcb54307763b4f56d61a4a1369826e2e7d52e4/687474703a2f2f692e696d6775722e636f6d2f6b78746a7167452e706e67\" data-canonical-src=\"http://i.imgur.com/kxtjqgE.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a><br style=\"box-sizing: border-box;\"><i style=\"box-sizing: border-box;\"><a href=\"http://www.slideshare.net/tmatyashovsky/from-cache-to-in-memory-data-grid-introduction-to-hazelcast\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Source: From cache to in-memory data grid</a></i></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">You can configure the cache to automatically refresh any recently accessed cache entry prior to its expiration.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Refresh-ahead can result in reduced latency vs read-through if the cache can accurately predict which items are likely to be needed in the future.</p><h5 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 0.875em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-disadvantages-refresh-ahead\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#disadvantages-refresh-ahead\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disadvantage(s): refresh-ahead</h5><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Not accurately predicting which items are likely to be needed in the future can result in reduced performance than without refresh-ahead.</li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-disadvantages-cache\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#disadvantages-cache\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>"
                    ],
                    "guid": "P&NtwOj*cq",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Asynchronism</h2>",
                        "<p align=\"center\" style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/c01ec137453216bbc188e3a8f16da39ec9131234/687474703a2f2f692e696d6775722e636f6d2f353447597353782e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/c01ec137453216bbc188e3a8f16da39ec9131234/687474703a2f2f692e696d6775722e636f6d2f353447597353782e706e67\" data-canonical-src=\"http://i.imgur.com/54GYsSx.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a><br style=\"box-sizing: border-box;\"><i style=\"box-sizing: border-box;\"><a href=\"http://lethain.com/introduction-to-architecting-systems-for-scale/#platform_layer\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Source: Intro to architecting systems for scale</a></i></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Asynchronous workflows help reduce request times for expensive operations that would otherwise be performed in-line. They can also help by doing time-consuming work in advance, such as periodic aggregation of data.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-message-queues\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#message-queues\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Message queues</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Message queues receive, hold, and deliver messages. If an operation is too slow to perform inline, you can use a message queue with the following workflow:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">An application publishes a job to the queue, then notifies the user of job status</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">A worker picks up the job from the queue, processes it, then signals the job is complete</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">The user is not blocked and the job is processed in the background. During this time, the client might optionally do a small amount of processing to make it seem like the task has completed. For example, if posting a tweet, the tweet could be instantly posted to your timeline, but it could take some time before your tweet is actually delivered to all of your followers.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Redis</span>&nbsp;is useful as a simple message broker but messages can be lost.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">RabbitMQ</span>&nbsp;is popular but requires you to adapt to the 'AMQP' protocol and manage your own nodes.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Amazon SQS</span>, is hosted but can have high latency and has the possibility of messages being delivered twice.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-task-queues\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#task-queues\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Task queues</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Tasks queues receive tasks and their related data, runs them, then delivers their results. They can support scheduling and can be used to run computationally-intensive jobs in the background.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Celery</span>&nbsp;has support for scheduling and primarily has python support.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-back-pressure\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#back-pressure\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Back pressure</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">If queues start to grow significantly, the queue size can become larger than memory, resulting in cache misses, disk reads, and even slower performance.&nbsp;<a href=\"http://mechanical-sympathy.blogspot.com/2012/05/apply-back-pressure-when-overloaded.html\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Back pressure</a>&nbsp;can help by limiting the queue size, thereby maintaining a high throughput rate and good response times for jobs already in the queue. Once the queue fills up, clients get a server busy or HTTP 503 status code to try again later. Clients can retry the request at a later time, perhaps with&nbsp;<a href=\"https://en.wikipedia.org/wiki/Exponential_backoff\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">exponential backoff</a>.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-disadvantages-asynchronism\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#disadvantages-asynchronism\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disadvantage(s): asynchronism</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Use cases such as inexpensive calculations and realtime workflows might be better suited for synchronous operations, as introducing queues can add delays and complexity.</li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-sources-and-further-reading-11\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#sources-and-further-reading-11\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source(s) and further reading</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://www.youtube.com/watch?v=1KRYH75wgy4\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">It's all a numbers game</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://mechanical-sympathy.blogspot.com/2012/05/apply-back-pressure-when-overloaded.html\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Applying back pressure when overloaded</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://en.wikipedia.org/wiki/Little%27s_law\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Little's law</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://www.quora.com/What-is-the-difference-between-a-message-queue-and-a-task-queue-Why-would-a-task-queue-require-a-message-broker-like-RabbitMQ-Redis-Celery-or-IronMQ-to-function\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">What is the difference between a message queue and a task queue?</a></li></ul><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-communication\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#communication\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h2>"
                    ],
                    "guid": "H%/GyD>s[H",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Communication</h2>",
                        "<p align=\"center\" style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/1d761d5688d28ce1fb12a0f1c8191bca96eece4c/687474703a2f2f692e696d6775722e636f6d2f354b656f6351732e6a7067\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/1d761d5688d28ce1fb12a0f1c8191bca96eece4c/687474703a2f2f692e696d6775722e636f6d2f354b656f6351732e6a7067\" data-canonical-src=\"http://i.imgur.com/5KeocQs.jpg\" style=\"box-sizing: content-box; max-width: 100%;\"></a>&nbsp;<br style=\"box-sizing: border-box;\"><i style=\"box-sizing: border-box;\"><a href=\"http://www.escotal.com/osilayer.html\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Source: OSI 7 layer model</a></i></p>"
                    ],
                    "guid": "MEE3)#KRCL",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Hypertext transfer protocol (HTTP)</h3>",
                        "<p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">HTTP is a method for encoding and transporting data between a client and a server. It is a request/response protocol: clients issue requests and servers issue responses with relevant content and completion status info about the request. HTTP is self-contained, allowing requests and responses to flow through many intermediate routers and servers that perform load balancing, caching, encryption, and compression.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">A basic HTTP request consists of a verb (method) and a resource (endpoint). Below are common HTTP verbs:</p><table style=\"box-sizing: border-box; border-spacing: 0px; margin-top: 0px; margin-bottom: 16px; display: block; width: 888px; overflow: auto; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><thead style=\"box-sizing: border-box;\"><tr style=\"box-sizing: border-box; border-top: 1px solid rgb(198, 203, 209);\"><th style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">Verb</th><th style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">Description</th><th style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">Idempotent*</th><th style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">Safe</th><th style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">Cacheable</th></tr></thead><tbody style=\"box-sizing: border-box;\"><tr style=\"box-sizing: border-box; border-top: 1px solid rgb(198, 203, 209);\"><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">GET</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">Reads a resource</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">Yes</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">Yes</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">Yes</td></tr><tr style=\"box-sizing: border-box; background-color: rgb(246, 248, 250); border-top: 1px solid rgb(198, 203, 209);\"><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">POST</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">Creates a resource or trigger a process that handles data</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">No</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">No</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">Yes if response contains freshness info</td></tr><tr style=\"box-sizing: border-box; border-top: 1px solid rgb(198, 203, 209);\"><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">PUT</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">Creates or replace a resource</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">Yes</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">No</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">No</td></tr><tr style=\"box-sizing: border-box; background-color: rgb(246, 248, 250); border-top: 1px solid rgb(198, 203, 209);\"><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">PATCH</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">Partially updates a resource</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">No</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">No</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">Yes if response contains freshness info</td></tr><tr style=\"box-sizing: border-box; border-top: 1px solid rgb(198, 203, 209);\"><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">DELETE</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">Deletes a resource</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">Yes</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">No</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">No</td></tr></tbody></table><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">*Can be called many times without different outcomes.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">HTTP is an application layer protocol relying on lower-level protocols such as&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">TCP</span>&nbsp;and&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">UDP</span>.</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://www.nginx.com/resources/glossary/http/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">HTTP</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://www.quora.com/What-is-the-difference-between-HTTP-protocol-and-TCP-protocol\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">README</a></li></ul>"
                    ],
                    "guid": "QFA+@aT:}d",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Transmission control protocol (TCP)</h3>",
                        "<p align=\"center\" style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/821620cf6aa83566f4def561e754e5991480ca8d/687474703a2f2f692e696d6775722e636f6d2f4a6441736476472e6a7067\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/821620cf6aa83566f4def561e754e5991480ca8d/687474703a2f2f692e696d6775722e636f6d2f4a6441736476472e6a7067\" data-canonical-src=\"http://i.imgur.com/JdAsdvG.jpg\" style=\"box-sizing: content-box; max-width: 100%;\"></a>&nbsp;<br style=\"box-sizing: border-box;\"><i style=\"box-sizing: border-box;\"><a href=\"http://www.wildbunny.co.uk/blog/2012/10/09/how-to-make-a-multi-player-game-part-1/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Source: How to make a multiplayer game</a></i></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">TCP is a connection-oriented protocol over an&nbsp;<a href=\"https://en.wikipedia.org/wiki/Internet_Protocol\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">IP network</a>. Connection is established and terminated using a&nbsp;<a href=\"https://en.wikipedia.org/wiki/Handshaking\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">handshake</a>. All packets sent are guaranteed to reach the destination in the original order and without corruption through:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Sequence numbers and&nbsp;<a href=\"https://en.wikipedia.org/wiki/Transmission_Control_Protocol#Checksum_computation\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">checksum fields</a>&nbsp;for each packet</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://en.wikipedia.org/wiki/Acknowledgement_(data_networks)\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Acknowledgement</a>&nbsp;packets and automatic retransmission</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">If the sender does not receive a correct response, it will resend the packets. If there are multiple timeouts, the connection is dropped. TCP also implements&nbsp;<a href=\"https://en.wikipedia.org/wiki/Flow_control_(data)\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">flow control</a>&nbsp;and&nbsp;<a href=\"https://en.wikipedia.org/wiki/Network_congestion#Congestion_control\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">congestion control</a>. These guarantees cause delays and generally results in less efficient transmission than UDP.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">To ensure high throughput, web servers can keep a large number of TCP connections open, resulting in high memory usage. It can be expensive to have a large number of open connections between web server threads and say, a&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer#memcached\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">memcached</a>&nbsp;server.&nbsp;<a href=\"https://en.wikipedia.org/wiki/Connection_pool\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Connection pooling</a>&nbsp;can help in addition to switching to UDP where applicable.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">TCP is useful for applications that require high reliability but are less time critical. Some examples include web servers, database info, SMTP, FTP, and SSH.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Use TCP over UDP when:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">You need all of the data to arrive in tact</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">You want to automatically make a best estimate use of the network throughput</li></ul>"
                    ],
                    "guid": "or7}A)Fx6{",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">User datagram protocol (UDP)</h3>",
                        "<p align=\"center\" style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/47eb14c0a2dff2166f8781a6ce8c7f33d4c33da8/687474703a2f2f692e696d6775722e636f6d2f797a44724a74412e6a7067\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/47eb14c0a2dff2166f8781a6ce8c7f33d4c33da8/687474703a2f2f692e696d6775722e636f6d2f797a44724a74412e6a7067\" data-canonical-src=\"http://i.imgur.com/yzDrJtA.jpg\" style=\"box-sizing: content-box; max-width: 100%;\"></a>&nbsp;<br style=\"box-sizing: border-box;\"><i style=\"box-sizing: border-box;\"><a href=\"http://www.wildbunny.co.uk/blog/2012/10/09/how-to-make-a-multi-player-game-part-1/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Source: How to make a multiplayer game</a></i></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">UDP is connectionless. Datagrams (analogous to packets) are guaranteed only at the datagram level. Datagrams might reach their destination out of order or not at all. UDP does not support congestion control. Without the guarantees that TCP support, UDP is generally more efficient.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">UDP can broadcast, sending datagrams to all devices on the subnet. This is useful with&nbsp;<a href=\"https://en.wikipedia.org/wiki/Dynamic_Host_Configuration_Protocol\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">DHCP</a>&nbsp;because the client has not yet received an IP address, thus preventing a way for TCP to stream without the IP address.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">UDP is less reliable but works well in real time use cases such as VoIP, video chat, streaming, and realtime multiplayer games.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Use UDP over TCP when:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">You need the lowest latency</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Late data is worse than loss of data</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">You want to implement your own error correction</li></ul><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-sources-and-further-reading-tcp-and-udp\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#sources-and-further-reading-tcp-and-udp\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source(s) and further reading: TCP and UDP</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"http://gafferongames.com/networking-for-game-programmers/udp-vs-tcp/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Networking for game programming</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://www.cyberciti.biz/faq/key-differences-between-tcp-and-udp-protocols/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Key differences between TCP and UDP protocols</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://stackoverflow.com/questions/5970383/difference-between-tcp-and-udp\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Difference between TCP and UDP</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://en.wikipedia.org/wiki/Transmission_Control_Protocol\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Transmission control protocol</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://en.wikipedia.org/wiki/User_Datagram_Protocol\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">User datagram protocol</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://www.cs.bu.edu/~jappavoo/jappavoo.github.com/451/papers/memcache-fb.pdf\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Scaling memcache at Facebook</a></li></ul>"
                    ],
                    "guid": "cr@r_*.I;<",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Remote procedure call (RPC)</h3>",
                        "<p align=\"center\" style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/1a3d7771c0b0a7816d0533fffeb6eeeb442d9945/687474703a2f2f692e696d6775722e636f6d2f6946344d6b62352e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/1a3d7771c0b0a7816d0533fffeb6eeeb442d9945/687474703a2f2f692e696d6775722e636f6d2f6946344d6b62352e706e67\" data-canonical-src=\"http://i.imgur.com/iF4Mkb5.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a>&nbsp;<br style=\"box-sizing: border-box;\"><i style=\"box-sizing: border-box;\"><a href=\"http://www.puncsky.com/blog/2016/02/14/crack-the-system-design-interview/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Source: Crack the system design interview</a></i></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">In an RPC, a client causes a procedure to execute on a different address space, usually a remote server. The procedure is coded as if it were a local procedure call, abstracting away the details of how to communicate with the server from the client program. Remote calls are usually slower and less reliable than local calls so it is helpful to distinguish RPC calls from local calls. Popular RPC frameworks include&nbsp;<a href=\"https://developers.google.com/protocol-buffers/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Protobuf</a>,&nbsp;<a href=\"https://thrift.apache.org/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Thrift</a>, and&nbsp;<a href=\"https://avro.apache.org/docs/current/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Avro</a>.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">RPC is a request-response protocol:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Client program</span>&nbsp;- Calls the client stub procedure. The parameters are pushed onto the stack like a local procedure call.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Client stub procedure</span>&nbsp;- Marshals (packs) procedure id and arguments into a request message.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Client communication module</span>&nbsp;- OS sends the message from the client to the server.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Server communication module</span>&nbsp;- OS passes the incoming packets to the server stub procedure.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Server stub procedure</span>&nbsp;- Unmarshalls the results, calls the server procedure matching the procedure id and passes the given arguments.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The server response repeats the steps above in reverse order.</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Sample RPC calls:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">GET /someoperation?data=anId\n\nPOST /anotheroperation\n{\n  \"data\":\"anId\";\n  \"anotherdata\": \"another value\"\n}\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">RPC is focused on exposing behaviors. RPCs are often used for performance reasons with internal communications, as you can hand-craft native calls to better fit your use cases.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Choose a Native Library aka SDK when:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">You know your target platform.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">You want to control how your \"logic\" is accessed</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">You want to control how error control happens off your library</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Performance and end user experience is your primary concern</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">HTTP APIs following&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">REST</span>&nbsp;tend to be used more often for public APIs.</p><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-disadvantages-rpc\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#disadvantages-rpc\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disadvantage(s): RPC</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">RPC clients become tightly coupled to the service implementation.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">A new API must be definied for every new operation or use case.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">It can be difficult to debug RPC.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">You might not be able to leverage existing technologies out of the box. For example, it might require additional effort to ensure&nbsp;<a href=\"http://etherealbits.com/2012/12/debunking-the-myths-of-rpc-rest/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">RPC calls are properly cached</a>&nbsp;on caching servers such as&nbsp;<a href=\"http://www.squid-cache.org/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Squid</a>.</li></ul>"
                    ],
                    "guid": "QB(9g`/Q/W",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Representational state transfer (REST)</h3>",
                        "<p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">REST is an architectural style enforcing a client/server model where the client acts on a set of resources managed by the server. The server provides a representation of resources and actions that can either manipulate or get a new representation of resources. All communication must be stateless and cacheable.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">There are four qualities of a RESTful interface:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Identify resources (URI in HTTP)</span>&nbsp;- use the same URI regardless of any operation.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Change with representations (Verbs in HTTP)</span>&nbsp;- use verbs, headers, and body.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Self-descriptive error message (status response in HTTP)</span>&nbsp;- Use status codes, don't reinvent the wheel.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\"><a href=\"http://restcookbook.com/Basics/hateoas/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">HATEOAS</a>&nbsp;(HTML interface for HTTP)</span>&nbsp;- your web service should be fully accessible in a browser.</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Sample REST calls:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">GET /someresources/anId\n\nPUT /someresources/anId\n{\"anotherdata\": \"another value\"}\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">REST is focused on exposing data. It minimizes the coupling between client/server and is often used for public HTTP APIs. REST uses a more generic and uniform method of exposing resources through URIs,&nbsp;<a href=\"https://github.com/for-GET/know-your-http-well/blob/master/headers.md\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">representation through headers</a>, and actions through verbs such as GET, POST, PUT, DELETE, and PATCH. Being stateless, REST is great for horizontal scaling and partitioning.</p><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-disadvantages-rest\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#disadvantages-rest\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disadvantage(s): REST</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">With REST being focused on exposing data, it might not be a good fit if resources are not naturally organized or accessed in a simple hierarchy. For example, returning all updated records from the past hour matching a particular set of events is not easily expressed as a path. With REST, it is likely to be implemented with a combination of URI path, query parameters, and possibly the request body.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">REST typically relies on a few verbs (GET, POST, PUT, DELETE, and PATCH) which sometimes doesn't fit your use case. For example, moving expired documents to the archive folder might not cleanly fit within these verbs.</li></ul>"
                    ],
                    "guid": "Gw>&u4Ge#=",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Security</h2>",
                        "<p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">This section could use some updates. Consider&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer#contributing\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">contributing</a>!</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Security is a broad topic. Unless you have considerable experience, a security background, or are applying for a position that requires knowledge of security, you probably won't need to know more than the basics:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Encrypt in transit and at rest.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Sanitize all user inputs or any input parameters exposed to user to prevent&nbsp;<a href=\"https://en.wikipedia.org/wiki/Cross-site_scripting\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">XSS</a>&nbsp;and&nbsp;<a href=\"https://en.wikipedia.org/wiki/SQL_injection\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">SQL injection</a>.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Use parameterized queries to prevent SQL injection.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Use the principle of&nbsp;<a href=\"https://en.wikipedia.org/wiki/Principle_of_least_privilege\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">least privilege</a>.</li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-sources-and-further-reading-12\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#sources-and-further-reading-12\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source(s) and further reading</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/FallibleInc/security-guide-for-developers\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Security guide for developers</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://www.owasp.org/index.php/OWASP_Top_Ten_Cheat_Sheet\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">OWASP top ten</a></li></ul>"
                    ],
                    "guid": "B.6B>VlL8+",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Powers of two table</h3>",
                        "<h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Powers of two table</h3><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">Power           Exact Value         Approx Value        Bytes\n---------------------------------------------------------------\n7                             128\n8                             256\n10                           1024   1 thousand           1 KB\n16                         65,536                       64 KB\n20                      1,048,576   1 million            1 MB\n30                  1,073,741,824   1 billion            1 GB\n32                  4,294,967,296                        4 GB\n40              1,099,511,627,776   1 trillion           1 TB\n</code></pre><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-sources-and-further-reading-13\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#sources-and-further-reading-13\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source(s) and further reading</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://en.wikipedia.org/wiki/Power_of_two\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Powers of two</a></li></ul>"
                    ],
                    "guid": "Dz@V;u04.x",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Latency numbers every programmer should know</h3>",
                        "<pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">Latency Comparison Numbers\n--------------------------\nL1 cache reference                           0.5 ns\nBranch mispredict                            5   ns\nL2 cache reference                           7   ns                      14x L1 cache\nMutex lock/unlock                          100   ns\nMain memory reference                      100   ns                      20x L2 cache, 200x L1 cache\nCompress 1K bytes with Zippy            10,000   ns       10 us\nSend 1 KB bytes over 1 Gbps network     10,000   ns       10 us\nRead 4 KB randomly from SSD*           150,000   ns      150 us          ~1GB/sec SSD\nRead 1 MB sequentially from memory     250,000   ns      250 us\nRound trip within same datacenter      500,000   ns      500 us\nRead 1 MB sequentially from SSD*     1,000,000   ns    1,000 us    1 ms  ~1GB/sec SSD, 4X memory\nDisk seek                           10,000,000   ns   10,000 us   10 ms  20x datacenter roundtrip\nRead 1 MB sequentially from 1 Gbps  10,000,000   ns   10,000 us   10 ms  40x memory, 10X SSD\nRead 1 MB sequentially from disk    30,000,000   ns   30,000 us   30 ms 120x memory, 30X SSD\nSend packet CA-&gt;Netherlands-&gt;CA    150,000,000   ns  150,000 us  150 ms\n\nNotes\n-----\n1 ns = 10^-9 seconds\n1 us = 10^-6 seconds = 1,000 ns\n1 ms = 10^-3 seconds = 1,000 us = 1,000,000 ns\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Handy metrics based on numbers above:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Read sequentially from disk at 30 MB/s</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Read sequentially from 1 Gbps Ethernet at 100 MB/s</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Read sequentially from SSD at 1 GB/s</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Read sequentially from main memory at 4 GB/s</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">6-7 world-wide round trips per second</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">2,000 round trips per second within a data center</li></ul><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-latency-numbers-visualized\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#latency-numbers-visualized\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Latency numbers visualized</h4><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/77f72259e1eb58596b564d1ad823af1853bc60a3/687474703a2f2f692e696d6775722e636f6d2f6b307431652e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/77f72259e1eb58596b564d1ad823af1853bc60a3/687474703a2f2f692e696d6775722e636f6d2f6b307431652e706e67\" alt=\"\" style=\"box-sizing: content-box; max-width: 100%;\"></a></p><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-sources-and-further-reading-14\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#sources-and-further-reading-14\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source(s) and further reading</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://gist.github.com/jboner/2841832\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Latency numbers every programmer should know - 1</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://gist.github.com/hellerbarde/2843375\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Latency numbers every programmer should know - 2</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://www.cs.cornell.edu/projects/ladis2009/talks/dean-keynote-ladis2009.pdf\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Designs, lessons, and advice from building large distributed systems</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://static.googleusercontent.com/media/research.google.com/en//people/jeff/stanford-295-talk.pdf\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Software Engineering Advice from Building Large-Scale Distributed Systems</a></li></ul>"
                    ],
                    "guid": "ee:jx/jp]h",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "MD5",
                        "<ul style=\"-webkit-print-color-adjust: exact; margin: 15px 0px; padding-left: 30px; font-family: Helvetica, arial, sans-serif; font-size: 14px; text-size-adjust: auto;\"><li style=\"-webkit-print-color-adjust: exact; margin: 0px;\">Widely used hashing function that produces a 128-bit hash value</li><li style=\"-webkit-print-color-adjust: exact; margin: 0px;\">Uniformly distributed</li></ul>"
                    ],
                    "guid": "jLZ`2w<Vt5",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "Base 62",
                        "<ul style=\"-webkit-print-color-adjust: exact; margin: 15px 0px; padding-left: 30px; font-family: Helvetica, arial, sans-serif; font-size: 14px; text-size-adjust: auto;\"><li style=\"-webkit-print-color-adjust: exact; margin: 0px;\">Encodes to&nbsp;<code style=\"-webkit-print-color-adjust: exact; margin: 0px 2px; padding: 0px 5px; white-space: nowrap; border: 1px solid rgb(234, 234, 234); background-color: rgb(248, 248, 248); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;\">[a-zA-Z0-9]</code>&nbsp;which works well for urls, eliminating the need for escaping special characters</li><li style=\"-webkit-print-color-adjust: exact; margin: 0px;\">Only one hash result for the original input and and the operation is deterministic (no randomness involved)</li><li style=\"-webkit-print-color-adjust: exact; margin: 0px;\">Base 64 is another popular encoding but provides issues for urls because of the additional&nbsp;<code style=\"-webkit-print-color-adjust: exact; margin: 0px 2px; padding: 0px 5px; white-space: nowrap; border: 1px solid rgb(234, 234, 234); background-color: rgb(248, 248, 248); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;\">+</code>&nbsp;and&nbsp;<code style=\"-webkit-print-color-adjust: exact; margin: 0px 2px; padding: 0px 5px; white-space: nowrap; border: 1px solid rgb(234, 234, 234); background-color: rgb(248, 248, 248); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;\">/</code>&nbsp;characters</li></ul>"
                    ],
                    "guid": "zX<Y`4vR`_",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "What is HATEOAS?",
                        "<h2 class=\"question\" style=\"box-sizing: border-box; font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; line-height: 1.1; color: rgb(51, 51, 51); margin-top: 20px; margin-bottom: 10px; font-size: 30px; background-color: rgb(224, 224, 224);\">What is HATEOAS and why is it important for my REST API?</h2><p style=\"box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 13px; background-color: rgb(224, 224, 224);\">HATEOAS stands for&nbsp;<b style=\"box-sizing: border-box;\">Hypertext As The Engine Of Application State</b>. It means that hypertext should be used to find your way through the API. An example:</p><figure class=\"highlight\" style=\"box-sizing: border-box; margin: 0px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 13px; background-color: rgb(224, 224, 224);\"><pre style=\"box-sizing: border-box; overflow: auto; font-family: monospace, monospace; padding: 6px 10px; margin-top: 0px; margin-bottom: 10px; margin-left: 3em; line-height: 19px; color: white; word-break: break-all; word-wrap: break-word; background-color: rgb(73, 72, 62); border: 1px solid rgb(204, 204, 204); border-radius: 3px;\"><code class=\"language-xml\" data-lang=\"xml\" style=\"box-sizing: border-box; font-family: monospace, monospace; font-size: inherit; padding: 0px; color: inherit; background-color: transparent; border-radius: 0px; white-space: pre-wrap;\">GET /account/12345 HTTP/1.1\n\nHTTP/1.1 200 OK\n<span class=\"cp\" style=\"box-sizing: border-box;\">&lt;?xml version=\"1.0\"?&gt;</span>\n<span class=\"nt\" style=\"box-sizing: border-box;\">&lt;account&gt;</span>\n    <span class=\"nt\" style=\"box-sizing: border-box;\">&lt;account_number&gt;</span>12345<span class=\"nt\" style=\"box-sizing: border-box;\">&lt;/account_number&gt;</span>\n    <span class=\"nt\" style=\"box-sizing: border-box;\">&lt;balance</span> <span class=\"na\" style=\"box-sizing: border-box;\">currency=</span><span class=\"s\" style=\"box-sizing: border-box;\">\"usd\"</span><span class=\"nt\" style=\"box-sizing: border-box;\">&gt;</span>100.00<span class=\"nt\" style=\"box-sizing: border-box;\">&lt;/balance&gt;</span>\n    <span class=\"nt\" style=\"box-sizing: border-box;\">&lt;link</span> <span class=\"na\" style=\"box-sizing: border-box;\">rel=</span><span class=\"s\" style=\"box-sizing: border-box;\">\"deposit\"</span> <span class=\"na\" style=\"box-sizing: border-box;\">href=</span><span class=\"s\" style=\"box-sizing: border-box;\">\"/account/12345/deposit\"</span> <span class=\"nt\" style=\"box-sizing: border-box;\">/&gt;</span>\n    <span class=\"nt\" style=\"box-sizing: border-box;\">&lt;link</span> <span class=\"na\" style=\"box-sizing: border-box;\">rel=</span><span class=\"s\" style=\"box-sizing: border-box;\">\"withdraw\"</span> <span class=\"na\" style=\"box-sizing: border-box;\">href=</span><span class=\"s\" style=\"box-sizing: border-box;\">\"/account/12345/withdraw\"</span> <span class=\"nt\" style=\"box-sizing: border-box;\">/&gt;</span>\n    <span class=\"nt\" style=\"box-sizing: border-box;\">&lt;link</span> <span class=\"na\" style=\"box-sizing: border-box;\">rel=</span><span class=\"s\" style=\"box-sizing: border-box;\">\"transfer\"</span> <span class=\"na\" style=\"box-sizing: border-box;\">href=</span><span class=\"s\" style=\"box-sizing: border-box;\">\"/account/12345/transfer\"</span> <span class=\"nt\" style=\"box-sizing: border-box;\">/&gt;</span>\n    <span class=\"nt\" style=\"box-sizing: border-box;\">&lt;link</span> <span class=\"na\" style=\"box-sizing: border-box;\">rel=</span><span class=\"s\" style=\"box-sizing: border-box;\">\"close\"</span> <span class=\"na\" style=\"box-sizing: border-box;\">href=</span><span class=\"s\" style=\"box-sizing: border-box;\">\"/account/12345/close\"</span> <span class=\"nt\" style=\"box-sizing: border-box;\">/&gt;</span>\n<span class=\"nt\" style=\"box-sizing: border-box;\">&lt;/account&gt;</span></code></pre></figure><p style=\"box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 13px; background-color: rgb(224, 224, 224);\">Apart from the fact that we have 100 dollars (US) in our account, we can see 4 options: deposit more money, withdraw money, transfer money to another account, or close our account. The \"link\"-tags allows us to find out the URLs that are needed for the specified actions. Now, let's suppose we didn't have 100 usd in the bank, but we actually are in the red:</p><figure class=\"highlight\" style=\"box-sizing: border-box; margin: 0px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 13px; background-color: rgb(224, 224, 224);\"><pre style=\"box-sizing: border-box; overflow: auto; font-family: monospace, monospace; padding: 6px 10px; margin-top: 0px; margin-bottom: 10px; margin-left: 3em; line-height: 19px; color: white; word-break: break-all; word-wrap: break-word; background-color: rgb(73, 72, 62); border: 1px solid rgb(204, 204, 204); border-radius: 3px;\"><code class=\"language-xml\" data-lang=\"xml\" style=\"box-sizing: border-box; font-family: monospace, monospace; font-size: inherit; padding: 0px; color: inherit; background-color: transparent; border-radius: 0px; white-space: pre-wrap;\">GET /account/12345 HTTP/1.1\n\nHTTP/1.1 200 OK\n<span class=\"cp\" style=\"box-sizing: border-box;\">&lt;?xml version=\"1.0\"?&gt;</span>\n<span class=\"nt\" style=\"box-sizing: border-box;\">&lt;account&gt;</span>\n    <span class=\"nt\" style=\"box-sizing: border-box;\">&lt;account_number&gt;</span>12345<span class=\"nt\" style=\"box-sizing: border-box;\">&lt;/account_number&gt;</span>\n    <span class=\"nt\" style=\"box-sizing: border-box;\">&lt;balance</span> <span class=\"na\" style=\"box-sizing: border-box;\">currency=</span><span class=\"s\" style=\"box-sizing: border-box;\">\"usd\"</span><span class=\"nt\" style=\"box-sizing: border-box;\">&gt;</span>-25.00<span class=\"nt\" style=\"box-sizing: border-box;\">&lt;/balance&gt;</span>\n    <span class=\"nt\" style=\"box-sizing: border-box;\">&lt;link</span> <span class=\"na\" style=\"box-sizing: border-box;\">rel=</span><span class=\"s\" style=\"box-sizing: border-box;\">\"deposit\"</span> <span class=\"na\" style=\"box-sizing: border-box;\">href=</span><span class=\"s\" style=\"box-sizing: border-box;\">\"/account/12345/deposit\"</span> <span class=\"nt\" style=\"box-sizing: border-box;\">/&gt;</span>\n<span class=\"nt\" style=\"box-sizing: border-box;\">&lt;/account&gt;</span></code></pre></figure><p style=\"box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 13px; background-color: rgb(224, 224, 224);\">Now we are 25 dollars in the red. Do you see that right now we have lost many of our options, and only depositing money is valid? As long as we are in the red, we cannot close our account, nor transfer or withdraw any money from the account. The hypertext is actually telling us what is allowed and what not: HATEOAS</p>"
                    ],
                    "guid": "ILr[&oZl6a",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">RPC and REST calls comparison</h3>",
                        "<table style=\"box-sizing: border-box; border-spacing: 0px; margin-top: 0px; margin-bottom: 16px; display: block; width: 888px; overflow: auto; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><thead style=\"box-sizing: border-box;\"><tr style=\"box-sizing: border-box; border-top: 1px solid rgb(198, 203, 209);\"><th style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">Operation</th><th style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">RPC</th><th style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">REST</th></tr></thead><tbody style=\"box-sizing: border-box;\"><tr style=\"box-sizing: border-box; border-top: 1px solid rgb(198, 203, 209);\"><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">Signup</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\"><span style=\"box-sizing: border-box; font-weight: 600;\">POST</span>&nbsp;/signup</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\"><span style=\"box-sizing: border-box; font-weight: 600;\">POST</span>&nbsp;/persons</td></tr><tr style=\"box-sizing: border-box; background-color: rgb(246, 248, 250); border-top: 1px solid rgb(198, 203, 209);\"><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">Resign</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\"><span style=\"box-sizing: border-box; font-weight: 600;\">POST</span>&nbsp;/resign<br style=\"box-sizing: border-box;\">{<br style=\"box-sizing: border-box;\">\"personid\": \"1234\"<br style=\"box-sizing: border-box;\">}</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\"><span style=\"box-sizing: border-box; font-weight: 600;\">DELETE</span>&nbsp;/persons/1234</td></tr><tr style=\"box-sizing: border-box; border-top: 1px solid rgb(198, 203, 209);\"><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">Read a person</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\"><span style=\"box-sizing: border-box; font-weight: 600;\">GET</span>&nbsp;/readPerson?personid=1234</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\"><span style=\"box-sizing: border-box; font-weight: 600;\">GET</span>&nbsp;/persons/1234</td></tr><tr style=\"box-sizing: border-box; background-color: rgb(246, 248, 250); border-top: 1px solid rgb(198, 203, 209);\"><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">Read a person’s items list</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\"><span style=\"box-sizing: border-box; font-weight: 600;\">GET</span>&nbsp;/readUsersItemsList?personid=1234</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\"><span style=\"box-sizing: border-box; font-weight: 600;\">GET</span>&nbsp;/persons/1234/items</td></tr><tr style=\"box-sizing: border-box; border-top: 1px solid rgb(198, 203, 209);\"><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">Add an item to a person’s items</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\"><span style=\"box-sizing: border-box; font-weight: 600;\">POST</span>&nbsp;/addItemToUsersItemsList<br style=\"box-sizing: border-box;\">{<br style=\"box-sizing: border-box;\">\"personid\": \"1234\";<br style=\"box-sizing: border-box;\">\"itemid\": \"456\"<br style=\"box-sizing: border-box;\">}</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\"><span style=\"box-sizing: border-box; font-weight: 600;\">POST</span>&nbsp;/persons/1234/items<br style=\"box-sizing: border-box;\">{<br style=\"box-sizing: border-box;\">\"itemid\": \"456\"<br style=\"box-sizing: border-box;\">}</td></tr><tr style=\"box-sizing: border-box; background-color: rgb(246, 248, 250); border-top: 1px solid rgb(198, 203, 209);\"><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">Update an item</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\"><span style=\"box-sizing: border-box; font-weight: 600;\">POST</span>&nbsp;/modifyItem<br style=\"box-sizing: border-box;\">{<br style=\"box-sizing: border-box;\">\"itemid\": \"456\";<br style=\"box-sizing: border-box;\">\"key\": \"value\"<br style=\"box-sizing: border-box;\">}</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\"><span style=\"box-sizing: border-box; font-weight: 600;\">PUT</span>&nbsp;/items/456<br style=\"box-sizing: border-box;\">{<br style=\"box-sizing: border-box;\">\"key\": \"value\"<br style=\"box-sizing: border-box;\">}</td></tr><tr style=\"box-sizing: border-box; border-top: 1px solid rgb(198, 203, 209);\"><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\">Delete an item</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\"><span style=\"box-sizing: border-box; font-weight: 600;\">POST</span>&nbsp;/removeItem<br style=\"box-sizing: border-box;\">{<br style=\"box-sizing: border-box;\">\"itemid\": \"456\"<br style=\"box-sizing: border-box;\">}</td><td style=\"box-sizing: border-box; padding: 6px 13px; border: 1px solid rgb(223, 226, 229);\"><span style=\"box-sizing: border-box; font-weight: 600;\">DELETE</span>&nbsp;/items/456</td></tr></tbody></table><p align=\"center\" style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><i style=\"box-sizing: border-box;\"><a href=\"https://apihandyman.io/do-you-really-know-why-you-prefer-rest-over-rpc/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Source: Do you really know why you prefer REST over RPC</a></i></p><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-sources-and-further-reading-rest-and-rpc\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer#sources-and-further-reading-rest-and-rpc\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source(s) and further reading: REST and RPC</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://apihandyman.io/do-you-really-know-why-you-prefer-rest-over-rpc/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Do you really know why you prefer REST over RPC</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://programmers.stackexchange.com/a/181186\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">When are RPC-ish approaches more appropriate than REST?</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://stackoverflow.com/questions/15056878/rest-vs-json-rpc\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">REST vs JSON-RPC</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://etherealbits.com/2012/12/debunking-the-myths-of-rpc-rest/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Debunking the myths of RPC and REST</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://www.quora.com/What-are-the-drawbacks-of-using-RESTful-APIs\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">What are the drawbacks of using REST</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://www.puncsky.com/blog/2016/02/14/crack-the-system-design-interview/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Crack the system design interview</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://code.facebook.com/posts/1468950976659943/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Thrift</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"http://arstechnica.com/civis/viewtopic.php?t=1190508\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Why REST for internal use and not RPC</a></li></ul>"
                    ],
                    "guid": "DeCC5_;mu[",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                }
            ]
        },
        {
            "__type__": "Deck",
            "children": [],
            "crowdanki_uuid": "93743300-caa9-11ec-b4b9-0c96e6db14fa",
            "deck_config_uuid": "93743301-caa9-11ec-a796-0c96e6db14fa",
            "desc": "",
            "dyn": 0,
            "extendNew": 0,
            "extendRev": 0,
            "media_files": [],
            "name": "System Design Exercises",
            "notes": [
                {
                    "__type__": "Note",
                    "fields": [
                        "<h1 style=\"box-sizing: border-box; font-size: 2em; margin-bottom: 16px; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Design Mint.com</h1>",
                        "<p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><em style=\"box-sizing: border-box;\">Note: This document links directly to relevant areas found in the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#index-of-system-design-topics-1\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">system design topics</a>&nbsp;to avoid duplication. Refer to the linked content for general talking points, tradeoffs, and alternatives.</em></p><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-1-outline-use-cases-and-constraints\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#step-1-outline-use-cases-and-constraints\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 1: Outline use cases and constraints</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Gather requirements and scope the problem. Ask questions to clarify use cases and constraints. Discuss assumptions.</p></blockquote><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Without an interviewer to address clarifying questions, we'll define some use cases and constraints.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-use-cases\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#use-cases\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use cases</h3><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-well-scope-the-problem-to-handle-only-the-following-use-cases\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#well-scope-the-problem-to-handle-only-the-following-use-cases\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>We'll scope the problem to handle only the following use cases</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><span style=\"box-sizing: border-box; font-weight: 600;\">User</span>&nbsp;connects to a financial account</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Service</span>&nbsp;extracts transactions from the account<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Updates daily</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Categorizes transactions<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Allows manual category override by the user</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">No automatic re-categorization</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Analyzes monthly spending, by category</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Service</span>&nbsp;recommends a budget<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Allows users to manually set a budget</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Sends notifications when approaching or exceeding budget</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Service</span>&nbsp;has high availability</li></ul><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-out-of-scope\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#out-of-scope\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Out of scope</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Service</span>&nbsp;performs additional logging and analytics</li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-constraints-and-assumptions\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#constraints-and-assumptions\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Constraints and assumptions</h3><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-state-assumptions\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#state-assumptions\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>State assumptions</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Traffic is not evenly distributed</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Automatic daily update of accounts applies only to users active in the past 30 days</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Adding or removing financial accounts is relatively rare</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Budget notifications don't need to be instant</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">10 million users<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">10 budget categories per user = 100 million budget items</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Example categories:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Housing = $1,000</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Food = $200</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Gas = $100</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Sellers are used to determine transaction category<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">50,000 sellers</li></ul></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">30 million financial accounts</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">5 billion transactions per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">500 million read requests per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">10:1 write to read ratio<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Write-heavy, users make transactions daily, but few visit the site daily</li></ul></li></ul><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-calculate-usage\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#calculate-usage\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Calculate usage</h4><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Clarify with your interviewer if you should run back-of-the-envelope usage calculations.</span></p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Size per transaction:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">user_id</code>&nbsp;- 8 bytes</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">created_at</code>&nbsp;- 5 bytes</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">seller</code>&nbsp;- 32 bytes</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">amount</code>&nbsp;- 5 bytes</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Total: ~50 bytes</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">250 GB of new transaction content per month<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">50 bytes per transaction * 5 billion transactions per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">9 TB of new transaction content in 3 years</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Assume most are new transactions instead of updates to existing ones</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">2,000 transactions per second on average</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">200 read requests per second on average</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Handy conversion guide:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">2.5 million seconds per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">1 request per second = 2.5 million requests per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">40 requests per second = 100 million requests per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">400 requests per second = 1 billion requests per month</li></ul><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-2-create-a-high-level-design\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#step-2-create-a-high-level-design\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 2: Create a high level design</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Outline a high level design with all important components.</p></blockquote><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/a1129136225c67ce2a92f4b15a7a27653b6257b1/687474703a2f2f692e696d6775722e636f6d2f45386b6c7242682e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/a1129136225c67ce2a92f4b15a7a27653b6257b1/687474703a2f2f692e696d6775722e636f6d2f45386b6c7242682e706e67\" alt=\"Imgur\" data-canonical-src=\"http://i.imgur.com/E8klrBh.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a></p><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-3-design-core-components\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#step-3-design-core-components\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 3: Design core components</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Dive into details for each core component.</p></blockquote><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-use-case-user-connects-to-a-financial-account\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#use-case-user-connects-to-a-financial-account\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use case: User connects to a financial account</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We could store info on the 10 million users in a&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#relational-database-management-system-rdbms\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">relational database</a>. We should discuss the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#sql-or-nosql\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">use cases and tradeoffs between choosing SQL or NoSQL</a>.</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Client</span>&nbsp;sends a request to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span>, running as a&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#reverse-proxy-web-server\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">reverse proxy</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span>&nbsp;forwards the request to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Accounts API</span>&nbsp;server</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Accounts API</span>&nbsp;server updates the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">SQL Database</span>&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">accounts</code>&nbsp;table with the newly entered account info</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Clarify with your interviewer how much code you are expected to write</span>.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">The&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">accounts</code>&nbsp;table could have the following structure:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">id int NOT NULL AUTO_INCREMENT\ncreated_at datetime NOT NULL\nlast_update datetime NOT NULL\naccount_url varchar(255) NOT NULL\naccount_login varchar(32) NOT NULL\naccount_password_hash char(64) NOT NULL\nuser_id int NOT NULL\nPRIMARY KEY(id)\nFOREIGN KEY(user_id) REFERENCES users(id)\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We'll create an&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#use-good-indices\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">index</a>&nbsp;on&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">id</code>,&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">user_id</code>, and&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">created_at</code>&nbsp;to speed up lookups (log-time instead of scanning the entire table) and to keep the data in memory. Reading 1 MB sequentially from memory takes about 250 microseconds, while reading from SSD takes 4x and from disk takes 80x longer.<span style=\"box-sizing: border-box; font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">1</a></span></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We'll use a public&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview##representational-state-transfer-rest\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><span style=\"box-sizing: border-box; font-weight: 600;\">REST API</span></a>:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">$ curl -X POST --data '{ \"user_id\": \"foo\", \"account_url\": \"bar\", \\\n    \"account_login\": \"baz\", \"account_password\": \"qux\" }' \\\n    https://mint.com/api/v1/account\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">For internal communications, we could use&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#remote-procedure-call-rpc\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Remote Procedure Calls</a>.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Next, the service extracts transactions from the account.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-use-case-service-extracts-transactions-from-the-account\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#use-case-service-extracts-transactions-from-the-account\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use case: Service extracts transactions from the account</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We'll want to extract information from an account in these cases:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">The user first links the account</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The user manually refreshes the account</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Automatically each day for users who have been active in the past 30 days</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Data flow:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Client</span>&nbsp;sends a request to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span>&nbsp;forwards the request to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Accounts API</span>&nbsp;server</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Accounts API</span>&nbsp;server places a job on a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Queue</span>&nbsp;such as Amazon SQS or&nbsp;<a href=\"https://www.rabbitmq.com/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">RabbitMQ</a><ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Extracting transactions could take awhile, we'd probably want to do this&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#asynchronism\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">asynchronously with a queue</a>, although this introduces additional complexity</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Transaction Extraction Service</span>&nbsp;does the following:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Pulls from the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Queue</span>&nbsp;and extracts transactions for the given account from the financial institution, storing the results as raw log files in the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Object Store</span></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Uses the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Category Service</span>&nbsp;to categorize each transaction</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Uses the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Budget Service</span>&nbsp;to calculate aggregate monthly spending by category<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Budget Service</span>&nbsp;uses the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Notification Service</span>&nbsp;to let users know if they are nearing or have exceeded their budget</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Updates the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">SQL Database</span>&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">transactions</code>&nbsp;table with categorized transactions</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Updates the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">SQL Database</span>&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">monthly_spending</code>&nbsp;table with aggregate monthly spending by category</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Notifies the user the transactions have completed through the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Notification Service</span>:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Uses a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Queue</span>&nbsp;(not pictured) to asynchronously send out notifications</li></ul></li></ul></li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">The&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">transactions</code>&nbsp;table could have the following structure:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">id int NOT NULL AUTO_INCREMENT\ncreated_at datetime NOT NULL\nseller varchar(32) NOT NULL\namount decimal NOT NULL\nuser_id int NOT NULL\nPRIMARY KEY(id)\nFOREIGN KEY(user_id) REFERENCES users(id)\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We'll create an&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#use-good-indices\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">index</a>&nbsp;on&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">id</code>,&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">user_id</code>, and&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">created_at</code>.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">The&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">monthly_spending</code>&nbsp;table could have the following structure:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">id int NOT NULL AUTO_INCREMENT\nmonth_year date NOT NULL\ncategory varchar(32)\namount decimal NOT NULL\nuser_id int NOT NULL\nPRIMARY KEY(id)\nFOREIGN KEY(user_id) REFERENCES users(id)\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We'll create an&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#use-good-indices\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">index</a>&nbsp;on&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">id</code>&nbsp;and&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">user_id</code>.</p><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-category-service\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#category-service\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Category service</h4><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">For the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Category Service</span>, we can seed a seller-to-category dictionary with the most popular sellers. If we estimate 50,000 sellers and estimate each entry to take less than 255 bytes, the dictionary would only take about 12 MB of memory.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Clarify with your interviewer how much code you are expected to write</span>.</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">class DefaultCategories(Enum):\n\n    HOUSING = 0\n    FOOD = 1\n    GAS = 2\n    SHOPPING = 3\n    ...\n\nseller_category_map = {}\nseller_category_map['Exxon'] = DefaultCategories.GAS\nseller_category_map['Target'] = DefaultCategories.SHOPPING\n...\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">For sellers not initially seeded in the map, we could use a crowdsourcing effort by evaluating the manual category overrides our users provide. We could use a heap to quickly lookup the top manual override per seller in O(1) time.</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">class Categorizer(object):\n\n    def __init__(self, seller_category_map, self.seller_category_crowd_overrides_map):\n        self.seller_category_map = seller_category_map\n        self.seller_category_crowd_overrides_map = \\\n            seller_category_crowd_overrides_map\n\n    def categorize(self, transaction):\n        if transaction.seller in self.seller_category_map:\n            return self.seller_category_map[transaction.seller]\n        elif transaction.seller in self.seller_category_crowd_overrides_map:\n            self.seller_category_map[transaction.seller] = \\\n                self.seller_category_crowd_overrides_map[transaction.seller].peek_min()\n            return self.seller_category_map[transaction.seller]\n        return None\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Transaction implementation:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">class Transaction(object):\n\n    def __init__(self, created_at, seller, amount):\n        self.timestamp = timestamp\n        self.seller = seller\n        self.amount = amount\n</code></pre><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-use-case-service-recommends-a-budget\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#use-case-service-recommends-a-budget\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use case: Service recommends a budget</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">To start, we could use a generic budget template that allocates category amounts based on income tiers. Using this approach, we would not have to store the 100 million budget items identified in the constraints, only those that the user overrides. If a user overrides a budget category, which we could store the override in the&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">TABLE budget_overrides</code>.</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">class Budget(object):\n\n    def __init__(self, income):\n        self.income = income\n        self.categories_to_budget_map = self.create_budget_template()\n\n    def create_budget_template(self):\n        return {\n            'DefaultCategories.HOUSING': income * .4,\n            'DefaultCategories.FOOD': income * .2\n            'DefaultCategories.GAS': income * .1,\n            'DefaultCategories.SHOPPING': income * .2\n            ...\n        }\n\n    def override_category_budget(self, category, amount):\n        self.categories_to_budget_map[category] = amount\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">For the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Budget Service</span>, we can potentially run SQL queries on the&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">transactions</code>&nbsp;table to generate the&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">monthly_spending</code>&nbsp;aggregate table. The&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">monthly_spending</code>&nbsp;table would likely have much fewer rows than the total 5 billion transactions, since users typically have many transactions per month.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">As an alternative, we can run&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">MapReduce</span>&nbsp;jobs on the raw transaction files to:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Categorize each transaction</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Generate aggregate monthly spending by category</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Running analyses on the transaction files could significantly reduce the load on the database.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We could call the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Budget Service</span>&nbsp;to re-run the analysis if the user updates a category.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Clarify with your interviewer how much code you are expected to write</span>.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Sample log file format, tab delimited:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">user_id   timestamp   seller  amount\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">MapReduce</span>&nbsp;implementation:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">class SpendingByCategory(MRJob):\n\n    def __init__(self, categorizer):\n        self.categorizer = categorizer\n        self.current_year_month = calc_current_year_month()\n        ...\n\n    def calc_current_year_month(self):\n        \"\"\"Return the current year and month.\"\"\"\n        ...\n\n    def extract_year_month(self, timestamp):\n        \"\"\"Return the year and month portions of the timestamp.\"\"\"\n        ...\n\n    def handle_budget_notifications(self, key, total):\n        \"\"\"Call notification API if nearing or exceeded budget.\"\"\"\n        ...\n\n    def mapper(self, _, line):\n        \"\"\"Parse each log line, extract and transform relevant lines.\n\n        Argument line will be of the form:\n\n        user_id   timestamp   seller  amount\n\n        Using the categorizer to convert seller to category,\n        emit key value pairs of the form:\n\n        (user_id, 2016-01, shopping), 25\n        (user_id, 2016-01, shopping), 100\n        (user_id, 2016-01, gas), 50\n        \"\"\"\n        user_id, timestamp, seller, amount = line.split('\\t')\n        category = self.categorizer.categorize(seller)\n        period = self.extract_year_month(timestamp)\n        if period == self.current_year_month:\n            yield (user_id, period, category), amount\n\n    def reducer(self, key, value):\n        \"\"\"Sum values for each key.\n\n        (user_id, 2016-01, shopping), 125\n        (user_id, 2016-01, gas), 50\n        \"\"\"\n        total = sum(values)\n        yield key, sum(values)\n</code></pre><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-4-scale-the-design\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#step-4-scale-the-design\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 4: Scale the design</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Identify and address bottlenecks, given the constraints.</p></blockquote><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/12fea5f9324f74189a9cd983b02239c68615b67e/687474703a2f2f692e696d6775722e636f6d2f563571353776552e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/12fea5f9324f74189a9cd983b02239c68615b67e/687474703a2f2f692e696d6775722e636f6d2f563571353776552e706e67\" alt=\"Imgur\" data-canonical-src=\"http://i.imgur.com/V5q57vU.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Important: Do not simply jump right into the final design from the initial design!</span></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">State you would 1)&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Benchmark/Load Test</span>, 2)&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Profile</span>&nbsp;for bottlenecks 3) address bottlenecks while evaluating alternatives and trade-offs, and 4) repeat. See&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer/blob/master/solutions/system_design/mint\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Design a system that scales to millions of users on AWS</a>&nbsp;as a sample on how to iteratively scale the initial design.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">It's important to discuss what bottlenecks you might encounter with the initial design and how you might address each of them. For example, what issues are addressed by adding a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Load Balancer</span>&nbsp;with multiple&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Servers</span>?&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">CDN</span>?<span style=\"box-sizing: border-box; font-weight: 600;\">Master-Slave Replicas</span>? What are the alternatives and&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Trade-Offs</span>&nbsp;for each?</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We'll introduce some components to complete the design and to address scalability issues. Internal load balancers are not shown to reduce clutter.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><em style=\"box-sizing: border-box;\">To avoid repeating discussions</em>, refer to the following&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">system design topics</a>&nbsp;for main talking points, tradeoffs, and alternatives:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#domain-name-system\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">DNS</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#content-delivery-network\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">CDN</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#load-balancer\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Load balancer</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#horizontal-scaling\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Horizontal scaling</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#reverse-proxy-web-server\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Web server (reverse proxy)</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#application-layer\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">API server (application layer)</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#cache\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Cache</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#relational-database-management-system-rdbms\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Relational database management system (RDBMS)</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#fail-over\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">SQL write master-slave failover</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#master-slave-replication\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Master-slave replication</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#aysnchronism\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Asynchronism</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#consistency-patterns\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Consistency patterns</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#availability-patterns\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Availability patterns</a></li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We'll add an additional use case:&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">User</span>&nbsp;accesses summaries and transactions.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">User sessions, aggregate stats by category, and recent transactions could be placed in a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span>&nbsp;such as Redis or Memcached.</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Client</span>&nbsp;sends a read request to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span>&nbsp;forwards the request to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Read API</span>&nbsp;server<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Static content can be served from the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Object Store</span>&nbsp;such as S3, which is cached on the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">CDN</span></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Read API</span>&nbsp;server does the following:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Checks the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span>&nbsp;for the content<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">If the url is in the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span>, returns the cached contents</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Else<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">If the url is in the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">SQL Database</span>, fetches the contents<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Updates the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span>&nbsp;with the contents</li></ul></li></ul></li></ul></li></ul></li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Refer to&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#when-to-update-the-cache\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">When to update the cache</a>&nbsp;for tradeoffs and alternatives. The approach above describes&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#cache-aside\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">cache-aside</a>.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Instead of keeping the&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">monthly_spending</code>&nbsp;aggregate table in the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">SQL Database</span>, we could create a separate&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Analytics Database</span>&nbsp;using a data warehousing solution such as Amazon Redshift or Google BigQuery.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We might only want to store a month of&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">transactions</code>&nbsp;data in the database, while storing the rest in a data warehouse or in an&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Object Store</span>. An&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Object Store</span>&nbsp;such as Amazon S3 can comfortably handle the constraint of 250 GB of new content per month.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">To address the 2,000&nbsp;<em style=\"box-sizing: border-box;\">average</em>&nbsp;read requests per second (higher at peak), traffic for popular content should be handled by the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span>&nbsp;instead of the database. The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span>&nbsp;is also useful for handling the unevenly distributed traffic and traffic spikes. The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">SQL Read Replicas</span>&nbsp;should be able to handle the cache misses, as long as the replicas are not bogged down with replicating writes.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">200&nbsp;<em style=\"box-sizing: border-box;\">average</em>&nbsp;transaction writes per second (higher at peak) might be tough for a single&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">SQL Write Master-Slave</span>. We might need to employ additional SQL scaling patterns:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#federation\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Federation</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#sharding\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Sharding</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#denormalization\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Denormalization</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#sql-tuning\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">SQL Tuning</a></li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We should also consider moving some data to a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">NoSQL Database</span>.</p><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-additional-talking-points\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#additional-talking-points\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Additional talking points</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Additional topics to dive into, depending on the problem scope and time remaining.</p></blockquote><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-nosql\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#nosql\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>NoSQL</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Key-value store</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Document store</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Wide column store</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Graph database</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">SQL vs NoSQL</a></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-caching\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#caching\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Caching</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Where to cache<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#client-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Client caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#cdn-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">CDN caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#web-server-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Web server caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#database-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Database caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#application-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Application caching</a></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">What to cache<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#caching-at-the-database-query-level\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Caching at the database query level</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#caching-at-the-object-level\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Caching at the object level</a></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">When to update the cache<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#cache-aside\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Cache-aside</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#write-through\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Write-through</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#write-behind-write-back\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Write-behind (write-back)</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#refresh-ahead\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Refresh ahead</a></li></ul></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-asynchronism-and-microservices\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#asynchronism-and-microservices\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Asynchronism and microservices</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Message queues</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Task queues</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Back pressure</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Microservices</a></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-communications\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#communications\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Communications</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Discuss tradeoffs:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">External communication with clients -&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#representational-state-transfer-rest\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">HTTP APIs following REST</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Internal communications -&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#remote-procedure-call-rpc\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">RPC</a></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#service-discovery\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Service discovery</a></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-security\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#security\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Security</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Refer to the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#security\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">security section</a>.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-latency-numbers\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#latency-numbers\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Latency numbers</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">See&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Latency numbers every programmer should know</a>.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-ongoing\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/mint#ongoing\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ongoing</h3><ul style=\"box-sizing: border-box; padding-left: 2em; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; margin-bottom: 0px !important;\"><li style=\"box-sizing: border-box;\">Continue benchmarking and monitoring your system to address bottlenecks as they come up</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Scaling is an iterative process</li></ul>"
                    ],
                    "guid": "J~zM[CT,Et",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h1 style=\"box-sizing: border-box; font-size: 2em; margin-bottom: 16px; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Design Pastebin.com (or Bit.ly)</h1>",
                        "<p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><em style=\"box-sizing: border-box;\">Note: This document links directly to relevant areas found in the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#index-of-system-design-topics-1\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">system design topics</a>&nbsp;to avoid duplication. Refer to the linked content for general talking points, tradeoffs, and alternatives.</em></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Design Bit.ly</span>&nbsp;- is a similar question, except pastebin requires storing the paste contents instead of the original unshortened url.</p><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-1-outline-use-cases-and-constraints\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#step-1-outline-use-cases-and-constraints\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 1: Outline use cases and constraints</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Gather requirements and scope the problem. Ask questions to clarify use cases and constraints. Discuss assumptions.</p></blockquote><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Without an interviewer to address clarifying questions, we'll define some use cases and constraints.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-use-cases\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#use-cases\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use cases</h3><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-well-scope-the-problem-to-handle-only-the-following-use-cases\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#well-scope-the-problem-to-handle-only-the-following-use-cases\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>We'll scope the problem to handle only the following use cases</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><span style=\"box-sizing: border-box; font-weight: 600;\">User</span>&nbsp;enters a block of text and gets a randomly generated link<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Expiration<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Default setting does not expire</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Can optionally set a timed expiration</li></ul></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">User</span>&nbsp;enters a paste's url and views the contents</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">User</span>&nbsp;is anonymous</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Service</span>&nbsp;tracks analytics of pages<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Monthly visit stats</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Service</span>&nbsp;deletes expired pastes</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Service</span>&nbsp;has high availability</li></ul><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-out-of-scope\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#out-of-scope\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Out of scope</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><span style=\"box-sizing: border-box; font-weight: 600;\">User</span>&nbsp;registers for an account<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><span style=\"box-sizing: border-box; font-weight: 600;\">User</span>&nbsp;verifies email</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">User</span>&nbsp;logs into a registered account<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><span style=\"box-sizing: border-box; font-weight: 600;\">User</span>&nbsp;edits the document</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">User</span>&nbsp;can set visibility</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">User</span>&nbsp;can set the shortlink</li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-constraints-and-assumptions\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#constraints-and-assumptions\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Constraints and assumptions</h3><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-state-assumptions\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#state-assumptions\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>State assumptions</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Traffic is not evenly distributed</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Following a short link should be fast</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Pastes are text only</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Page view analytics do not need to be realtime</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">10 million users</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">10 million paste writes per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">100 million paste reads per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">10:1 read to write ratio</li></ul><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-calculate-usage\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#calculate-usage\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Calculate usage</h4><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Clarify with your interviewer if you should run back-of-the-envelope usage calculations.</span></p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Size per paste<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">1 KB content per paste</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">shortlink</code>&nbsp;- 7 bytes</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">expiration_length_in_minutes</code>&nbsp;- 4 bytes</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">created_at</code>&nbsp;- 5 bytes</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">paste_path</code>&nbsp;- 255 bytes</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">total = ~1.27 KB</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">12.7 GB of new paste content per month<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">1.27 KB per paste * 10 million pastes per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">~450 GB of new paste content in 3 years</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">360 million shortlinks in 3 years</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Assume most are new pastes instead of updates to existing ones</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">4 paste writes per second on average</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">40 read requests per second on average</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Handy conversion guide:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">2.5 million seconds per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">1 request per second = 2.5 million requests per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">40 requests per second = 100 million requests per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">400 requests per second = 1 billion requests per month</li></ul><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-2-create-a-high-level-design\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#step-2-create-a-high-level-design\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 2: Create a high level design</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Outline a high level design with all important components.</p></blockquote><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/2e0371e591b8311e36f5f5fa6ae18711f252b1f8/687474703a2f2f692e696d6775722e636f6d2f424b73426e6d472e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/2e0371e591b8311e36f5f5fa6ae18711f252b1f8/687474703a2f2f692e696d6775722e636f6d2f424b73426e6d472e706e67\" alt=\"Imgur\" data-canonical-src=\"http://i.imgur.com/BKsBnmG.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a></p><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-3-design-core-components\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#step-3-design-core-components\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 3: Design core components</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Dive into details for each core component.</p></blockquote><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-use-case-user-enters-a-block-of-text-and-gets-a-randomly-generated-link\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#use-case-user-enters-a-block-of-text-and-gets-a-randomly-generated-link\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use case: User enters a block of text and gets a randomly generated link</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We could use a&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#relational-database-management-system-rdbms\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">relational database</a>&nbsp;as a large hash table, mapping the generated url to a file server and path containing the paste file.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Instead of managing a file server, we could use a managed&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Object Store</span>&nbsp;such as Amazon S3 or a&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#document-store\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">NoSQL document store</a>.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">An alternative to a relational database acting as a large hash table, we could use a&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#key-value-store\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">NoSQL key-value store</a>. We should discuss the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#sql-or-nosql\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">tradeoffs between choosing SQL or NoSQL</a>. The following discussion uses the relational database approach.</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Client</span>&nbsp;sends a create paste request to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span>, running as a&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#reverse-proxy-web-server\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">reverse proxy</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span>&nbsp;forwards the request to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Write API</span>&nbsp;server</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Write API</span>&nbsp;server does does the following:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Generates a unique url<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Checks if the url is unique by looking at the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">SQL Database</span>&nbsp;for a duplicate</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">If the url is not unique, it generates another url</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">If we supported a custom url, we could use the user-supplied (also check for a duplicate)</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Saves to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">SQL Database</span>&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">pastes</code>&nbsp;table</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Saves the paste data to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Object Store</span></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Returns the url</li></ul></li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Clarify with your interviewer how much code you are expected to write</span>.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">The&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">pastes</code>&nbsp;table could have the following structure:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">shortlink char(7) NOT NULL\nexpiration_length_in_minutes int NOT NULL\ncreated_at datetime NOT NULL\npaste_path varchar(255) NOT NULL\nPRIMARY KEY(shortlink)\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We'll create an&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#use-good-indices\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">index</a>&nbsp;on&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">shortlink</code>&nbsp;and&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">created_at</code>&nbsp;to speed up lookups (log-time instead of scanning the entire table) and to keep the data in memory. Reading 1 MB sequentially from memory takes about 250 microseconds, while reading from SSD takes 4x and from disk takes 80x longer.<span style=\"box-sizing: border-box; font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">1</a></span></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">To generate the unique url, we could:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Take the&nbsp;<a href=\"https://en.wikipedia.org/wiki/MD5\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><span style=\"box-sizing: border-box; font-weight: 600;\">MD5</span></a>&nbsp;hash of the user's ip_address + timestamp<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">MD5 is a widely used hashing function that produces a 128-bit hash value</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">MD5 is uniformly distributed</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Alternatively, we could also take the MD5 hash of randomly-generated data</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://www.kerstner.at/2012/07/shortening-strings-using-base-62-encoding/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><span style=\"box-sizing: border-box; font-weight: 600;\">Base 62</span></a>&nbsp;encode the MD5 hash<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Base 62 encodes to&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">[a-zA-Z0-9]</code>&nbsp;which works well for urls, eliminating the need for escaping special characters</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">There is only one hash result for the original input and and Base 62 is deterministic (no randomness involved)</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Base 64 is another popular encoding but provides issues for urls because of the additional&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">+</code>&nbsp;and&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">/</code>characters</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The following&nbsp;<a href=\"http://stackoverflow.com/questions/742013/how-to-code-a-url-shortener\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Base 62 pseudocode</a>&nbsp;runs in O(k) time where k is the number of digits = 7:</li></ul></li></ul><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">def base_encode(num, base=62):\n    digits = []\n    while num &gt; 0\n      remainder = modulo(num, base)\n      digits.push(remainder)\n      num = divide(num, base)\n    digits = digits.reverse\n</code></pre><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Take the first 7 characters of the output, which results in 62^7 possible values and should be sufficient to handle our constraint of 360 million shortlinks in 3 years:</li></ul><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">url = base_encode(md5(ip_address+timestamp))[:URL_LENGTH]\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We'll use a public&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview##representational-state-transfer-rest\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><span style=\"box-sizing: border-box; font-weight: 600;\">REST API</span></a>:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">$ curl -X POST --data '{ \"expiration_length_in_minutes\": \"60\", \\\n    \"paste_contents\": \"Hello World!\" }' https://pastebin.com/api/v1/paste\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Response:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">{\n    \"shortlink\": \"foobar\"\n}\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">For internal communications, we could use&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#remote-procedure-call-rpc\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Remote Procedure Calls</a>.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-use-case-user-enters-a-pastes-url-and-views-the-contents\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#use-case-user-enters-a-pastes-url-and-views-the-contents\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use case: User enters a paste's url and views the contents</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Client</span>&nbsp;sends a get paste request to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span>&nbsp;forwards the request to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Read API</span>&nbsp;server</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Read API</span>&nbsp;server does the following:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Checks the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">SQL Database</span>&nbsp;for the generated url<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">If the url is in the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">SQL Database</span>, fetch the paste contents from the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Object Store</span></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Else, return an error message for the user</li></ul></li></ul></li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">REST API:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">$ curl https://pastebin.com/api/v1/paste?shortlink=foobar\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Response:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">{\n    \"paste_contents\": \"Hello World\"\n    \"created_at\": \"YYYY-MM-DD HH:MM:SS\"\n    \"expiration_length_in_minutes\": \"60\"\n}\n</code></pre><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-use-case-service-tracks-analytics-of-pages\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#use-case-service-tracks-analytics-of-pages\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use case: Service tracks analytics of pages</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Since realtime analytics are not a requirement, we could simply&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">MapReduce</span>&nbsp;the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span>&nbsp;logs to generate hit counts.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Clarify with your interviewer how much code you are expected to write</span>.</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">class HitCounts(MRJob):\n\n    def extract_url(self, line):\n        \"\"\"Extract the generated url from the log line.\"\"\"\n        ...\n\n    def extract_year_month(self, line):\n        \"\"\"Return the year and month portions of the timestamp.\"\"\"\n        ...\n\n    def mapper(self, _, line):\n        \"\"\"Parse each log line, extract and transform relevant lines.\n\n        Emit key value pairs of the form:\n\n        (2016-01, url0), 1\n        (2016-01, url0), 1\n        (2016-01, url1), 1\n        \"\"\"\n        url = self.extract_url(line)\n        period = self.extract_year_month(line)\n        yield (period, url), 1\n\n    def reducer(self, key, value):\n        \"\"\"Sum values for each key.\n\n        (2016-01, url0), 2\n        (2016-01, url1), 1\n        \"\"\"\n        yield key, sum(values)\n</code></pre><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-use-case-service-deletes-expired-pastes\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#use-case-service-deletes-expired-pastes\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use case: Service deletes expired pastes</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">To delete expired pastes, we could just scan the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">SQL Database</span>&nbsp;for all entries whose expiration timestamp are older than the current timestamp. All expired entries would then be deleted (or marked as expired) from the table.</p><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-4-scale-the-design\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#step-4-scale-the-design\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 4: Scale the design</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Identify and address bottlenecks, given the constraints.</p></blockquote><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/4aee2d26ebedc20e7fa07a2c30780e332fa29f2c/687474703a2f2f692e696d6775722e636f6d2f346564584730542e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/4aee2d26ebedc20e7fa07a2c30780e332fa29f2c/687474703a2f2f692e696d6775722e636f6d2f346564584730542e706e67\" alt=\"Imgur\" data-canonical-src=\"http://i.imgur.com/4edXG0T.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Important: Do not simply jump right into the final design from the initial design!</span></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">State you would do this iteratively: 1)&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Benchmark/Load Test</span>, 2)&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Profile</span>&nbsp;for bottlenecks 3) address bottlenecks while evaluating alternatives and trade-offs, and 4) repeat. See&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer/blob/master/solutions/system_design/pastebin\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Design a system that scales to millions of users on AWS</a>&nbsp;as a sample on how to iteratively scale the initial design.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">It's important to discuss what bottlenecks you might encounter with the initial design and how you might address each of them. For example, what issues are addressed by adding a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Load Balancer</span>&nbsp;with multiple&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Servers</span>?&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">CDN</span>?<span style=\"box-sizing: border-box; font-weight: 600;\">Master-Slave Replicas</span>? What are the alternatives and&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Trade-Offs</span>&nbsp;for each?</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We'll introduce some components to complete the design and to address scalability issues. Internal load balancers are not shown to reduce clutter.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><em style=\"box-sizing: border-box;\">To avoid repeating discussions</em>, refer to the following&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">system design topics</a>&nbsp;for main talking points, tradeoffs, and alternatives:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#domain-name-system\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">DNS</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#content-delivery-network\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">CDN</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#load-balancer\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Load balancer</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#horizontal-scaling\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Horizontal scaling</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#reverse-proxy-web-server\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Web server (reverse proxy)</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#application-layer\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">API server (application layer)</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#cache\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Cache</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#relational-database-management-system-rdbms\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Relational database management system (RDBMS)</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#fail-over\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">SQL write master-slave failover</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#master-slave-replication\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Master-slave replication</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#consistency-patterns\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Consistency patterns</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#availability-patterns\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Availability patterns</a></li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Analytics Database</span>&nbsp;could use a data warehousing solution such as Amazon Redshift or Google BigQuery.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">An&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Object Store</span>&nbsp;such as Amazon S3 can comfortably handle the constraint of 12.7 GB of new content per month.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">To address the 40&nbsp;<em style=\"box-sizing: border-box;\">average</em>&nbsp;read requests per second (higher at peak), traffic for popular content should be handled by the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span>&nbsp;instead of the database. The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span>&nbsp;is also useful for handling the unevenly distributed traffic and traffic spikes. The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">SQL Read Replicas</span>&nbsp;should be able to handle the cache misses, as long as the replicas are not bogged down with replicating writes.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">4&nbsp;<em style=\"box-sizing: border-box;\">average</em>&nbsp;paste writes per second (with higher at peak) should be do-able for a single&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">SQL Write Master-Slave</span>. Otherwise, we'll need to employ additional SQL scaling patterns:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#federation\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Federation</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#sharding\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Sharding</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#denormalization\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Denormalization</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#sql-tuning\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">SQL Tuning</a></li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We should also consider moving some data to a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">NoSQL Database</span>.</p><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-additional-talking-points\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#additional-talking-points\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Additional talking points</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Additional topics to dive into, depending on the problem scope and time remaining.</p></blockquote><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-nosql\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#nosql\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>NoSQL</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Key-value store</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Document store</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Wide column store</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Graph database</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">SQL vs NoSQL</a></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-caching\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#caching\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Caching</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Where to cache<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#client-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Client caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#cdn-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">CDN caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#web-server-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Web server caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#database-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Database caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#application-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Application caching</a></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">What to cache<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#caching-at-the-database-query-level\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Caching at the database query level</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#caching-at-the-object-level\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Caching at the object level</a></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">When to update the cache<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#cache-aside\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Cache-aside</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#write-through\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Write-through</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#write-behind-write-back\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Write-behind (write-back)</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#refresh-ahead\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Refresh ahead</a></li></ul></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-asynchronism-and-microservices\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#asynchronism-and-microservices\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Asynchronism and microservices</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Message queues</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Task queues</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Back pressure</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Microservices</a></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-communications\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#communications\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Communications</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Discuss tradeoffs:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">External communication with clients -&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#representational-state-transfer-rest\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">HTTP APIs following REST</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Internal communications -&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#remote-procedure-call-rpc\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">RPC</a></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#service-discovery\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Service discovery</a></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-security\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#security\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Security</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Refer to the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#security\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">security section</a>.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-latency-numbers\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#latency-numbers\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Latency numbers</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">See&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Latency numbers every programmer should know</a>.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-ongoing\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/pastebin#ongoing\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ongoing</h3><ul style=\"box-sizing: border-box; padding-left: 2em; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; margin-bottom: 0px !important;\"><li style=\"box-sizing: border-box;\">Continue benchmarking and monitoring your system to address bottlenecks as they come up</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Scaling is an iterative process</li></ul>"
                    ],
                    "guid": "7g9`O%:yM",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h1 style=\"box-sizing: border-box; font-size: 2em; margin-bottom: 16px; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Design Amazon's sales rank by category feature</h1>",
                        "<p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><em style=\"box-sizing: border-box;\">Note: This document links directly to relevant areas found in the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#index-of-system-design-topics-1\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">system design topics</a>&nbsp;to avoid duplication. Refer to the linked content for general talking points, tradeoffs, and alternatives.</em></p><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-1-outline-use-cases-and-constraints\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#step-1-outline-use-cases-and-constraints\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 1: Outline use cases and constraints</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Gather requirements and scope the problem. Ask questions to clarify use cases and constraints. Discuss assumptions.</p></blockquote><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Without an interviewer to address clarifying questions, we'll define some use cases and constraints.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-use-cases\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#use-cases\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use cases</h3><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-well-scope-the-problem-to-handle-only-the-following-use-case\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#well-scope-the-problem-to-handle-only-the-following-use-case\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>We'll scope the problem to handle only the following use case</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Service</span>&nbsp;calculates the past week's most popular products by category</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">User</span>&nbsp;views the past week's most popular products by category</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Service</span>&nbsp;has high availability</li></ul><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-out-of-scope\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#out-of-scope\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Out of scope</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">The general e-commerce site<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Design components only for calculating sales rank</li></ul></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-constraints-and-assumptions\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#constraints-and-assumptions\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Constraints and assumptions</h3><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-state-assumptions\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#state-assumptions\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>State assumptions</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Traffic is not evenly distributed</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Items can be in multiple categories</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Items cannot change categories</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">There are no subcategories ie&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">foo/bar/baz</code></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Results must be updated hourly<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">More popular products might need to be updated more frequently</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">10 million products</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">1000 categories</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">1 billion transactions per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">100 billion read requests per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">100:1 read to write ratio</li></ul><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-calculate-usage\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#calculate-usage\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Calculate usage</h4><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Clarify with your interviewer if you should run back-of-the-envelope usage calculations.</span></p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Size per transaction:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">created_at</code>&nbsp;- 5 bytes</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">product_id</code>&nbsp;- 8 bytes</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">category_id</code>&nbsp;- 4 bytes</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">seller_id</code>&nbsp;- 8 bytes</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">buyer_id</code>&nbsp;- 8 bytes</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">quantity</code>&nbsp;- 4 bytes</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">total_price</code>&nbsp;- 5 bytes</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Total: ~40 bytes</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">40 GB of new transaction content per month<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">40 bytes per transaction * 1 billion transactions per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">1.44 TB of new transaction content in 3 years</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Assume most are new transactions instead of updates to existing ones</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">400 transactions per second on average</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">40,000 read requests per second on average</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Handy conversion guide:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">2.5 million seconds per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">1 request per second = 2.5 million requests per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">40 requests per second = 100 million requests per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">400 requests per second = 1 billion requests per month</li></ul><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-2-create-a-high-level-design\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#step-2-create-a-high-level-design\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 2: Create a high level design</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Outline a high level design with all important components.</p></blockquote><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/4dde26cbd75416ff93313d00ac6d7c1e4200064a/687474703a2f2f692e696d6775722e636f6d2f76774d613151752e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/4dde26cbd75416ff93313d00ac6d7c1e4200064a/687474703a2f2f692e696d6775722e636f6d2f76774d613151752e706e67\" alt=\"Imgur\" data-canonical-src=\"http://i.imgur.com/vwMa1Qu.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a></p><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-3-design-core-components\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#step-3-design-core-components\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 3: Design core components</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Dive into details for each core component.</p></blockquote><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-use-case-service-calculates-the-past-weeks-most-popular-products-by-category\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#use-case-service-calculates-the-past-weeks-most-popular-products-by-category\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use case: Service calculates the past week's most popular products by category</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We could store the raw&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Sales API</span>&nbsp;server log files on a managed&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Object Store</span>&nbsp;such as Amazon S3, rather than managing our own distributed file system.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Clarify with your interviewer how much code you are expected to write</span>.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We'll assume this is a sample log entry, tab delimited:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">timestamp   product_id  category_id    qty     total_price   seller_id    buyer_id\nt1          product1    category1      2       20.00         1            1\nt2          product1    category2      2       20.00         2            2\nt2          product1    category2      1       10.00         2            3\nt3          product2    category1      3        7.00         3            4\nt4          product3    category2      7        2.00         4            5\nt5          product4    category1      1        5.00         5            6\n...\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Sales Rank Service</span>&nbsp;could use&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">MapReduce</span>, using the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Sales API</span>&nbsp;server log files as input and writing the results to an aggregate table&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">sales_rank</code>&nbsp;in a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">SQL Database</span>. We should discuss the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#sql-or-nosql\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">use cases and tradeoffs between choosing SQL or NoSQL</a>.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We'll use a multi-step&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">MapReduce</span>:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Step 1</span>&nbsp;- Transform the data to&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">(category, product_id), sum(quantity)</code></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Step 2</span>&nbsp;- Perform a distributed sort</li></ul><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">class SalesRanker(MRJob):\n\n    def within_past_week(self, timestamp):\n        \"\"\"Return True if timestamp is within past week, False otherwise.\"\"\"\n        ...\n\n    def mapper(self, _ line):\n        \"\"\"Parse each log line, extract and transform relevant lines.\n\n        Emit key value pairs of the form:\n\n        (category1, product1), 2\n        (category2, product1), 2\n        (category2, product1), 1\n        (category1, product2), 3\n        (category2, product3), 7\n        (category1, product4), 1\n        \"\"\"\n        timestamp, product_id, category_id, quantity, total_price, seller_id, \\\n            buyer_id = line.split('\\t')\n        if self.within_past_week(timestamp):\n            yield (category_id, product_id), quantity\n\n    def reducer(self, key, value):\n        \"\"\"Sum values for each key.\n\n        (category1, product1), 2\n        (category2, product1), 3\n        (category1, product2), 3\n        (category2, product3), 7\n        (category1, product4), 1\n        \"\"\"\n        yield key, sum(values)\n\n    def mapper_sort(self, key, value):\n        \"\"\"Construct key to ensure proper sorting.\n\n        Transform key and value to the form:\n\n        (category1, 2), product1\n        (category2, 3), product1\n        (category1, 3), product2\n        (category2, 7), product3\n        (category1, 1), product4\n\n        The shuffle/sort step of MapReduce will then do a\n        distributed sort on the keys, resulting in:\n\n        (category1, 1), product4\n        (category1, 2), product1\n        (category1, 3), product2\n        (category2, 3), product1\n        (category2, 7), product3\n        \"\"\"\n        category_id, product_id = key\n        quantity = value\n        yield (category_id, quantity), product_id\n\n    def reducer_identity(self, key, value):\n        yield key, value\n\n    def steps(self):\n        \"\"\"Run the map and reduce steps.\"\"\"\n        return [\n            self.mr(mapper=self.mapper,\n                    reducer=self.reducer),\n            self.mr(mapper=self.mapper_sort,\n                    reducer=self.reducer_identity),\n        ]\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">The result would be the following sorted list, which we could insert into the&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">sales_rank</code>&nbsp;table:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">(category1, 1), product4\n(category1, 2), product1\n(category1, 3), product2\n(category2, 3), product1\n(category2, 7), product3\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">The&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">sales_rank</code>&nbsp;table could have the following structure:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">id int NOT NULL AUTO_INCREMENT\ncategory_id int NOT NULL\ntotal_sold int NOT NULL\nproduct_id int NOT NULL\nPRIMARY KEY(id)\nFOREIGN KEY(category_id) REFERENCES Categories(id)\nFOREIGN KEY(product_id) REFERENCES Products(id)\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We'll create an&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#use-good-indices\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">index</a>&nbsp;on&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">id</code>,&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">category_id</code>, and&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">product_id</code>&nbsp;to speed up lookups (log-time instead of scanning the entire table) and to keep the data in memory. Reading 1 MB sequentially from memory takes about 250 microseconds, while reading from SSD takes 4x and from disk takes 80x longer.<span style=\"box-sizing: border-box; font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">1</a></span></p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-use-case-user-views-the-past-weeks-most-popular-products-by-category\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#use-case-user-views-the-past-weeks-most-popular-products-by-category\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use case: User views the past week's most popular products by category</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Client</span>&nbsp;sends a request to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span>, running as a&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#reverse-proxy-web-server\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">reverse proxy</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span>&nbsp;forwards the request to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Read API</span>&nbsp;server</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Read API</span>&nbsp;server reads from the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">SQL Database</span>&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">sales_rank</code>&nbsp;table</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We'll use a public&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview##representational-state-transfer-rest\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><span style=\"box-sizing: border-box; font-weight: 600;\">REST API</span></a>:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">$ curl https://amazon.com/api/v1/popular?category_id=1234\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Response:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">{\n    \"id\": \"100\",\n    \"category_id\": \"1234\",\n    \"total_sold\": \"100000\",\n    \"product_id\": \"50\",\n},\n{\n    \"id\": \"53\",\n    \"category_id\": \"1234\",\n    \"total_sold\": \"90000\",\n    \"product_id\": \"200\",\n},\n{\n    \"id\": \"75\",\n    \"category_id\": \"1234\",\n    \"total_sold\": \"80000\",\n    \"product_id\": \"3\",\n},\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">For internal communications, we could use&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#remote-procedure-call-rpc\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Remote Procedure Calls</a>.</p><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-4-scale-the-design\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#step-4-scale-the-design\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 4: Scale the design</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Identify and address bottlenecks, given the constraints.</p></blockquote><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/a56f5600f7ae29dc0c2e436b8e4e4b55c44d6894/687474703a2f2f692e696d6775722e636f6d2f4d7a45785030362e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/a56f5600f7ae29dc0c2e436b8e4e4b55c44d6894/687474703a2f2f692e696d6775722e636f6d2f4d7a45785030362e706e67\" alt=\"Imgur\" data-canonical-src=\"http://i.imgur.com/MzExP06.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Important: Do not simply jump right into the final design from the initial design!</span></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">State you would 1)&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Benchmark/Load Test</span>, 2)&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Profile</span>&nbsp;for bottlenecks 3) address bottlenecks while evaluating alternatives and trade-offs, and 4) repeat. See&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer/blob/master/solutions/system_design/sales_rank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Design a system that scales to millions of users on AWS</a>&nbsp;as a sample on how to iteratively scale the initial design.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">It's important to discuss what bottlenecks you might encounter with the initial design and how you might address each of them. For example, what issues are addressed by adding a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Load Balancer</span>&nbsp;with multiple&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Servers</span>?&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">CDN</span>?<span style=\"box-sizing: border-box; font-weight: 600;\">Master-Slave Replicas</span>? What are the alternatives and&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Trade-Offs</span>&nbsp;for each?</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We'll introduce some components to complete the design and to address scalability issues. Internal load balancers are not shown to reduce clutter.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><em style=\"box-sizing: border-box;\">To avoid repeating discussions</em>, refer to the following&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">system design topics</a>&nbsp;for main talking points, tradeoffs, and alternatives:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#domain-name-system\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">DNS</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#content-delivery-network\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">CDN</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#load-balancer\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Load balancer</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#horizontal-scaling\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Horizontal scaling</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#reverse-proxy-web-server\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Web server (reverse proxy)</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#application-layer\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">API server (application layer)</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#cache\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Cache</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#relational-database-management-system-rdbms\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Relational database management system (RDBMS)</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#fail-over\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">SQL write master-slave failover</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#master-slave-replication\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Master-slave replication</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#consistency-patterns\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Consistency patterns</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#availability-patterns\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Availability patterns</a></li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Analytics Database</span>&nbsp;could use a data warehousing solution such as Amazon Redshift or Google BigQuery.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We might only want to store a limited time period of data in the database, while storing the rest in a data warehouse or in an&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Object Store</span>. An&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Object Store</span>&nbsp;such as Amazon S3 can comfortably handle the constraint of 40 GB of new content per month.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">To address the 40,000&nbsp;<em style=\"box-sizing: border-box;\">average</em>&nbsp;read requests per second (higher at peak), traffic for popular content (and their sales rank) should be handled by the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span>&nbsp;instead of the database. The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span>&nbsp;is also useful for handling the unevenly distributed traffic and traffic spikes. With the large volume of reads, the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">SQL Read Replicas</span>&nbsp;might not be able to handle the cache misses. We'll probably need to employ additional SQL scaling patterns.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">400&nbsp;<em style=\"box-sizing: border-box;\">average</em>&nbsp;writes per second (higher at peak) might be tough for a single&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">SQL Write Master-Slave</span>, also pointing to a need for additional scaling techniques.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">SQL scaling patterns include:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#federation\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Federation</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#sharding\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Sharding</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#denormalization\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Denormalization</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#sql-tuning\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">SQL Tuning</a></li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We should also consider moving some data to a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">NoSQL Database</span>.</p><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-additional-talking-points\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#additional-talking-points\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Additional talking points</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Additional topics to dive into, depending on the problem scope and time remaining.</p></blockquote><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-nosql\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#nosql\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>NoSQL</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Key-value store</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Document store</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Wide column store</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Graph database</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">SQL vs NoSQL</a></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-caching\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#caching\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Caching</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Where to cache<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#client-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Client caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#cdn-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">CDN caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#web-server-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Web server caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#database-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Database caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#application-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Application caching</a></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">What to cache<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#caching-at-the-database-query-level\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Caching at the database query level</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#caching-at-the-object-level\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Caching at the object level</a></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">When to update the cache<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#cache-aside\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Cache-aside</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#write-through\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Write-through</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#write-behind-write-back\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Write-behind (write-back)</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#refresh-ahead\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Refresh ahead</a></li></ul></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-asynchronism-and-microservices\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#asynchronism-and-microservices\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Asynchronism and microservices</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Message queues</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Task queues</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Back pressure</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Microservices</a></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-communications\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#communications\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Communications</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Discuss tradeoffs:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">External communication with clients -&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#representational-state-transfer-rest\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">HTTP APIs following REST</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Internal communications -&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#remote-procedure-call-rpc\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">RPC</a></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#service-discovery\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Service discovery</a></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-security\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#security\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Security</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Refer to the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#security\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">security section</a>.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-latency-numbers\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#latency-numbers\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Latency numbers</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">See&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Latency numbers every programmer should know</a>.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-ongoing\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/sales_rank#ongoing\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ongoing</h3><ul style=\"box-sizing: border-box; padding-left: 2em; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; margin-bottom: 0px !important;\"><li style=\"box-sizing: border-box;\">Continue benchmarking and monitoring your system to address bottlenecks as they come up</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Scaling is an iterative process</li></ul>"
                    ],
                    "guid": "GpJE!Ga(o?",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h1 style=\"box-sizing: border-box; font-size: 2em; margin-bottom: 16px; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Design a web crawler</h1>",
                        "<p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><em style=\"box-sizing: border-box;\">Note: This document links directly to relevant areas found in the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#index-of-system-design-topics-1\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">system design topics</a>&nbsp;to avoid duplication. Refer to the linked content for general talking points, tradeoffs, and alternatives.</em></p><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-1-outline-use-cases-and-constraints\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#step-1-outline-use-cases-and-constraints\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 1: Outline use cases and constraints</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Gather requirements and scope the problem. Ask questions to clarify use cases and constraints. Discuss assumptions.</p></blockquote><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Without an interviewer to address clarifying questions, we'll define some use cases and constraints.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-use-cases\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#use-cases\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use cases</h3><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-well-scope-the-problem-to-handle-only-the-following-use-cases\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#well-scope-the-problem-to-handle-only-the-following-use-cases\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>We'll scope the problem to handle only the following use cases</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Service</span>&nbsp;crawls a list of urls:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Generates reverse index of words to pages containing the search terms</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Generates titles and snippets for pages<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Title and snippets are static, they do not change based on search query</li></ul></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">User</span>&nbsp;inputs a search term and sees a list of relevant pages with titles and snippets the crawler generated<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Only sketch high level components and interactions for this use case, no need to go into depth</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Service</span>&nbsp;has high availability</li></ul><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-out-of-scope\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#out-of-scope\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Out of scope</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Search analytics</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Personalized search results</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Page rank</li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-constraints-and-assumptions\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#constraints-and-assumptions\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Constraints and assumptions</h3><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-state-assumptions\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#state-assumptions\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>State assumptions</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Traffic is not evenly distributed<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Some searches are very popular, while others are only executed once</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Support only anonymous users</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Generating search results should be fast</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The web crawler should not get stuck in an infinite loop<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">We get stuck in an infinite loop if the graph contains a cycle</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">1 billion links to crawl<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Pages need to be crawled regularly to ensure freshness</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Average refresh rate of about once per week, more frequent for popular sites<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">4 billion links crawled each month</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Average stored size per web page: 500 KB<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">For simplicity, count changes the same as new pages</li></ul></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">100 billion searches per month</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Exercise the use of more traditional systems - don't use existing systems such as&nbsp;<a href=\"http://lucene.apache.org/solr/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">solr</a>&nbsp;or&nbsp;<a href=\"http://nutch.apache.org/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">nutch</a>.</p><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-calculate-usage\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#calculate-usage\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Calculate usage</h4><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Clarify with your interviewer if you should run back-of-the-envelope usage calculations.</span></p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">2 PB of stored page content per month<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">500 KB per page * 4 billion links crawled per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">72 PB of stored page content in 3 years</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">1,600 write requests per second</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">40,000 search requests per second</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Handy conversion guide:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">2.5 million seconds per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">1 request per second = 2.5 million requests per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">40 requests per second = 100 million requests per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">400 requests per second = 1 billion requests per month</li></ul><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-2-create-a-high-level-design\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#step-2-create-a-high-level-design\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 2: Create a high level design</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Outline a high level design with all important components.</p></blockquote><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/379e7661ccfd4303985ca8b90f1ce7e9e664d3ab/687474703a2f2f692e696d6775722e636f6d2f786a64414155762e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/379e7661ccfd4303985ca8b90f1ce7e9e664d3ab/687474703a2f2f692e696d6775722e636f6d2f786a64414155762e706e67\" alt=\"Imgur\" data-canonical-src=\"http://i.imgur.com/xjdAAUv.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a></p><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-3-design-core-components\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#step-3-design-core-components\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 3: Design core components</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Dive into details for each core component.</p></blockquote><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-use-case-service-crawls-a-list-of-urls\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#use-case-service-crawls-a-list-of-urls\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use case: Service crawls a list of urls</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We'll assume we have an initial list of&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">links_to_crawl</code>&nbsp;ranked initially based on overall site popularity. If this is not a reasonable assumption, we can seed the crawler with popular sites that link to outside content such as&nbsp;<a href=\"https://www.yahoo.com/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Yahoo</a>,&nbsp;<a href=\"http://www.dmoz.org/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">DMOZ</a>, etc</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We'll use a table&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">crawled_links</code>&nbsp;to store processed links and their page signatures.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We could store&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">links_to_crawl</code>&nbsp;and&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">crawled_links</code>&nbsp;in a key-value&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">NoSQL Database</span>. For the ranked links in&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">links_to_crawl</code>, we could use&nbsp;<a href=\"https://redis.io/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Redis</a>&nbsp;with sorted sets to maintain a ranking of page links. We should discuss the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#sql-or-nosql\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">use cases and tradeoffs between choosing SQL or NoSQL</a>.</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Crawler Service</span>&nbsp;processes each page link by doing the following in a loop:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Takes the top ranked page link to crawl<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Checks&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">crawled_links</code>&nbsp;in the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">NoSQL Database</span>&nbsp;for an entry with a similar page signature<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">If we have a similar page, reduces the priority of the page link<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">This prevents us from getting into a cycle</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Continue</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Else, crawls the link<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Adds a job to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Reverse Index Service</span>&nbsp;queue to generate a&nbsp;<a href=\"https://en.wikipedia.org/wiki/Search_engine_indexing\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">reverse index</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Adds a job to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Document Service</span>&nbsp;queue to generate a static title and snippet</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Generates the page signature</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Removes the link from&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">links_to_crawl</code>&nbsp;in the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">NoSQL Database</span></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Inserts the page link and signature to&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">crawled_links</code>&nbsp;in the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">NoSQL Database</span></li></ul></li></ul></li></ul></li></ul></li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Clarify with your interviewer how much code you are expected to write</span>.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">PagesDataStore</code>&nbsp;is an abstraction within the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Crawler Service</span>&nbsp;that uses the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">NoSQL Database</span>:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">class PagesDataStore(object):\n\n    def __init__(self, db);\n        self.db = db\n        ...\n\n    def add_link_to_crawl(self, url):\n        \"\"\"Add the given link to `links_to_crawl`.\"\"\"\n        ...\n\n    def remove_link_to_crawl(self, url):\n        \"\"\"Remove the given link from `links_to_crawl`.\"\"\"\n        ...\n\n    def reduce_priority_link_to_crawl(self, url)\n        \"\"\"Reduce the priority of a link in `links_to_crawl` to avoid cycles.\"\"\"\n        ...\n\n    def extract_max_priority_page(self):\n        \"\"\"Return the highest priority link in `links_to_crawl`.\"\"\"\n        ...\n\n    def insert_crawled_link(self, url, signature):\n        \"\"\"Add the given link to `crawled_links`.\"\"\"\n        ...\n\n    def crawled_similar(self, signature):\n        \"\"\"Determine if we've already crawled a page matching the given signature\"\"\"\n        ...\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">Page</code>&nbsp;is an abstraction within the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Crawler Service</span>&nbsp;that encapsulates a page, its contents, child urls, and signature:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">class Page(object):\n\n    def __init__(self, url, contents, child_urls, signature):\n        self.url = url\n        self.contents = contents\n        self.child_urls = child_urls\n        self.signature = signature\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">Crawler</code>&nbsp;is the main class within&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Crawler Service</span>, composed of&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">Page</code>&nbsp;and&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">PagesDataStore</code>.</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">class Crawler(object):\n\n    def __init__(self, data_store, reverse_index_queue, doc_index_queue):\n        self.data_store = data_store\n        self.reverse_index_queue = reverse_index_queue\n        self.doc_index_queue = doc_index_queue\n\n    def create_signature(self, page):\n        \"\"\"Create signature based on url and contents.\"\"\"\n        ...\n\n    def crawl_page(self, page):\n        for url in page.child_urls:\n            self.data_store.add_link_to_crawl(url)\n        page.signature = self.create_signature(page)\n        self.data_store.remove_link_to_crawl(page.url)\n        self.data_store.insert_crawled_link(page.url, page.signature)\n\n    def crawl(self):\n        while True:\n            page = self.data_store.extract_max_priority_page()\n            if page is None:\n                break\n            if self.data_store.crawled_similar(page.signature):\n                self.data_store.reduce_priority_link_to_crawl(page.url)\n            else:\n                self.crawl_page(page)\n</code></pre><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-handling-duplicates\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#handling-duplicates\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Handling duplicates</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We need to be careful the web crawler doesn't get stuck in an infinite loop, which happens when the graph contains a cycle.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Clarify with your interviewer how much code you are expected to write</span>.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We'll want to remove duplicate urls:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">For smaller lists we could use something like&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">sort | unique</code></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">With 1 billion links to crawl, we could use&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">MapReduce</span>&nbsp;to output only entries that have a frequency of 1</li></ul><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">class RemoveDuplicateUrls(MRJob):\n\n    def mapper(self, _, line):\n        yield line, 1\n\n    def reducer(self, key, values):\n        total = sum(values)\n        if total == 1:\n            yield key, total\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Detecting duplicate content is more complex. We could generate a signature based on the contents of the page and compare those two signatures for similarity. Some potential algorithms are&nbsp;<a href=\"https://en.wikipedia.org/wiki/Jaccard_index\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Jaccard index</a>&nbsp;and&nbsp;<a href=\"https://en.wikipedia.org/wiki/Cosine_similarity\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">cosine similarity</a>.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-determining-when-to-update-the-crawl-results\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#determining-when-to-update-the-crawl-results\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Determining when to update the crawl results</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Pages need to be crawled regularly to ensure freshness. Crawl results could have a&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">timestamp</code>&nbsp;field that indicates the last time a page was crawled. After a default time period, say one week, all pages should be refreshed. Frequently updated or more popular sites could be refreshed in shorter intervals.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Although we won't dive into details on analytics, we could do some data mining to determine the mean time before a particular page is updated, and use that statistic to determine how often to re-crawl the page.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We might also choose to support a&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">Robots.txt</code>&nbsp;file that gives webmasters control of crawl frequency.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-use-case-user-inputs-a-search-term-and-sees-a-list-of-relevant-pages-with-titles-and-snippets\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#use-case-user-inputs-a-search-term-and-sees-a-list-of-relevant-pages-with-titles-and-snippets\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use case: User inputs a search term and sees a list of relevant pages with titles and snippets</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Client</span>&nbsp;sends a request to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span>, running as a&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#reverse-proxy-web-server\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">reverse proxy</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span>&nbsp;forwards the request to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Query API</span>&nbsp;server</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Query API</span>&nbsp;server does does the following:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Parses the query<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Removes markup</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Breaks up the text into terms</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Fixes typos</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Normalizes capitalization</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Converts the query to use boolean operations</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Uses the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Reverse Index Service</span>&nbsp;to find documents matching the query<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Reverse Index Service</span>&nbsp;ranks the matching results and returns the top ones</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Uses the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Document Service</span>&nbsp;to return titles and snippets</li></ul></li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We'll use a public&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview##representational-state-transfer-rest\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><span style=\"box-sizing: border-box; font-weight: 600;\">REST API</span></a>:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">$ curl https://search.com/api/v1/search?query=hello+world\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Response:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">{\n    \"title\": \"foo's title\",\n    \"snippet\": \"foo's snippet\",\n    \"link\": \"https://foo.com\",\n},\n{\n    \"title\": \"bar's title\",\n    \"snippet\": \"bar's snippet\",\n    \"link\": \"https://bar.com\",\n},\n{\n    \"title\": \"baz's title\",\n    \"snippet\": \"baz's snippet\",\n    \"link\": \"https://baz.com\",\n},\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">For internal communications, we could use&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#remote-procedure-call-rpc\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Remote Procedure Calls</a>.</p><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-4-scale-the-design\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#step-4-scale-the-design\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 4: Scale the design</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Identify and address bottlenecks, given the constraints.</p></blockquote><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/ba21a95852d1cf7bb64c8c4622a79d1d5a20d344/687474703a2f2f692e696d6775722e636f6d2f625778507451412e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/ba21a95852d1cf7bb64c8c4622a79d1d5a20d344/687474703a2f2f692e696d6775722e636f6d2f625778507451412e706e67\" alt=\"Imgur\" data-canonical-src=\"http://i.imgur.com/bWxPtQA.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Important: Do not simply jump right into the final design from the initial design!</span></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">State you would 1)&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Benchmark/Load Test</span>, 2)&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Profile</span>&nbsp;for bottlenecks 3) address bottlenecks while evaluating alternatives and trade-offs, and 4) repeat. See&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer/blob/master/solutions/system_design/web_crawler\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Design a system that scales to millions of users on AWS</a>&nbsp;as a sample on how to iteratively scale the initial design.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">It's important to discuss what bottlenecks you might encounter with the initial design and how you might address each of them. For example, what issues are addressed by adding a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Load Balancer</span>&nbsp;with multiple&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Servers</span>?&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">CDN</span>?<span style=\"box-sizing: border-box; font-weight: 600;\">Master-Slave Replicas</span>? What are the alternatives and&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Trade-Offs</span>&nbsp;for each?</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We'll introduce some components to complete the design and to address scalability issues. Internal load balancers are not shown to reduce clutter.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><em style=\"box-sizing: border-box;\">To avoid repeating discussions</em>, refer to the following&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">system design topics</a>&nbsp;for main talking points, tradeoffs, and alternatives:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#domain-name-system\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">DNS</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#load-balancer\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Load balancer</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#horizontal-scaling\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Horizontal scaling</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#reverse-proxy-web-server\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Web server (reverse proxy)</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#application-layer\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">API server (application layer)</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#cache\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Cache</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#nosql\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">NoSQL</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#consistency-patterns\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Consistency patterns</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#availability-patterns\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Availability patterns</a></li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Some searches are very popular, while others are only executed once. Popular queries can be served from a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span>&nbsp;such as Redis or Memcached to reduce response times and to avoid overloading the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Reverse Index Service</span>&nbsp;and&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Document Service</span>. The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span>&nbsp;is also useful for handling the unevenly distributed traffic and traffic spikes. Reading 1 MB sequentially from memory takes about 250 microseconds, while reading from SSD takes 4x and from disk takes 80x longer.<span style=\"box-sizing: border-box; font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">1</a></span></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Below are a few other optimizations to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Crawling Service</span>:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">To handle the data size and request load, the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Reverse Index Service</span>&nbsp;and&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Document Service</span>&nbsp;will likely need to make heavy use sharding and replication.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">DNS lookup can be a bottleneck, the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Crawler Service</span>&nbsp;can keep its own DNS lookup that is refreshed periodically</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Crawler Service</span>&nbsp;can improve performance and reduce memory usage by keeping many open connections at a time, referred to as&nbsp;<a href=\"https://en.wikipedia.org/wiki/Connection_pool\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">connection pooling</a><ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Switching to&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#user-datagram-protocol-udp\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">UDP</a>&nbsp;could also boost performance</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Web crawling is bandwidth intensive, ensure there is enough bandwidth to sustain high throughput</li></ul><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-additional-talking-points\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#additional-talking-points\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Additional talking points</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Additional topics to dive into, depending on the problem scope and time remaining.</p></blockquote><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-sql-scaling-patterns\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#sql-scaling-patterns\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SQL scaling patterns</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#master-slave\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Read replicas</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#federation\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Federation</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#sharding\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Sharding</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#denormalization\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Denormalization</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#sql-tuning\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">SQL Tuning</a></li></ul><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-nosql\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#nosql\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>NoSQL</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Key-value store</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Document store</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Wide column store</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Graph database</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">SQL vs NoSQL</a></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-caching\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#caching\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Caching</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Where to cache<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#client-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Client caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#cdn-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">CDN caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#web-server-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Web server caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#database-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Database caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#application-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Application caching</a></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">What to cache<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#caching-at-the-database-query-level\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Caching at the database query level</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#caching-at-the-object-level\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Caching at the object level</a></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">When to update the cache<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#cache-aside\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Cache-aside</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#write-through\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Write-through</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#write-behind-write-back\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Write-behind (write-back)</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#refresh-ahead\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Refresh ahead</a></li></ul></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-asynchronism-and-microservices\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#asynchronism-and-microservices\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Asynchronism and microservices</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Message queues</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Task queues</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Back pressure</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Microservices</a></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-communications\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#communications\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Communications</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Discuss tradeoffs:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">External communication with clients -&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#representational-state-transfer-rest\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">HTTP APIs following REST</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Internal communications -&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#remote-procedure-call-rpc\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">RPC</a></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#service-discovery\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Service discovery</a></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-security\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#security\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Security</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Refer to the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#security\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">security section</a>.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-latency-numbers\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#latency-numbers\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Latency numbers</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">See&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Latency numbers every programmer should know</a>.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-ongoing\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/web_crawler#ongoing\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ongoing</h3><ul style=\"box-sizing: border-box; padding-left: 2em; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; margin-bottom: 0px !important;\"><li style=\"box-sizing: border-box;\">Continue benchmarking and monitoring your system to address bottlenecks as they come up</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Scaling is an iterative process</li></ul>"
                    ],
                    "guid": "o@6M;e4bp:",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h1 style=\"box-sizing: border-box; font-size: 2em; margin-bottom: 16px; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Design the data structures for a social network</h1>",
                        "<p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><em style=\"box-sizing: border-box;\">Note: This document links directly to relevant areas found in the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#index-of-system-design-topics-1\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">system design topics</a>&nbsp;to avoid duplication. Refer to the linked content for general talking points, tradeoffs, and alternatives.</em></p><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-1-outline-use-cases-and-constraints\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#step-1-outline-use-cases-and-constraints\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 1: Outline use cases and constraints</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Gather requirements and scope the problem. Ask questions to clarify use cases and constraints. Discuss assumptions.</p></blockquote><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Without an interviewer to address clarifying questions, we'll define some use cases and constraints.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-use-cases\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#use-cases\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use cases</h3><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-well-scope-the-problem-to-handle-only-the-following-use-cases\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#well-scope-the-problem-to-handle-only-the-following-use-cases\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>We'll scope the problem to handle only the following use cases</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><span style=\"box-sizing: border-box; font-weight: 600;\">User</span>&nbsp;searches for someone and sees the shortest path to the searched person</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Service</span>&nbsp;has high availability</li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-constraints-and-assumptions\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#constraints-and-assumptions\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Constraints and assumptions</h3><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-state-assumptions\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#state-assumptions\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>State assumptions</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Traffic is not evenly distributed<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Some searches are more popular than others, while others are only executed once</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Graph data won't fit on a single machine</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Graph edges are unweighted</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">100 million users</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">50 friends per user average</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">1 billion friend searches per month</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Exercise the use of more traditional systems - don't use graph-specific solutions such as&nbsp;<a href=\"http://graphql.org/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">GraphQL</a>&nbsp;or a graph database like&nbsp;<a href=\"https://neo4j.com/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Neo4j</a></p><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-calculate-usage\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#calculate-usage\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Calculate usage</h4><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Clarify with your interviewer if you should run back-of-the-envelope usage calculations.</span></p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">5 billion friend relationships<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">100 million users * 50 friends per user average</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">400 search requests per second</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Handy conversion guide:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">2.5 million seconds per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">1 request per second = 2.5 million requests per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">40 requests per second = 100 million requests per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">400 requests per second = 1 billion requests per month</li></ul><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-2-create-a-high-level-design\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#step-2-create-a-high-level-design\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 2: Create a high level design</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Outline a high level design with all important components.</p></blockquote><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/75bd95a4871663004787cfb1737704918886121b/687474703a2f2f692e696d6775722e636f6d2f7778587971324a2e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/75bd95a4871663004787cfb1737704918886121b/687474703a2f2f692e696d6775722e636f6d2f7778587971324a2e706e67\" alt=\"Imgur\" data-canonical-src=\"http://i.imgur.com/wxXyq2J.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a></p><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-3-design-core-components\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#step-3-design-core-components\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 3: Design core components</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Dive into details for each core component.</p></blockquote><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-use-case-user-searches-for-someone-and-sees-the-shortest-path-to-the-searched-person\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#use-case-user-searches-for-someone-and-sees-the-shortest-path-to-the-searched-person\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use case: User searches for someone and sees the shortest path to the searched person</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Clarify with your interviewer how much code you are expected to write</span>.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Without the constraint of millions of users (vertices) and billions of friend relationships (edges), we could solve this unweighted shortest path task with a general BFS approach:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">class Graph(Graph):\n\n    def shortest_path(self, source, dest):\n        if source is None or dest is None:\n            return None\n        if source is dest:\n            return [source.key]\n        prev_node_keys = self._shortest_path(source, dest)\n        if prev_node_keys is None:\n            return None\n        else:\n            path_ids = [dest.key]\n            prev_node_key = prev_node_keys[dest.key]\n            while prev_node_key is not None:\n                path_ids.append(prev_node_key)\n                prev_node_key = prev_node_keys[prev_node_key]\n            return path_ids[::-1]\n\n    def _shortest_path(self, source, dest):\n        queue = deque()\n        queue.append(source)\n        prev_node_keys = {source.key: None}\n        source.visit_state = State.visited\n        while queue:\n            node = queue.popleft()\n            if node is dest:\n                return prev_node_keys\n            prev_node = node\n            for adj_node in node.adj_nodes.values():\n                if adj_node.visit_state == State.unvisited:\n                    queue.append(adj_node)\n                    prev_node_keys[adj_node.key] = prev_node.key\n                    adj_node.visit_state = State.visited\n        return None\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We won't be able to fit all users on the same machine, we'll need to&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#sharding\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">shard</a>&nbsp;users across&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Person Servers</span>&nbsp;and access them with a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Lookup Service</span>.</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Client</span>&nbsp;sends a request to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span>, running as a&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#reverse-proxy-web-server\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">reverse proxy</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span>&nbsp;forwards the request to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Search API</span>&nbsp;server</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Search API</span>&nbsp;server forwards the request to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">User Graph Service</span></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">User Graph Service</span>&nbsp;does does the following:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Uses the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Lookup Service</span>&nbsp;to find the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Person Server</span>&nbsp;where the current user's info is stored</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Finds the appropriate&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Person Server</span>&nbsp;to retrieve the current user's list of&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">friend_ids</code></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Runs a BFS search using the current user as the&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">source</code>&nbsp;and the current user's&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">friend_ids</code>&nbsp;as the ids for each&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">adjacent_node</code></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">To get the&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">adjacent_node</code>&nbsp;from a given id:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">User Graph Service</span>&nbsp;will&nbsp;<em style=\"box-sizing: border-box;\">again</em>&nbsp;need to communicate with the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Lookup Service</span>&nbsp;to determine which&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Person Server</span>&nbsp;stores the<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">adjacent_node</code>&nbsp;matching the given id (potential for optimization)</li></ul></li></ul></li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Clarify with your interviewer how much code you should be writing</span>.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Note</span>: Error handling is excluded below for simplicity. Ask if you should code proper error handing.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Lookup Service</span>&nbsp;implementation:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">class LookupService(object):\n\n    def __init__(self):\n        self.lookup = self._init_lookup()  # key: person_id, value: person_server\n\n    def _init_lookup(self):\n        ...\n\n    def lookup_person_server(self, person_id):\n        return self.lookup[person_id]\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Person Server</span>&nbsp;implementation:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">class PersonServer(object):\n\n    def __init__(self):\n        self.people = {}  # key: person_id, value: person\n\n    def add_person(self, person):\n        ...\n\n    def people(self, ids):\n        results = []\n        for id in ids:\n            if id in self.people:\n                results.append(self.people[id])\n        return results\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Person</span>&nbsp;implementation:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">class Person(object):\n\n    def __init__(self, id, name, friend_ids):\n        self.id = id\n        self.name = name\n        self.friend_ids = friend_ids\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">User Graph Service</span>&nbsp;implementation:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">class UserGraphService(object):\n\n    def __init__(self, lookup_service):\n        self.lookup_service = lookup_service\n\n    def person(self, person_id):\n        person_server = self.lookup_service.lookup_person_server(person_id)\n        return person_server.people([person_id])\n\n    def shortest_path(self, source_key, dest_key):\n        if source_key is None or dest_key is None:\n            return None\n        if source_key is dest_key:\n            return [source_key]\n        prev_node_keys = self._shortest_path(source_key, dest_key)\n        if prev_node_keys is None:\n            return None\n        else:\n            # Iterate through the path_ids backwards, starting at dest_key\n            path_ids = [dest_key]\n            prev_node_key = prev_node_keys[dest_key]\n            while prev_node_key is not None:\n                path_ids.append(prev_node_key)\n                prev_node_key = prev_node_keys[prev_node_key]\n            # Reverse the list since we iterated backwards\n            return path_ids[::-1]\n\n    def _shortest_path(self, source_key, dest_key, path):\n        # Use the id to get the Person\n        source = self.person(source_key)\n        # Update our bfs queue\n        queue = deque()\n        queue.append(source)\n        # prev_node_keys keeps track of each hop from\n        # the source_key to the dest_key\n        prev_node_keys = {source_key: None}\n        # We'll use visited_ids to keep track of which nodes we've\n        # visited, which can be different from a typical bfs where\n        # this can be stored in the node itself\n        visited_ids = set()\n        visited_ids.add(source.id)\n        while queue:\n            node = queue.popleft()\n            if node.key is dest_key:\n                return prev_node_keys\n            prev_node = node\n            for friend_id in node.friend_ids:\n                if friend_id not in visited_ids:\n                    friend_node = self.person(friend_id)\n                    queue.append(friend_node)\n                    prev_node_keys[friend_id] = prev_node.key\n                    visited_ids.add(friend_id)\n        return None\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We'll use a public&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview##representational-state-transfer-rest\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><span style=\"box-sizing: border-box; font-weight: 600;\">REST API</span></a>:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">$ curl https://social.com/api/v1/friend_search?person_id=1234\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Response:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">{\n    \"person_id\": \"100\",\n    \"name\": \"foo\",\n    \"link\": \"https://social.com/foo\",\n},\n{\n    \"person_id\": \"53\",\n    \"name\": \"bar\",\n    \"link\": \"https://social.com/bar\",\n},\n{\n    \"person_id\": \"1234\",\n    \"name\": \"baz\",\n    \"link\": \"https://social.com/baz\",\n},\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">For internal communications, we could use&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#remote-procedure-call-rpc\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Remote Procedure Calls</a>.</p><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-4-scale-the-design\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#step-4-scale-the-design\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 4: Scale the design</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Identify and address bottlenecks, given the constraints.</p></blockquote><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/16d78e51c2e2949e23122f4c26afe5886f82a96f/687474703a2f2f692e696d6775722e636f6d2f636443763567372e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/16d78e51c2e2949e23122f4c26afe5886f82a96f/687474703a2f2f692e696d6775722e636f6d2f636443763567372e706e67\" alt=\"Imgur\" data-canonical-src=\"http://i.imgur.com/cdCv5g7.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Important: Do not simply jump right into the final design from the initial design!</span></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">State you would 1)&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Benchmark/Load Test</span>, 2)&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Profile</span>&nbsp;for bottlenecks 3) address bottlenecks while evaluating alternatives and trade-offs, and 4) repeat. See&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer/blob/master/solutions/system_design/social_graph\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Design a system that scales to millions of users on AWS</a>&nbsp;as a sample on how to iteratively scale the initial design.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">It's important to discuss what bottlenecks you might encounter with the initial design and how you might address each of them. For example, what issues are addressed by adding a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Load Balancer</span>&nbsp;with multiple&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Servers</span>?&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">CDN</span>?<span style=\"box-sizing: border-box; font-weight: 600;\">Master-Slave Replicas</span>? What are the alternatives and&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Trade-Offs</span>&nbsp;for each?</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We'll introduce some components to complete the design and to address scalability issues. Internal load balancers are not shown to reduce clutter.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><em style=\"box-sizing: border-box;\">To avoid repeating discussions</em>, refer to the following&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">system design topics</a>&nbsp;for main talking points, tradeoffs, and alternatives:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#domain-name-system\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">DNS</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#load-balancer\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Load balancer</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#horizontal-scaling\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Horizontal scaling</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#reverse-proxy-web-server\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Web server (reverse proxy)</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#application-layer\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">API server (application layer)</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#cache\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Cache</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#consistency-patterns\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Consistency patterns</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#availability-patterns\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Availability patterns</a></li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">To address the constraint of 400&nbsp;<em style=\"box-sizing: border-box;\">average</em>&nbsp;read requests per second (higher at peak), person data can be served from a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span>&nbsp;such as Redis or Memcached to reduce response times and to reduce traffic to downstream services. This could be especially useful for people who do multiple searches in succession and for people who are well-connected. Reading 1 MB sequentially from memory takes about 250 microseconds, while reading from SSD takes 4x and from disk takes 80x longer.<span style=\"box-sizing: border-box; font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">1</a></span></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Below are further optimizations:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Store complete or partial BFS traversals to speed up subsequent lookups in the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Batch compute offline then store complete or partial BFS traversals to speed up subsequent lookups in a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">NoSQL Database</span></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Reduce machine jumps by batching together friend lookups hosted on the same&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Person Server</span><ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#Sharding\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Shard</a>&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Person Servers</span>&nbsp;by location to further improve this, as friends generally live closer to each other</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Do two BFS searches at the same time, one starting from the source, and one from the destination, then merge the two paths</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Start the BFS search from people with large numbers of friends, as they are more likely to reduce the number of&nbsp;<a href=\"https://en.wikipedia.org/wiki/Six_degrees_of_separation\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">degrees of separation</a>&nbsp;between the current user and the search target</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Set a limit based on time or number of hops before asking the user if they want to continue searching, as searching could take a considerable amount of time in some cases</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Use a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Graph Database</span>&nbsp;such as&nbsp;<a href=\"https://neo4j.com/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Neo4j</a>&nbsp;or a graph-specific query language such as&nbsp;<a href=\"http://graphql.org/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">GraphQL</a>&nbsp;(if there were no constraint preventing the use of&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Graph Databases</span>)</li></ul><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-additional-talking-points\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#additional-talking-points\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Additional talking points</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Additional topics to dive into, depending on the problem scope and time remaining.</p></blockquote><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-sql-scaling-patterns\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#sql-scaling-patterns\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SQL scaling patterns</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#master-slave\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Read replicas</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#federation\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Federation</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#sharding\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Sharding</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#denormalization\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Denormalization</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#sql-tuning\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">SQL Tuning</a></li></ul><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-nosql\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#nosql\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>NoSQL</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Key-value store</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Document store</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Wide column store</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Graph database</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">SQL vs NoSQL</a></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-caching\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#caching\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Caching</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Where to cache<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#client-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Client caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#cdn-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">CDN caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#web-server-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Web server caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#database-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Database caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#application-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Application caching</a></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">What to cache<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#caching-at-the-database-query-level\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Caching at the database query level</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#caching-at-the-object-level\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Caching at the object level</a></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">When to update the cache<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#cache-aside\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Cache-aside</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#write-through\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Write-through</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#write-behind-write-back\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Write-behind (write-back)</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#refresh-ahead\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Refresh ahead</a></li></ul></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-asynchronism-and-microservices\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#asynchronism-and-microservices\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Asynchronism and microservices</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Message queues</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Task queues</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Back pressure</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Microservices</a></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-communications\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#communications\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Communications</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Discuss tradeoffs:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">External communication with clients -&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#representational-state-transfer-rest\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">HTTP APIs following REST</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Internal communications -&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#remote-procedure-call-rpc\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">RPC</a></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#service-discovery\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Service discovery</a></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-security\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#security\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Security</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Refer to the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#security\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">security section</a>.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-latency-numbers\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#latency-numbers\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Latency numbers</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">See&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Latency numbers every programmer should know</a>.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-ongoing\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/social_graph#ongoing\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ongoing</h3><ul style=\"box-sizing: border-box; padding-left: 2em; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; margin-bottom: 0px !important;\"><li style=\"box-sizing: border-box;\">Continue benchmarking and monitoring your system to address bottlenecks as they come up</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Scaling is an iterative process</li></ul>"
                    ],
                    "guid": "cF-8tWJuUz",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h1 style=\"box-sizing: border-box; font-size: 2em; margin-bottom: 16px; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Design the Twitter timeline and search</h1>",
                        "<p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><em style=\"box-sizing: border-box;\">Note: This document links directly to relevant areas found in the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#index-of-system-design-topics-1\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">system design topics</a>&nbsp;to avoid duplication. Refer to the linked content for general talking points, tradeoffs, and alternatives.</em></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Design the Facebook feed</span>&nbsp;and&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Design Facebook search</span>&nbsp;are similar questions.</p><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-1-outline-use-cases-and-constraints\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#step-1-outline-use-cases-and-constraints\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 1: Outline use cases and constraints</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Gather requirements and scope the problem. Ask questions to clarify use cases and constraints. Discuss assumptions.</p></blockquote><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Without an interviewer to address clarifying questions, we'll define some use cases and constraints.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-use-cases\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#use-cases\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use cases</h3><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-well-scope-the-problem-to-handle-only-the-following-use-cases\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#well-scope-the-problem-to-handle-only-the-following-use-cases\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>We'll scope the problem to handle only the following use cases</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><span style=\"box-sizing: border-box; font-weight: 600;\">User</span>&nbsp;posts a tweet<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Service</span>&nbsp;pushes tweets to followers, sending push notifications and emails</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">User</span>&nbsp;views the user timeline (activity from the user)</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">User</span>&nbsp;views the home timeline (activity from people the user is following)</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">User</span>&nbsp;searches keywords</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Service</span>&nbsp;has high availability</li></ul><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-out-of-scope\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#out-of-scope\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Out of scope</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Service</span>&nbsp;pushes tweets to the Twitter Firehose and other streams</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Service</span>&nbsp;strips out tweets based on user's visibility settings<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Hide @reply if the user is not also following the person being replied to</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Respect 'hide retweets' setting</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Analytics</li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-constraints-and-assumptions\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#constraints-and-assumptions\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Constraints and assumptions</h3><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-state-assumptions\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#state-assumptions\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>State assumptions</h4><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">General</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Traffic is not evenly distributed</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Posting a tweet should be fast<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Fanning out a tweet to all of your followers should be fast, unless you have millions of followers</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">100 million active users</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">500 million tweets per day or 15 billion tweets per month<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Each tweet averages a fanout of 10 deliveries</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">5 billion total tweets delivered on fanout per day</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">150 billion tweets delivered on fanout per month</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">250 billion read requests per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">10 billion searches per month</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Timeline</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Viewing the timeline should be fast</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Twitter is more read heavy than write heavy<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Optimize for fast reads of tweets</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Ingesting tweets is write heavy</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Search</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Searching should be fast</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Search is read-heavy</li></ul><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-calculate-usage\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#calculate-usage\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Calculate usage</h4><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Clarify with your interviewer if you should run back-of-the-envelope usage calculations.</span></p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Size per tweet:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">tweet_id</code>&nbsp;- 8 bytes</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">user_id</code>&nbsp;- 32 bytes</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">text</code>&nbsp;- 140 bytes</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">media</code>&nbsp;- 10 KB average</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Total: ~10 KB</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">150 TB of new tweet content per month<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">10 KB per tweet * 500 million tweets per day * 30 days per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">5.4 PB of new tweet content in 3 years</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">100 thousand read requests per second<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">250 billion read requests per month * (400 requests per second / 1 billion requests per month)</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">6,000 tweets per second<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">15 billion tweets delivered on fanout per month * (400 requests per second / 1 billion requests per month)</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">60 thousand tweets delivered on fanout per second<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">150 billion tweets delivered on fanout per month * (400 requests per second / 1 billion requests per month)</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">4,000 search requests per second</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Handy conversion guide:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">2.5 million seconds per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">1 request per second = 2.5 million requests per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">40 requests per second = 100 million requests per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">400 requests per second = 1 billion requests per month</li></ul><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-2-create-a-high-level-design\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#step-2-create-a-high-level-design\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 2: Create a high level design</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Outline a high level design with all important components.</p></blockquote><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/f7f74718418c9b3d552d1f061cce920d2f50e81c/687474703a2f2f692e696d6775722e636f6d2f3438744541326a2e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/f7f74718418c9b3d552d1f061cce920d2f50e81c/687474703a2f2f692e696d6775722e636f6d2f3438744541326a2e706e67\" alt=\"Imgur\" data-canonical-src=\"http://i.imgur.com/48tEA2j.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a></p><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-3-design-core-components\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#step-3-design-core-components\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 3: Design core components</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Dive into details for each core component.</p></blockquote><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-use-case-user-posts-a-tweet\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#use-case-user-posts-a-tweet\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use case: User posts a tweet</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We could store the user's own tweets to populate the user timeline (activity from the user) in a&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#relational-database-management-system-rdbms\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">relational database</a>. We should discuss the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#sql-or-nosql\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">use cases and tradeoffs between choosing SQL or NoSQL</a>.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Delivering tweets and building the home timeline (activity from people the user is following) is trickier. Fanning out tweets to all followers (60 thousand tweets delivered on fanout per second) will overload a traditional&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#relational-database-management-system-rdbms\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">relational database</a>. We'll probably want to choose a data store with fast writes such as a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">NoSQL database</span>&nbsp;or&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span>. Reading 1 MB sequentially from memory takes about 250 microseconds, while reading from SSD takes 4x and from disk takes 80x longer.<span style=\"box-sizing: border-box; font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">1</a></span></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We could store media such as photos or videos on an&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Object Store</span>.</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Client</span>&nbsp;posts a tweet to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span>, running as a&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#reverse-proxy-web-server\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">reverse proxy</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span>&nbsp;forwards the request to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Write API</span>&nbsp;server</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Write API</span>&nbsp;stores the tweet in the user's timeline on a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">SQL database</span></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Write API</span>&nbsp;contacts the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Fan Out Service</span>, which does the following:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Queries the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">User Graph Service</span>&nbsp;to find the user's followers stored in the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Stores the tweet in the&nbsp;<em style=\"box-sizing: border-box;\">home timeline of the user's followers</em>&nbsp;in a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span><ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">O(n) operation: 1,000 followers = 1,000 lookups and inserts</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Stores the tweet in the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Search Index Service</span>&nbsp;to enable fast searching</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Stores media in the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Object Store</span></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Uses the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Notification Service</span>&nbsp;to send out push notifications to followers:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Uses a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Queue</span>&nbsp;(not pictured) to asynchronously send out notifications</li></ul></li></ul></li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Clarify with your interviewer how much code you are expected to write</span>.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">If our&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span>&nbsp;is Redis, we could use a native Redis list with the following structure:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">           tweet n+2                   tweet n+1                   tweet n\n| 8 bytes   8 bytes  1 byte | 8 bytes   8 bytes  1 byte | 8 bytes   7 bytes  1 byte |\n| tweet_id  user_id  meta   | tweet_id  user_id  meta   | tweet_id  user_id  meta   |\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">The new tweet would be placed in the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span>, which populates user's home timeline (activity from people the user is following).</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We'll use a public&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview##representational-state-transfer-rest\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><span style=\"box-sizing: border-box; font-weight: 600;\">REST API</span></a>:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">$ curl -X POST --data '{ \"user_id\": \"123\", \"auth_token\": \"ABC123\", \\\n    \"status\": \"hello world!\", \"media_ids\": \"ABC987\" }' \\\n    https://twitter.com/api/v1/tweet\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Response:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">{\n    \"created_at\": \"Wed Sep 05 00:37:15 +0000 2012\",\n    \"status\": \"hello world!\",\n    \"tweet_id\": \"987\",\n    \"user_id\": \"123\",\n    ...\n}\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">For internal communications, we could use&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#remote-procedure-call-rpc\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Remote Procedure Calls</a>.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-use-case-user-views-the-home-timeline\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#use-case-user-views-the-home-timeline\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use case: User views the home timeline</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Client</span>&nbsp;posts a home timeline request to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span>&nbsp;forwards the request to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Read API</span>&nbsp;server</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Read API</span>&nbsp;server contacts the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Timeline Service</span>, which does the following:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Gets the timeline data stored in the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span>, containing tweet ids and user ids - O(1)</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Queries the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Tweet Info Service</span>&nbsp;with a&nbsp;<a href=\"http://redis.io/commands/mget\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">multiget</a>&nbsp;to obtain additional info about the tweet ids - O(n)</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Queries the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">User Info Service</span>&nbsp;with a multiget to obtain additional info about the user ids - O(n)</li></ul></li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">REST API:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">$ curl https://twitter.com/api/v1/home_timeline?user_id=123\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Response:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">{\n    \"user_id\": \"456\",\n    \"tweet_id\": \"123\",\n    \"status\": \"foo\"\n},\n{\n    \"user_id\": \"789\",\n    \"tweet_id\": \"456\",\n    \"status\": \"bar\"\n},\n{\n    \"user_id\": \"789\",\n    \"tweet_id\": \"579\",\n    \"status\": \"baz\"\n},\n</code></pre><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-use-case-user-views-the-user-timeline\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#use-case-user-views-the-user-timeline\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use case: User views the user timeline</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Client</span>&nbsp;posts a home timeline request to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span>&nbsp;forwards the request to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Read API</span>&nbsp;server</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Read API</span>&nbsp;retrieves the user timeline from the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">SQL Database</span></li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">The REST API would be similar to the home timeline, except all tweets would come from the user as opposed to the people the user is following.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-use-case-user-searches-keywords\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#use-case-user-searches-keywords\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use case: User searches keywords</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Client</span>&nbsp;sends a search request to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span>&nbsp;forwards the request to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Search API</span>&nbsp;server</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Search API</span>&nbsp;contacts the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Search Service</span>, which does the following:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Parses/tokenizes the input query, determining what needs to be searched<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Removes markup</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Breaks up the text into terms</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Fixes typos</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Normalizes capitalization</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Converts the query to use boolean operations</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Queries the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Search Cluster</span>&nbsp;(ie&nbsp;<a href=\"https://lucene.apache.org/\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Lucene</a>) for the results:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#scatter-gather\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Scatter gathers</a>&nbsp;each server in the cluster to determine if there are any results for the query</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Merges, ranks, sorts, and returns the results</li></ul></li></ul></li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">REST API:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">$ curl https://twitter.com/api/v1/search?query=hello+world\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">The response would be similar to that of the home timeline, except for tweets matching the given query.</p><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-4-scale-the-design\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#step-4-scale-the-design\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 4: Scale the design</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Identify and address bottlenecks, given the constraints.</p></blockquote><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/14f76dab28dfbfa12ea6b02c6bd0ec726fc17306/687474703a2f2f692e696d6775722e636f6d2f6a7255424146372e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/14f76dab28dfbfa12ea6b02c6bd0ec726fc17306/687474703a2f2f692e696d6775722e636f6d2f6a7255424146372e706e67\" alt=\"Imgur\" data-canonical-src=\"http://i.imgur.com/jrUBAF7.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Important: Do not simply jump right into the final design from the initial design!</span></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">State you would 1)&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Benchmark/Load Test</span>, 2)&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Profile</span>&nbsp;for bottlenecks 3) address bottlenecks while evaluating alternatives and trade-offs, and 4) repeat. See&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer/blob/master/solutions/system_design/twitter\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Design a system that scales to millions of users on AWS</a>&nbsp;as a sample on how to iteratively scale the initial design.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">It's important to discuss what bottlenecks you might encounter with the initial design and how you might address each of them. For example, what issues are addressed by adding a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Load Balancer</span>&nbsp;with multiple&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Servers</span>?&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">CDN</span>?<span style=\"box-sizing: border-box; font-weight: 600;\">Master-Slave Replicas</span>? What are the alternatives and&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Trade-Offs</span>&nbsp;for each?</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We'll introduce some components to complete the design and to address scalability issues. Internal load balancers are not shown to reduce clutter.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><em style=\"box-sizing: border-box;\">To avoid repeating discussions</em>, refer to the following&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">system design topics</a>&nbsp;for main talking points, tradeoffs, and alternatives:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#domain-name-system\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">DNS</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#content-delivery-network\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">CDN</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#load-balancer\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Load balancer</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#horizontal-scaling\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Horizontal scaling</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#reverse-proxy-web-server\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Web server (reverse proxy)</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#application-layer\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">API server (application layer)</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#cache\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Cache</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#relational-database-management-system-rdbms\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Relational database management system (RDBMS)</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#fail-over\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">SQL write master-slave failover</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#master-slave-replication\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Master-slave replication</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#consistency-patterns\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Consistency patterns</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#availability-patterns\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Availability patterns</a></li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Fanout Service</span>&nbsp;is a potential bottleneck. Twitter users with millions of followers could take several minutes to have their tweets go through the fanout process. This could lead to race conditions with @replies to the tweet, which we could mitigate by re-ordering the tweets at serve time.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We could also avoid fanning out tweets from highly-followed users. Instead, we could search to find tweets for high-followed users, merge the search results with the user's home timeline results, then re-order the tweets at serve time.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Additional optimizations include:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Keep only several hundred tweets for each home timeline in the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Keep only active users' home timeline info in the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span><ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">If a user was not previously active in the past 30 days, we could rebuild the timeline from the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">SQL Database</span><ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Query the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">User Graph Service</span>&nbsp;to determine who the user is following</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Get the tweets from the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">SQL Database</span>&nbsp;and add them to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span></li></ul></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Store only a month of tweets in the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Tweet Info Service</span></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Store only active users in the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">User Info Service</span></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Search Cluster</span>&nbsp;would likely need to keep the tweets in memory to keep latency low</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We'll also want to address the bottleneck with the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">SQL Database</span>.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Although the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span>&nbsp;should reduce the load on the database, it is unlikely the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">SQL Read Replicas</span>&nbsp;alone would be enough to handle the cache misses. We'll probably need to employ additional SQL scaling patterns.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">The high volume of writes would overwhelm a single&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">SQL Write Master-Slave</span>, also pointing to a need for additional scaling techniques.</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#federation\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Federation</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#sharding\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Sharding</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#denormalization\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Denormalization</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#sql-tuning\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">SQL Tuning</a></li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We should also consider moving some data to a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">NoSQL Database</span>.</p><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-additional-talking-points\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#additional-talking-points\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Additional talking points</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Additional topics to dive into, depending on the problem scope and time remaining.</p></blockquote><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-nosql\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#nosql\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>NoSQL</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Key-value store</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Document store</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Wide column store</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Graph database</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">SQL vs NoSQL</a></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-caching\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#caching\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Caching</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Where to cache<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#client-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Client caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#cdn-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">CDN caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#web-server-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Web server caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#database-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Database caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#application-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Application caching</a></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">What to cache<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#caching-at-the-database-query-level\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Caching at the database query level</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#caching-at-the-object-level\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Caching at the object level</a></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">When to update the cache<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#cache-aside\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Cache-aside</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#write-through\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Write-through</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#write-behind-write-back\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Write-behind (write-back)</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#refresh-ahead\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Refresh ahead</a></li></ul></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-asynchronism-and-microservices\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#asynchronism-and-microservices\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Asynchronism and microservices</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Message queues</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Task queues</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Back pressure</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Microservices</a></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-communications\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#communications\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Communications</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Discuss tradeoffs:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">External communication with clients -&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#representational-state-transfer-rest\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">HTTP APIs following REST</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Internal communications -&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#remote-procedure-call-rpc\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">RPC</a></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#service-discovery\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Service discovery</a></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-security\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#security\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Security</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Refer to the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#security\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">security section</a>.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-latency-numbers\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#latency-numbers\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Latency numbers</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">See&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Latency numbers every programmer should know</a>.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-ongoing\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/twitter#ongoing\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ongoing</h3><ul style=\"box-sizing: border-box; padding-left: 2em; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; margin-bottom: 0px !important;\"><li style=\"box-sizing: border-box;\">Continue benchmarking and monitoring your system to address bottlenecks as they come up</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Scaling is an iterative process</li></ul>"
                    ],
                    "guid": "ljp^<#/sH}",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h1 style=\"box-sizing: border-box; font-size: 2em; margin-bottom: 16px; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Design a key-value cache to save the results of the most recent web server queries</h1>",
                        "<p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><em style=\"box-sizing: border-box;\">Note: This document links directly to relevant areas found in the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#index-of-system-design-topics-1\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">system design topics</a>&nbsp;to avoid duplication. Refer to the linked content for general talking points, tradeoffs, and alternatives.</em></p><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-1-outline-use-cases-and-constraints\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#step-1-outline-use-cases-and-constraints\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 1: Outline use cases and constraints</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Gather requirements and scope the problem. Ask questions to clarify use cases and constraints. Discuss assumptions.</p></blockquote><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Without an interviewer to address clarifying questions, we'll define some use cases and constraints.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-use-cases\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#use-cases\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use cases</h3><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-well-scope-the-problem-to-handle-only-the-following-use-cases\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#well-scope-the-problem-to-handle-only-the-following-use-cases\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>We'll scope the problem to handle only the following use cases</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><span style=\"box-sizing: border-box; font-weight: 600;\">User</span>&nbsp;sends a search request resulting in a cache hit</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">User</span>&nbsp;sends a search request resulting in a cache miss</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Service</span>&nbsp;has high availability</li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-constraints-and-assumptions\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#constraints-and-assumptions\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Constraints and assumptions</h3><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-state-assumptions\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#state-assumptions\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>State assumptions</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Traffic is not evenly distributed<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Popular queries should almost always be in the cache</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Need to determine how to expire/refresh</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Serving from cache requires fast lookups</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Low latency between machines</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Limited memory in cache<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Need to determine what to keep/remove</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Need to cache millions of queries</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">10 million users</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">10 billion queries per month</li></ul><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-calculate-usage\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#calculate-usage\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Calculate usage</h4><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Clarify with your interviewer if you should run back-of-the-envelope usage calculations.</span></p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Cache stores ordered list of key: query, value: results<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">query</code>&nbsp;- 50 bytes</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">title</code>&nbsp;- 20 bytes</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">snippet</code>&nbsp;- 200 bytes</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Total: 270 bytes</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">2.7 TB of cache data per month if all 10 billion queries are unique and all are stored<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">270 bytes per search * 10 billion searches per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Assumptions state limited memory, need to determine how to expire contents</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">4,000 requests per second</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Handy conversion guide:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">2.5 million seconds per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">1 request per second = 2.5 million requests per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">40 requests per second = 100 million requests per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">400 requests per second = 1 billion requests per month</li></ul><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-2-create-a-high-level-design\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#step-2-create-a-high-level-design\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 2: Create a high level design</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Outline a high level design with all important components.</p></blockquote><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/57223dafbceaf008d0fcec518ff40932f504b985/687474703a2f2f692e696d6775722e636f6d2f4b715a336453782e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/57223dafbceaf008d0fcec518ff40932f504b985/687474703a2f2f692e696d6775722e636f6d2f4b715a336453782e706e67\" alt=\"Imgur\" data-canonical-src=\"http://i.imgur.com/KqZ3dSx.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a></p><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-3-design-core-components\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#step-3-design-core-components\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 3: Design core components</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Dive into details for each core component.</p></blockquote><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-use-case-user-sends-a-request-resulting-in-a-cache-hit\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#use-case-user-sends-a-request-resulting-in-a-cache-hit\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use case: User sends a request resulting in a cache hit</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Popular queries can be served from a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span>&nbsp;such as Redis or Memcached to reduce read latency and to avoid overloading the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Reverse Index Service</span>&nbsp;and&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Document Service</span>. Reading 1 MB sequentially from memory takes about 250 microseconds, while reading from SSD takes 4x and from disk takes 80x longer.<span style=\"box-sizing: border-box; font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">1</a></span></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Since the cache has limited capacity, we'll use a least recently used (LRU) approach to expire older entries.</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Client</span>&nbsp;sends a request to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span>, running as a&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#reverse-proxy-web-server\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">reverse proxy</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span>&nbsp;forwards the request to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Query API</span>&nbsp;server</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Query API</span>&nbsp;server does the following:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Parses the query<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Removes markup</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Breaks up the text into terms</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Fixes typos</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Normalizes capitalization</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Converts the query to use boolean operations</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Checks the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span>&nbsp;for the content matching the query<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">If there's a hit in the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span>, the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span>&nbsp;does the following:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Updates the cached entry's position to the front of the LRU list</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Returns the cached contents</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Else, the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Query API</span>&nbsp;does the following:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Uses the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Reverse Index Service</span>&nbsp;to find documents matching the query<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Reverse Index Service</span>&nbsp;ranks the matching results and returns the top ones</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Uses the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Document Service</span>&nbsp;to return titles and snippets</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Updates the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span>&nbsp;with the contents, placing the entry at the front of the LRU list</li></ul></li></ul></li></ul></li></ul><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-cache-implementation\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#cache-implementation\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cache implementation</h4><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">The cache can use a doubly-linked list: new items will be added to the head while items to expire will be removed from the tail. We'll use a hash table for fast lookups to each linked list node.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Clarify with your interviewer how much code you are expected to write</span>.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Query API Server</span>&nbsp;implementation:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">class QueryApi(object):\n\n    def __init__(self, memory_cache, reverse_index_service):\n        self.memory_cache = memory_cache\n        self.reverse_index_service = reverse_index_service\n\n    def parse_query(self, query):\n        \"\"\"Remove markup, break text into terms, deal with typos,\n        normalize capitalization, convert to use boolean operations.\n        \"\"\"\n        ...\n\n    def process_query(self, query):\n        query = self.parse_query(query)\n        results = self.memory_cache.get(query)\n        if results is None:\n            results = self.reverse_index_service.process_search(query)\n            self.memory_cache.set(query, results)\n        return results\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Node</span>&nbsp;implementation:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">class Node(object):\n\n    def __init__(self, query, results):\n        self.query = query\n        self.results = results\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">LinkedList</span>&nbsp;implementation:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">class LinkedList(object):\n\n    def __init__(self):\n        self.head = None\n        self.tail = None\n\n    def move_to_front(self, node):\n        ...\n\n    def append_to_front(self, node):\n        ...\n\n    def remove_from_tail(self):\n        ...\n</code></pre><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Cache</span>&nbsp;implementation:</p><pre style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin-bottom: 16px; font-stretch: normal; line-height: 1.45; word-wrap: normal; padding: 16px; background-color: rgb(246, 248, 250); border-radius: 3px; color: rgb(36, 41, 46);\"><code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; margin: 0px; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-radius: 3px; word-break: normal; border: 0px; display: inline; overflow: visible; line-height: inherit; word-wrap: normal;\">class Cache(object):\n\n    def __init__(self, MAX_SIZE):\n        self.MAX_SIZE = MAX_SIZE\n        self.size = 0\n        self.lookup = {}  # key: query, value: node\n        self.linked_list = LinkedList()\n\n    def get(self, query)\n        \"\"\"Get the stored query result from the cache.\n\n        Accessing a node updates its position to the front of the LRU list.\n        \"\"\"\n        node = self.lookup[query]\n        if node is None:\n            return None\n        self.linked_list.move_to_front(node)\n        return node.results\n\n    def set(self, results, query):\n        \"\"\"Set the result for the given query key in the cache.\n\n        When updating an entry, updates its position to the front of the LRU list.\n        If the entry is new and the cache is at capacity, removes the oldest entry\n        before the new entry is added.\n        \"\"\"\n        node = self.lookup[query]\n        if node is not None:\n            # Key exists in cache, update the value\n            node.results = results\n            self.linked_list.move_to_front(node)\n        else:\n            # Key does not exist in cache\n            if self.size == self.MAX_SIZE:\n                # Remove the oldest entry from the linked list and lookup\n                self.lookup.pop(self.linked_list.tail.query, None)\n                self.linked_list.remove_from_tail()\n            else:\n                self.size += 1\n            # Add the new key and value\n            new_node = Node(query, results)\n            self.linked_list.append_to_front(new_node)\n            self.lookup[query] = new_node\n</code></pre><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-when-to-update-the-cache\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#when-to-update-the-cache\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>When to update the cache</h4><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">The cache should be updated when:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">The page contents change</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The page is removed or a new page is added</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The page rank changes</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">The most straightforward way to handle these cases is to simply set a max time that a cached entry can stay in the cache before it is updated, usually referred to as time to live (TTL).</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Refer to&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#when-to-update-the-cache\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">When to update the cache</a>&nbsp;for tradeoffs and alternatives. The approach above describes&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#cache-aside\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">cache-aside</a>.</p><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-4-scale-the-design\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#step-4-scale-the-design\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 4: Scale the design</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Identify and address bottlenecks, given the constraints.</p></blockquote><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/b6439861687b9a0fc62d0149a364082643ebaf86/687474703a2f2f692e696d6775722e636f6d2f346a39396d68652e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/b6439861687b9a0fc62d0149a364082643ebaf86/687474703a2f2f692e696d6775722e636f6d2f346a39396d68652e706e67\" alt=\"Imgur\" data-canonical-src=\"http://i.imgur.com/4j99mhe.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Important: Do not simply jump right into the final design from the initial design!</span></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">State you would 1)&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Benchmark/Load Test</span>, 2)&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Profile</span>&nbsp;for bottlenecks 3) address bottlenecks while evaluating alternatives and trade-offs, and 4) repeat. See&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer/blob/master/solutions/system_design/query_cache\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Design a system that scales to millions of users on AWS</a>&nbsp;as a sample on how to iteratively scale the initial design.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">It's important to discuss what bottlenecks you might encounter with the initial design and how you might address each of them. For example, what issues are addressed by adding a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Load Balancer</span>&nbsp;with multiple&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Servers</span>?&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">CDN</span>?<span style=\"box-sizing: border-box; font-weight: 600;\">Master-Slave Replicas</span>? What are the alternatives and&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Trade-Offs</span>&nbsp;for each?</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We'll introduce some components to complete the design and to address scalability issues. Internal load balancers are not shown to reduce clutter.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><em style=\"box-sizing: border-box;\">To avoid repeating discussions</em>, refer to the following&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">system design topics</a>&nbsp;for main talking points, tradeoffs, and alternatives:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#domain-name-system\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">DNS</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#load-balancer\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Load balancer</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#horizontal-scaling\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Horizontal scaling</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#reverse-proxy-web-server\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Web server (reverse proxy)</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#application-layer\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">API server (application layer)</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#cache\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Cache</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#consistency-patterns\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Consistency patterns</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#availability-patterns\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Availability patterns</a></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-expanding-the-memory-cache-to-many-machines\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#expanding-the-memory-cache-to-many-machines\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Expanding the Memory Cache to many machines</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">To handle the heavy request load and the large amount of memory needed, we'll scale horizontally. We have three main options on how to store the data on our&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span>&nbsp;cluster:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Each machine in the cache cluster has its own cache</span>&nbsp;- Simple, although it will likely result in a low cache hit rate.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Each machine in the cache cluster has a copy of the cache</span>&nbsp;- Simple, although it is an inefficient use of memory.</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">The cache is&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#sharding\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">sharded</a>&nbsp;across all machines in the cache cluster</span>&nbsp;- More complex, although it is likely the best option. We could use hashing to determine which machine could have the cached results of a query using&nbsp;<code style=\"box-sizing: border-box; font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 13.6px; padding: 0.2em 0px; margin: 0px; background-color: rgba(27, 31, 35, 0.0470588); border-radius: 3px;\">machine = hash(query)</code>. We'll likely want to use&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#consistent-hashing\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">consistent hashing</a>.</li></ul><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-additional-talking-points\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#additional-talking-points\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Additional talking points</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Additional topics to dive into, depending on the problem scope and time remaining.</p></blockquote><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-sql-scaling-patterns\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#sql-scaling-patterns\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SQL scaling patterns</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#master-slave\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Read replicas</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#federation\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Federation</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#sharding\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Sharding</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#denormalization\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Denormalization</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#sql-tuning\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">SQL Tuning</a></li></ul><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-nosql\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#nosql\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>NoSQL</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Key-value store</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Document store</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Wide column store</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Graph database</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">SQL vs NoSQL</a></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-caching\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#caching\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Caching</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Where to cache<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#client-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Client caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#cdn-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">CDN caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#web-server-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Web server caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#database-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Database caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#application-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Application caching</a></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">What to cache<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#caching-at-the-database-query-level\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Caching at the database query level</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#caching-at-the-object-level\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Caching at the object level</a></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">When to update the cache<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#cache-aside\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Cache-aside</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#write-through\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Write-through</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#write-behind-write-back\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Write-behind (write-back)</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#refresh-ahead\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Refresh ahead</a></li></ul></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-asynchronism-and-microservices\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#asynchronism-and-microservices\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Asynchronism and microservices</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Message queues</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Task queues</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Back pressure</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Microservices</a></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-communications\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#communications\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Communications</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Discuss tradeoffs:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">External communication with clients -&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#representational-state-transfer-rest\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">HTTP APIs following REST</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Internal communications -&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#remote-procedure-call-rpc\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">RPC</a></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#service-discovery\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Service discovery</a></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-security\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#security\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Security</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Refer to the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#security\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">security section</a>.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-latency-numbers\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#latency-numbers\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Latency numbers</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">See&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Latency numbers every programmer should know</a>.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-ongoing\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/query_cache#ongoing\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ongoing</h3><ul style=\"box-sizing: border-box; padding-left: 2em; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; margin-bottom: 0px !important;\"><li style=\"box-sizing: border-box;\">Continue benchmarking and monitoring your system to address bottlenecks as they come up</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Scaling is an iterative process</li></ul>"
                    ],
                    "guid": "Fu1u^|*TcV",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                },
                {
                    "__type__": "Note",
                    "fields": [
                        "<h1 style=\"box-sizing: border-box; font-size: 2em; margin-bottom: 16px; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\">Design a system that scales to millions of users on AWS</h1>",
                        "<p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><em style=\"box-sizing: border-box;\">Note: This document links directly to relevant areas found in the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#index-of-system-design-topics-1\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">system design topics</a>&nbsp;to avoid duplication. Refer to the linked content for general talking points, tradeoffs, and alternatives.</em></p><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-1-outline-use-cases-and-constraints\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#step-1-outline-use-cases-and-constraints\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 1: Outline use cases and constraints</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Gather requirements and scope the problem. Ask questions to clarify use cases and constraints. Discuss assumptions.</p></blockquote><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Without an interviewer to address clarifying questions, we'll define some use cases and constraints.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-use-cases\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#use-cases\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use cases</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Solving this problem takes an iterative approach of: 1)&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Benchmark/Load Test</span>, 2)&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Profile</span>&nbsp;for bottlenecks 3) address bottlenecks while evaluating alternatives and trade-offs, and 4) repeat, which is good pattern for evolving basic designs to scalable designs.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Unless you have a background in AWS or are applying for a position that requires AWS knowledge, AWS-specific details are not a requirement. However,&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">much of the principles discussed in this exercise can apply more generally outside of the AWS ecosystem.</span></p><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-well-scope-the-problem-to-handle-only-the-following-use-cases\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#well-scope-the-problem-to-handle-only-the-following-use-cases\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>We'll scope the problem to handle only the following use cases</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><span style=\"box-sizing: border-box; font-weight: 600;\">User</span>&nbsp;makes a read or write request<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Service</span>&nbsp;does processing, stores user data, then returns the results</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Service</span>&nbsp;needs to evolve from serving a small amount of users to millions of users<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Discuss general scaling patterns as we evolve an architecture to handle a large number of users and requests</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Service</span>&nbsp;has high availability</li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-constraints-and-assumptions\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#constraints-and-assumptions\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Constraints and assumptions</h3><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-state-assumptions\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#state-assumptions\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>State assumptions</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Traffic is not evenly distributed</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Need for relational data</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Scale from 1 user to tens of millions of users<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Denote increase of users as:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Users+</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Users++</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Users+++</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">...</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">10 million users</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">1 billion writes per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">100 billion reads per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">100:1 read to write ratio</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">1 KB content per write</li></ul></li></ul><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-calculate-usage\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#calculate-usage\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Calculate usage</h4><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Clarify with your interviewer if you should run back-of-the-envelope usage calculations.</span></p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">1 TB of new content per month<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">1 KB per write * 1 billion writes per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">36 TB of new content in 3 years</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Assume most writes are from new content instead of updates to existing ones</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">400 writes per second on average</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">40,000 reads per second on average</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Handy conversion guide:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">2.5 million seconds per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">1 request per second = 2.5 million requests per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">40 requests per second = 100 million requests per month</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">400 requests per second = 1 billion requests per month</li></ul><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-2-create-a-high-level-design\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#step-2-create-a-high-level-design\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 2: Create a high level design</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Outline a high level design with all important components.</p></blockquote><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/19e81d65d7ced13c58952f72fe1002e0f8c5798c/687474703a2f2f692e696d6775722e636f6d2f42384c444b44372e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/19e81d65d7ced13c58952f72fe1002e0f8c5798c/687474703a2f2f692e696d6775722e636f6d2f42384c444b44372e706e67\" alt=\"Imgur\" data-canonical-src=\"http://i.imgur.com/B8LDKD7.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a></p><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-3-design-core-components\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#step-3-design-core-components\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 3: Design core components</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Dive into details for each core component.</p></blockquote><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-use-case-user-makes-a-read-or-write-request\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#use-case-user-makes-a-read-or-write-request\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use case: User makes a read or write request</h3><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-goals\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#goals\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Goals</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">With only 1-2 users, you only need a basic setup<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Single box for simplicity</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Vertical scaling when needed</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Monitor to determine bottlenecks</li></ul></li></ul><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-start-with-a-single-box\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#start-with-a-single-box\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Start with a single box</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Web server</span>&nbsp;on EC2<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Storage for user data</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#sql\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><span style=\"box-sizing: border-box; font-weight: 600;\">MySQL Database</span></a></li></ul></li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Use&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Vertical Scaling</span>:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Simply choose a bigger box</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Keep an eye on metrics to determine how to scale up<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Use basic monitoring to determine bottlenecks: CPU, memory, IO, network, etc</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">CloudWatch, top, nagios, statsd, graphite, etc</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Scaling vertically can get very expensive</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">No redundancy/failover</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><em style=\"box-sizing: border-box;\">Trade-offs, alternatives, and additional details:</em></p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">The alternative to&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Vertical Scaling</span>&nbsp;is&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#horizontal-scaling\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><span style=\"box-sizing: border-box; font-weight: 600;\">Horizontal scaling</span></a></li></ul><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-start-with-sql-consider-nosql\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#start-with-sql-consider-nosql\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Start with SQL, consider NoSQL</h4><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">The constraints assume there is a need for relational data. We can start off using a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">MySQL Database</span>&nbsp;on the single box.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><em style=\"box-sizing: border-box;\">Trade-offs, alternatives, and additional details:</em></p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">See the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#relational-database-management-system-rdbms\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Relational database management system (RDBMS)</a>&nbsp;section</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Discuss reasons to use&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#sql-or-nosql\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">SQL or NoSQL</a></li></ul><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-assign-a-public-static-ip\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#assign-a-public-static-ip\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Assign a public static IP</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Elastic IPs provide a public endpoint whose IP doesn't change on reboot</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Helps with failover, just point the domain to a new IP</li></ul><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-use-a-dns\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#use-a-dns\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Use a DNS</h4><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Add a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">DNS</span>&nbsp;such as Route 53 to map the domain to the instance's public IP.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><em style=\"box-sizing: border-box;\">Trade-offs, alternatives, and additional details:</em></p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">See the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#domain-name-system\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Domain name system</a>&nbsp;section</li></ul><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-secure-the-web-server\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#secure-the-web-server\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Secure the web server</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Open up only necessary ports<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Allow the web server to respond to incoming requests from:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">80 for HTTP</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">443 for HTTPS</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">22 for SSH to only whitelisted IPs</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Prevent the web server from initiating outbound connections</li></ul></li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><em style=\"box-sizing: border-box;\">Trade-offs, alternatives, and additional details:</em></p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">See the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#security\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Security</a>&nbsp;section</li></ul><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-step-4-scale-the-design\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#step-4-scale-the-design\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Step 4: Scale the design</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Identify and address bottlenecks, given the constraints.</p></blockquote><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-users\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#users\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Users+</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/91df3093298a51bf3b70a2e24622f37d5ee19d0f/687474703a2f2f692e696d6775722e636f6d2f7272666a4d58422e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/91df3093298a51bf3b70a2e24622f37d5ee19d0f/687474703a2f2f692e696d6775722e636f6d2f7272666a4d58422e706e67\" alt=\"Imgur\" data-canonical-src=\"http://i.imgur.com/rrfjMXB.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a></p><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-assumptions\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#assumptions\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Assumptions</h4><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Our user count is starting to pick up and the load is increasing on our single box. Our&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Benchmarks/Load Tests</span>&nbsp;and&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Profiling</span>&nbsp;are pointing to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">MySQL Database</span>&nbsp;taking up more and more memory and CPU resources, while the user content is filling up disk space.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We've been able to address these issues with&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Vertical Scaling</span>&nbsp;so far. Unfortunately, this has become quite expensive and it doesn't allow for independent scaling of the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">MySQL Database</span>&nbsp;and&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span>.</p><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-goals-1\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#goals-1\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Goals</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Lighten load on the single box and allow for independent scaling<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Store static content separately in an&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Object Store</span></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Move the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">MySQL Database</span>&nbsp;to a separate box</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Disadvantages<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">These changes would increase complexity and would require changes to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span>&nbsp;to point to the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Object Store</span>&nbsp;and the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">MySQL Database</span></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Additional security measures must be taken to secure the new components</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">AWS costs could also increase, but should be weighed with the costs of managing similar systems on your own</li></ul></li></ul><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-store-static-content-separately\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#store-static-content-separately\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Store static content separately</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Consider using a managed&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Object Store</span>&nbsp;like S3 to store static content<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Highly scalable and reliable</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Server side encryption</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Move static content to S3<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">User files</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">JS</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">CSS</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Images</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Videos</li></ul></li></ul><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-move-the-mysql-database-to-a-separate-box\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#move-the-mysql-database-to-a-separate-box\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Move the MySQL database to a separate box</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Consider using a service like RDS to manage the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">MySQL Database</span><ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Simple to administer, scale</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Multiple availability zones</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Encryption at rest</li></ul></li></ul><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-secure-the-system\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#secure-the-system\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Secure the system</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Encrypt data in transit and at rest</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Use a Virtual Private Cloud<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Create a public subnet for the single&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span>&nbsp;so it can send and receive traffic from the internet</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Create a private subnet for everything else, preventing outside access</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Only open ports from whitelisted IPs for each component</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">These same patterns should be implemented for new components in the remainder of the exercise</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><em style=\"box-sizing: border-box;\">Trade-offs, alternatives, and additional details:</em></p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">See the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#security\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Security</a>&nbsp;section</li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-users-1\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#users-1\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Users++</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/0a8044552aafe305f21804e136aa3d69e08e958a/687474703a2f2f692e696d6775722e636f6d2f72616f4654584d2e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/0a8044552aafe305f21804e136aa3d69e08e958a/687474703a2f2f692e696d6775722e636f6d2f72616f4654584d2e706e67\" alt=\"Imgur\" data-canonical-src=\"http://i.imgur.com/raoFTXM.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a></p><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-assumptions-1\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#assumptions-1\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Assumptions</h4><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Our&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Benchmarks/Load Tests</span>&nbsp;and&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Profiling</span>&nbsp;show that our single&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span>&nbsp;bottlenecks during peak hours, resulting in slow responses and in some cases, downtime. As the service matures, we'd also like to move towards higher availability and redundancy.</p><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-goals-2\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#goals-2\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Goals</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">The following goals attempt to address the scaling issues with the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span><ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Based on the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Benchmarks/Load Tests</span>&nbsp;and&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Profiling</span>, you might only need to implement one or two of these techniques</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Use&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#horizontal-scaling\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><span style=\"box-sizing: border-box; font-weight: 600;\">Horizontal Scaling</span></a>&nbsp;to handle increasing loads and to address single points of failure<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Add a&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#load-balancer\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><span style=\"box-sizing: border-box; font-weight: 600;\">Load Balancer</span></a>&nbsp;such as Amazon's ELB or HAProxy<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">ELB is highly available</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">If you are configuring your own&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Load Balancer</span>, setting up multiple servers in&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#active-active\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">active-active</a>&nbsp;or&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#active-passive\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">active-passive</a>&nbsp;in multiple availability zones will improve availability</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Terminate SSL on the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Load Balancer</span>&nbsp;to reduce computational load on backend servers and to simplify certificate administration</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Use multiple&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Servers</span>&nbsp;spread out over multiple availability zones</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Use multiple&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">MySQL</span>&nbsp;instances in&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#master-slave-replication\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><span style=\"box-sizing: border-box; font-weight: 600;\">Master-Slave Failover</span></a>&nbsp;mode across multiple availability zones to improve redundancy</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Separate out the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Servers</span>&nbsp;from the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#application-layer\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><span style=\"box-sizing: border-box; font-weight: 600;\">Application Servers</span></a><ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Scale and configure both layers independently</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Web Servers</span>&nbsp;can run as a&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#reverse-proxy\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><span style=\"box-sizing: border-box; font-weight: 600;\">Reverse Proxy</span></a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">For example, you can add&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Application Servers</span>&nbsp;handling&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Read APIs</span>&nbsp;while others handle&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Write APIs</span></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Move static (and some dynamic) content to a&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#content-delivery-network\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><span style=\"box-sizing: border-box; font-weight: 600;\">Content Delivery Network (CDN)</span></a>&nbsp;such as CloudFront to reduce load and latency</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><em style=\"box-sizing: border-box;\">Trade-offs, alternatives, and additional details:</em></p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">See the linked content above for details</li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-users-2\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#users-2\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Users+++</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/45ccce17b66f6089bc014a2c9ed538753df69ed9/687474703a2f2f692e696d6775722e636f6d2f4f5a43784a72302e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/45ccce17b66f6089bc014a2c9ed538753df69ed9/687474703a2f2f692e696d6775722e636f6d2f4f5a43784a72302e706e67\" alt=\"Imgur\" data-canonical-src=\"http://i.imgur.com/OZCxJr0.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Note:</span>&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Internal Load Balancers</span>&nbsp;not shown to reduce clutter</p><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-assumptions-2\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#assumptions-2\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Assumptions</h4><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Our&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Benchmarks/Load Tests</span>&nbsp;and&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Profiling</span>&nbsp;show that we are read-heavy (100:1 with writes) and our database is suffering from poor performance from the high read requests.</p><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-goals-3\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#goals-3\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Goals</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">The following goals attempt to address the scaling issues with the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">MySQL Database</span><ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Based on the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Benchmarks/Load Tests</span>&nbsp;and&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Profiling</span>, you might only need to implement one or two of these techniques</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Move the following data to a&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#cache\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span></a>&nbsp;such as Elasticache to reduce load and latency:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Frequently accessed content from&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">MySQL</span><ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">First, try to configure the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">MySQL Database</span>&nbsp;cache to see if that is sufficient to relieve the bottleneck before implementing a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Session data from the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Servers</span><ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Servers</span>&nbsp;become stateless, allowing for&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Autoscaling</span></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Reading 1 MB sequentially from memory takes about 250 microseconds, while reading from SSD takes 4x and from disk takes 80x longer.<span style=\"box-sizing: border-box; font-size: 12px; line-height: 0; position: relative; vertical-align: baseline; top: -0.5em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">1</a></span></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Add&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#master-slave-replication\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><span style=\"box-sizing: border-box; font-weight: 600;\">MySQL Read Replicas</span></a>&nbsp;to reduce load on the write master</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Add more&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Servers</span>&nbsp;and&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Application Servers</span>&nbsp;to improve responsiveness</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><em style=\"box-sizing: border-box;\">Trade-offs, alternatives, and additional details:</em></p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">See the linked content above for details</li></ul><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-add-mysql-read-replicas\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#add-mysql-read-replicas\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Add MySQL read replicas</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">In addition to adding and scaling a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span>,&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">MySQL Read Replicas</span>&nbsp;can also help relieve load on the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">MySQL Write Master</span></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Add logic to&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span>&nbsp;to separate out writes and reads</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Add&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Load Balancers</span>&nbsp;in front of&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">MySQL Read Replicas</span>&nbsp;(not pictured to reduce clutter)</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Most services are read-heavy vs write-heavy</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><em style=\"box-sizing: border-box;\">Trade-offs, alternatives, and additional details:</em></p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">See the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#relational-database-management-system-rdbms\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Relational database management system (RDBMS)</a>&nbsp;section</li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-users-3\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#users-3\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Users++++</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/2b12de3a8a5c67a6bccadee0061bdb3d2c02c9d0/687474703a2f2f692e696d6775722e636f6d2f3358386e6d644c2e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/2b12de3a8a5c67a6bccadee0061bdb3d2c02c9d0/687474703a2f2f692e696d6775722e636f6d2f3358386e6d644c2e706e67\" alt=\"Imgur\" data-canonical-src=\"http://i.imgur.com/3X8nmdL.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a></p><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-assumptions-3\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#assumptions-3\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Assumptions</h4><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Our&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Benchmarks/Load Tests</span>&nbsp;and&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Profiling</span>&nbsp;show that our traffic spikes during regular business hours in the U.S. and drop significantly when users leave the office. We think we can cut costs by automatically spinning up and down servers based on actual load. We're a small shop so we'd like to automate as much of the DevOps as possible for&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Autoscaling</span>&nbsp;and for the general operations.</p><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-goals-4\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#goals-4\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Goals</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Add&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Autoscaling</span>&nbsp;to provision capacity as needed<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Keep up with traffic spikes</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Reduce costs by powering down unused instances</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Automate DevOps<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Chef, Puppet, Ansible, etc</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Continue monitoring metrics to address bottlenecks<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Host level</span>&nbsp;- Review a single EC2 instance</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Aggregate level</span>&nbsp;- Review load balancer stats</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Log analysis</span>&nbsp;- CloudWatch, CloudTrail, Loggly, Splunk, Sumo</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">External site performance</span>&nbsp;- Pingdom or New Relic</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Handle notifications and incidents</span>&nbsp;- PagerDuty</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Error Reporting</span>&nbsp;- Sentry</li></ul></li></ul><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-add-autoscaling\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#add-autoscaling\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Add autoscaling</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Consider a managed service such as AWS&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Autoscaling</span><ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Create one group for each&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Web Server</span>&nbsp;and one for each&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Application Server</span>&nbsp;type, place each group in multiple availability zones</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Set a min and max number of instances</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Trigger to scale up and down through CloudWatch<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Simple time of day metric for predictable loads or</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Metrics over a time period:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">CPU load</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Latency</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Network traffic</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Custom metric</li></ul></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Disadvantages<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Autoscaling can introduce complexity</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">It could take some time before a system appropriately scales up to meet increased demand, or to scale down when demand drops</li></ul></li></ul></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-users-4\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#users-4\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Users+++++</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><a href=\"https://camo.githubusercontent.com/e45e39c36eebcc4c66e1aecd4e4145112d8e88e3/687474703a2f2f692e696d6775722e636f6d2f6a6a3341354e382e706e67\" target=\"_blank\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><img src=\"https://camo.githubusercontent.com/e45e39c36eebcc4c66e1aecd4e4145112d8e88e3/687474703a2f2f692e696d6775722e636f6d2f6a6a3341354e382e706e67\" alt=\"Imgur\" data-canonical-src=\"http://i.imgur.com/jj3A5N8.png\" style=\"box-sizing: content-box; max-width: 100%;\"></a></p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Note:</span>&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Autoscaling</span>&nbsp;groups not shown to reduce clutter</p><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-assumptions-4\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#assumptions-4\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Assumptions</h4><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">As the service continues to grow towards the figures outlined in the constraints, we iteratively run&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Benchmarks/Load Tests</span>&nbsp;and&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Profiling</span>&nbsp;to uncover and address new bottlenecks.</p><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-goals-5\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#goals-5\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Goals</h4><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We'll continue to address scaling issues due to the problem's constraints:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">If our&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">MySQL Database</span>&nbsp;starts to grow too large, we might considering only storing a limited time period of data in the database, while storing the rest in a data warehouse such as Redshift<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">A data warehouse such as Redshift can comfortably handle the constraint of 1 TB of new content per month</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">With 40,000 average read requests per second, read traffic for popular content can be addressed by scaling the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Memory Cache</span>, which is also useful for handling the unevenly distributed traffic and traffic spikes<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">SQL Read Replicas</span>&nbsp;might have trouble handling the cache misses, we'll probably need to employ additional SQL scaling patterns</li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">400 average writes per second (with presumably significantly higher peaks) might be tough for a single&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">SQL Write Master-Slave</span>, also pointing to a need for additional scaling techniques</li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">SQL scaling patterns include:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#federation\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Federation</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#sharding\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Sharding</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#denormalization\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Denormalization</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#sql-tuning\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">SQL Tuning</a></li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">To further address the high read and write requests, we should also consider moving appropriate data to a&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#nosql\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><span style=\"box-sizing: border-box; font-weight: 600;\">NoSQL Database</span></a>&nbsp;such as DynamoDB.</p><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">We can further separate out our&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#application-layer\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><span style=\"box-sizing: border-box; font-weight: 600;\">Application Servers</span></a>&nbsp;to allow for independent scaling. Batch processes or computations that do not need to be done in real-time can be done&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#asynchronism\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\"><span style=\"box-sizing: border-box; font-weight: 600;\">Asynchronously</span></a>&nbsp;with&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Queues</span>&nbsp;and&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Workers</span>:</p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">For example, in a photo service, the photo upload and the thumbnail creation can be separated:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Client</span>&nbsp;uploads photo</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><span style=\"box-sizing: border-box; font-weight: 600;\">Application Server</span>&nbsp;puts a job in a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Queue</span>&nbsp;such as SQS</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">The&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Worker Service</span>&nbsp;on EC2 or Lambda pulls work off the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Queue</span>&nbsp;then:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">Creates a thumbnail</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Updates a&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Database</span></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Stores the thumbnail in the&nbsp;<span style=\"box-sizing: border-box; font-weight: 600;\">Object Store</span></li></ul></li></ul></li></ul><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><em style=\"box-sizing: border-box;\">Trade-offs, alternatives, and additional details:</em></p><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">See the linked content above for details</li></ul><h2 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.5em; font-weight: 600; line-height: 1.25; padding-bottom: 0.3em; border-bottom: 1px solid rgb(234, 236, 239); color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-additional-talking-points\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#additional-talking-points\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Additional talking points</h2><blockquote style=\"box-sizing: border-box; margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left: 0.25em solid rgb(223, 226, 229); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><p style=\"box-sizing: border-box; margin-bottom: 0px;\">Additional topics to dive into, depending on the problem scope and time remaining.</p></blockquote><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-sql-scaling-patterns\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#sql-scaling-patterns\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SQL scaling patterns</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#master-slave\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Read replicas</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#federation\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Federation</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#sharding\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Sharding</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#denormalization\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Denormalization</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#sql-tuning\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">SQL Tuning</a></li></ul><h4 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 16px; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-nosql\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#nosql\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>NoSQL</h4><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Key-value store</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Document store</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Wide column store</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Graph database</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">SQL vs NoSQL</a></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-caching\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#caching\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Caching</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Where to cache<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#client-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Client caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#cdn-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">CDN caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#web-server-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Web server caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#database-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Database caching</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#application-caching\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Application caching</a></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">What to cache<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#caching-at-the-database-query-level\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Caching at the database query level</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#caching-at-the-object-level\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Caching at the object level</a></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">When to update the cache<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#cache-aside\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Cache-aside</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#write-through\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Write-through</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#write-behind-write-back\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Write-behind (write-back)</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#refresh-ahead\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Refresh ahead</a></li></ul></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-asynchronism-and-microservices\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#asynchronism-and-microservices\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Asynchronism and microservices</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Message queues</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Task queues</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Back pressure</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Microservices</a></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-communications\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#communications\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Communications</h3><ul style=\"box-sizing: border-box; padding-left: 2em; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\"><li style=\"box-sizing: border-box;\">Discuss tradeoffs:<ul style=\"box-sizing: border-box; padding-left: 2em;\"><li style=\"box-sizing: border-box;\">External communication with clients -&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#representational-state-transfer-rest\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">HTTP APIs following REST</a></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Internal communications -&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#remote-procedure-call-rpc\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">RPC</a></li></ul></li><li style=\"box-sizing: border-box; margin-top: 0.25em;\"><a href=\"https://github.com/donnemartin/system-design-primer-interview#service-discovery\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Service discovery</a></li></ul><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-security\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#security\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Security</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">Refer to the&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#security\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">security section</a>.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-latency-numbers\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#latency-numbers\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Latency numbers</h3><p style=\"box-sizing: border-box; margin-bottom: 16px; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px;\">See&nbsp;<a href=\"https://github.com/donnemartin/system-design-primer-interview#latency-numbers-every-programmer-should-know\" style=\"box-sizing: border-box; color: rgb(3, 102, 214);\">Latency numbers every programmer should know</a>.</p><h3 style=\"box-sizing: border-box; margin-top: 24px; margin-bottom: 16px; font-size: 1.25em; font-weight: 600; line-height: 1.25; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;;\"><a id=\"user-content-ongoing\" class=\"anchor\" href=\"https://github.com/donnemartin/system-design-primer/tree/master/solutions/system_design/scaling_aws#ongoing\" aria-hidden=\"true\" style=\"box-sizing: border-box; color: rgb(3, 102, 214); float: left; padding-right: 4px; margin-left: -20px; line-height: 1;\"><svg aria-hidden=\"true\" class=\"octicon octicon-link\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ongoing</h3><ul style=\"box-sizing: border-box; padding-left: 2em; color: rgb(36, 41, 46); font-family: -apple-system, system-ui, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; margin-bottom: 0px !important;\"><li style=\"box-sizing: border-box;\">Continue benchmarking and monitoring your system to address bottlenecks as they come up</li><li style=\"box-sizing: border-box; margin-top: 0.25em;\">Scaling is an iterative process</li></ul>"
                    ],
                    "guid": "fwD>I,wh`$",
                    "note_model_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
                    "tags": []
                }
            ]
        }
    ],
    "crowdanki_uuid": "936f0303-caa9-11ec-9694-0c96e6db14fa",
    "deck_config_uuid": "936f0304-caa9-11ec-9b76-0c96e6db14fa",
    "deck_configurations": [
        {
            "__type__": "DeckConfig",
            "autoplay": true,
            "crowdanki_uuid": "936f0304-caa9-11ec-9b76-0c96e6db14fa",
            "dyn": false,
            "interdayLearningMix": 0,
            "lapse": {
                "delays": [
                    20.0,
                    1440.0
                ],
                "leechAction": 1,
                "leechFails": 8,
                "minInt": 3,
                "mult": 0.1
            },
            "maxTaken": 300,
            "name": "Default",
            "new": {
                "bury": true,
                "delays": [
                    15.0,
                    1440.0,
                    4320.0
                ],
                "initialFactor": 2500,
                "ints": [
                    6,
                    8,
                    0
                ],
                "order": 0,
                "perDay": 100
            },
            "newGatherPriority": 0,
            "newMix": 0,
            "newPerDayMinimum": 0,
            "newSortOrder": 0,
            "replayq": true,
            "rev": {
                "bury": false,
                "ease4": 1.3,
                "hardFactor": 1.2,
                "ivlFct": 1.0,
                "maxIvl": 240,
                "perDay": 9999
            },
            "reviewOrder": 0,
            "timer": 0
        },
        {
            "__type__": "DeckConfig",
            "autoplay": true,
            "crowdanki_uuid": "936f9f06-caa9-11ec-94b3-0c96e6db14fa",
            "dyn": false,
            "interdayLearningMix": 0,
            "lapse": {
                "delays": [
                    20.0,
                    1440.0
                ],
                "leechAction": 1,
                "leechFails": 8,
                "minInt": 3,
                "mult": 0.1
            },
            "maxTaken": 300,
            "name": "Default",
            "new": {
                "bury": true,
                "delays": [
                    15.0,
                    1440.0,
                    4320.0
                ],
                "initialFactor": 2500,
                "ints": [
                    6,
                    8,
                    0
                ],
                "order": 0,
                "perDay": 100
            },
            "newGatherPriority": 0,
            "newMix": 0,
            "newPerDayMinimum": 0,
            "newSortOrder": 0,
            "replayq": true,
            "rev": {
                "bury": false,
                "ease4": 1.3,
                "hardFactor": 1.2,
                "ivlFct": 1.0,
                "maxIvl": 240,
                "perDay": 9999
            },
            "reviewOrder": 0,
            "timer": 0
        },
        {
            "__type__": "DeckConfig",
            "autoplay": true,
            "crowdanki_uuid": "93703b57-caa9-11ec-ba48-0c96e6db14fa",
            "dyn": false,
            "interdayLearningMix": 0,
            "lapse": {
                "delays": [
                    20.0,
                    1440.0
                ],
                "leechAction": 1,
                "leechFails": 8,
                "minInt": 3,
                "mult": 0.1
            },
            "maxTaken": 300,
            "name": "Default",
            "new": {
                "bury": true,
                "delays": [
                    15.0,
                    1440.0,
                    4320.0
                ],
                "initialFactor": 2500,
                "ints": [
                    6,
                    8,
                    0
                ],
                "order": 0,
                "perDay": 100
            },
            "newGatherPriority": 0,
            "newMix": 0,
            "newPerDayMinimum": 0,
            "newSortOrder": 0,
            "replayq": true,
            "rev": {
                "bury": false,
                "ease4": 1.3,
                "hardFactor": 1.2,
                "ivlFct": 1.0,
                "maxIvl": 240,
                "perDay": 9999
            },
            "reviewOrder": 0,
            "timer": 0
        },
        {
            "__type__": "DeckConfig",
            "autoplay": true,
            "crowdanki_uuid": "937173ee-caa9-11ec-accc-0c96e6db14fa",
            "dyn": false,
            "interdayLearningMix": 0,
            "lapse": {
                "delays": [
                    20.0,
                    1440.0
                ],
                "leechAction": 1,
                "leechFails": 8,
                "minInt": 3,
                "mult": 0.1
            },
            "maxTaken": 300,
            "name": "Default",
            "new": {
                "bury": true,
                "delays": [
                    15.0,
                    1440.0,
                    4320.0
                ],
                "initialFactor": 2500,
                "ints": [
                    6,
                    8,
                    0
                ],
                "order": 0,
                "perDay": 100
            },
            "newGatherPriority": 0,
            "newMix": 0,
            "newPerDayMinimum": 0,
            "newSortOrder": 0,
            "replayq": true,
            "rev": {
                "bury": false,
                "ease4": 1.3,
                "hardFactor": 1.2,
                "ivlFct": 1.0,
                "maxIvl": 240,
                "perDay": 9999
            },
            "reviewOrder": 0,
            "timer": 0
        },
        {
            "__type__": "DeckConfig",
            "autoplay": true,
            "crowdanki_uuid": "93723726-caa9-11ec-97f8-0c96e6db14fa",
            "dyn": false,
            "interdayLearningMix": 0,
            "lapse": {
                "delays": [
                    20.0,
                    1440.0
                ],
                "leechAction": 1,
                "leechFails": 8,
                "minInt": 3,
                "mult": 0.1
            },
            "maxTaken": 300,
            "name": "Default",
            "new": {
                "bury": true,
                "delays": [
                    15.0,
                    1440.0,
                    4320.0
                ],
                "initialFactor": 2500,
                "ints": [
                    6,
                    8,
                    0
                ],
                "order": 0,
                "perDay": 100
            },
            "newGatherPriority": 0,
            "newMix": 0,
            "newPerDayMinimum": 0,
            "newSortOrder": 0,
            "replayq": true,
            "rev": {
                "bury": false,
                "ease4": 1.3,
                "hardFactor": 1.2,
                "ivlFct": 1.0,
                "maxIvl": 240,
                "perDay": 9999
            },
            "reviewOrder": 0,
            "timer": 0
        },
        {
            "__type__": "DeckConfig",
            "autoplay": true,
            "crowdanki_uuid": "93743301-caa9-11ec-a796-0c96e6db14fa",
            "dyn": false,
            "interdayLearningMix": 0,
            "lapse": {
                "delays": [
                    20.0,
                    1440.0
                ],
                "leechAction": 1,
                "leechFails": 8,
                "minInt": 3,
                "mult": 0.1
            },
            "maxTaken": 300,
            "name": "Default",
            "new": {
                "bury": true,
                "delays": [
                    15.0,
                    1440.0,
                    4320.0
                ],
                "initialFactor": 2500,
                "ints": [
                    6,
                    8,
                    0
                ],
                "order": 0,
                "perDay": 100
            },
            "newGatherPriority": 0,
            "newMix": 0,
            "newPerDayMinimum": 0,
            "newSortOrder": 0,
            "replayq": true,
            "rev": {
                "bury": false,
                "ease4": 1.3,
                "hardFactor": 1.2,
                "ivlFct": 1.0,
                "maxIvl": 240,
                "perDay": 9999
            },
            "reviewOrder": 0,
            "timer": 0
        }
    ],
    "desc": "",
    "dyn": 0,
    "extendNew": 0,
    "extendRev": 0,
    "media_files": [],
    "name": "Software Design",
    "note_models": [
        {
            "__type__": "NoteModel",
            "crowdanki_uuid": "936fc61e-caa9-11ec-a00e-0c96e6db14fa",
            "css": ".card {\n font-family: arial;\n font-size: 20px;\n text-align: center;\n color: black;\n background-color: white;\n}\n",
            "flds": [
                {
                    "font": "Arial",
                    "media": [],
                    "name": "Front",
                    "ord": 0,
                    "rtl": false,
                    "size": 20,
                    "sticky": false
                },
                {
                    "font": "Arial",
                    "media": [],
                    "name": "Back",
                    "ord": 1,
                    "rtl": false,
                    "size": 20,
                    "sticky": false
                }
            ],
            "latexPost": "\\end{document}",
            "latexPre": "\\documentclass[12pt]{article}\n\\special{papersize=3in,5in}\n\\usepackage[utf8]{inputenc}\n\\usepackage{amssymb,amsmath}\n\\pagestyle{empty}\n\\setlength{\\parindent}{0in}\n\\begin{document}\n",
            "latexsvg": false,
            "name": "Basic-6a407",
            "req": [
                [
                    0,
                    "any",
                    [
                        0
                    ]
                ]
            ],
            "sortf": 0,
            "tags": [
                "search"
            ],
            "tmpls": [
                {
                    "afmt": "{{FrontSide}}\n\n<hr id=answer>\n\n{{Back}}",
                    "bafmt": "",
                    "bfont": "",
                    "bqfmt": "",
                    "bsize": 0,
                    "did": null,
                    "name": "Card 1",
                    "ord": 0,
                    "qfmt": "{{Front}}"
                }
            ],
            "type": 0,
            "vers": []
        },
        {
            "__type__": "NoteModel",
            "crowdanki_uuid": "93706262-caa9-11ec-a73d-0c96e6db14fa",
            "css": ".card {\n  font-family: arial;\n  font-size: 20px;\n  text-align: center;\n  color: black;\n  background-color: white;\n}\n",
            "flds": [
                {
                    "font": "Arial",
                    "name": "Front",
                    "ord": 0,
                    "rtl": false,
                    "size": 20,
                    "sticky": false
                },
                {
                    "font": "Arial",
                    "name": "Back",
                    "ord": 1,
                    "rtl": false,
                    "size": 20,
                    "sticky": false
                }
            ],
            "latexPost": "\\end{document}",
            "latexPre": "\\documentclass[12pt]{article}\n\\special{papersize=3in,5in}\n\\usepackage[utf8]{inputenc}\n\\usepackage{amssymb,amsmath}\n\\pagestyle{empty}\n\\setlength{\\parindent}{0in}\n\\begin{document}\n",
            "latexsvg": false,
            "name": "Basic",
            "req": [
                [
                    0,
                    "any",
                    [
                        0
                    ]
                ]
            ],
            "sortf": 0,
            "tmpls": [
                {
                    "afmt": "{{FrontSide}}\n\n<hr id=answer>\n\n{{Back}}",
                    "bafmt": "",
                    "bfont": "",
                    "bqfmt": "",
                    "bsize": 0,
                    "did": null,
                    "name": "Card 1",
                    "ord": 0,
                    "qfmt": "{{Front}}"
                }
            ],
            "type": 0
        },
        {
            "__type__": "NoteModel",
            "crowdanki_uuid": "93719ae7-caa9-11ec-a2cd-0c96e6db14fa",
            "css": ".card {\n font-family: arial;\n font-size: 20px;\n color: black;\n background-color: white;\n}\n",
            "flds": [
                {
                    "font": "Arial",
                    "media": [],
                    "name": "Front",
                    "ord": 0,
                    "rtl": false,
                    "size": 20,
                    "sticky": false
                },
                {
                    "font": "Arial",
                    "media": [],
                    "name": "Back",
                    "ord": 1,
                    "rtl": false,
                    "size": 20,
                    "sticky": false
                }
            ],
            "latexPost": "\\end{document}",
            "latexPre": "\\documentclass[12pt]{article}\n\\special{papersize=3in,5in}\n\\usepackage[utf8]{inputenc}\n\\usepackage{amssymb,amsmath}\n\\pagestyle{empty}\n\\setlength{\\parindent}{0in}\n\\begin{document}\n",
            "latexsvg": false,
            "name": "Basic-a9935",
            "req": [
                [
                    0,
                    "any",
                    [
                        0
                    ]
                ]
            ],
            "sortf": 0,
            "tags": [],
            "tmpls": [
                {
                    "afmt": "{{FrontSide}}\n\n<hr id=answer>\n\n{{Back}}",
                    "bafmt": "",
                    "bfont": "",
                    "bqfmt": "",
                    "bsize": 0,
                    "did": null,
                    "name": "Card 1",
                    "ord": 0,
                    "qfmt": "{{Front}}"
                }
            ],
            "type": 0,
            "vers": []
        }
    ],
    "notes": []
}